(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}
$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof module==='object'&&module.exports){factory(require('jquery'));}else{factory(jQuery);}}(function($){var debugMode=false;var isOperaMini=Object.prototype.toString.call(window.operamini)==='[object OperaMini]';var isInputSupported='placeholder'in document.createElement('input')&&!isOperaMini&&!debugMode;var isTextareaSupported='placeholder'in document.createElement('textarea')&&!isOperaMini&&!debugMode;var valHooks=$.valHooks;var propHooks=$.propHooks;var hooks;var placeholder;var settings={};if(isInputSupported&&isTextareaSupported){placeholder=$.fn.placeholder=function(){return this;};placeholder.input=true;placeholder.textarea=true;}else{placeholder=$.fn.placeholder=function(options){var defaults={customClass:'placeholder'};settings=$.extend({},defaults,options);return this.filter((isInputSupported?'textarea':':input')+'['+(debugMode?'placeholder-x':'placeholder')+']').not('.'+settings.customClass).not(':radio, :checkbox, [type=hidden]').bind({'focus.placeholder':clearPlaceholder,'blur.placeholder':setPlaceholder}).data('placeholder-enabled',true).trigger('blur.placeholder');};placeholder.input=isInputSupported;placeholder.textarea=isTextareaSupported;hooks={'get':function(element){var $element=$(element);var $passwordInput=$element.data('placeholder-password');if($passwordInput){return $passwordInput[0].value;}
return $element.data('placeholder-enabled')&&$element.hasClass(settings.customClass)?'':element.value;},'set':function(element,value){var $element=$(element);var $replacement;var $passwordInput;if(value!==''){$replacement=$element.data('placeholder-textinput');$passwordInput=$element.data('placeholder-password');if($replacement){clearPlaceholder.call($replacement[0],true,value)||(element.value=value);$replacement[0].value=value;}else if($passwordInput){clearPlaceholder.call(element,true,value)||($passwordInput[0].value=value);element.value=value;}}
if(!$element.data('placeholder-enabled')){element.value=value;return $element;}
if(value===''){element.value=value;if(element!=safeActiveElement()){setPlaceholder.call(element);}}else{if($element.hasClass(settings.customClass)){clearPlaceholder.call(element);}
element.value=value;}
return $element;}};if(!isInputSupported){valHooks.input=hooks;propHooks.value=hooks;}
if(!isTextareaSupported){valHooks.textarea=hooks;propHooks.value=hooks;}
$(function(){$(document).delegate('form','submit.placeholder',function(){var $inputs=$('.'+settings.customClass,this).each(function(){clearPlaceholder.call(this,true,'');});setTimeout(function(){$inputs.each(setPlaceholder);},10);});});$(window).bind('beforeunload.placeholder',function(){return;var clearPlaceholders=true;try{var activeEle=document.activeElement.toString();if(activeEle==='javascript:void(0)'||activeEle==="javascript:void(0);"||activeEle==="javascript:;"){clearPlaceholders=false;}}catch(exception){}
if(clearPlaceholders){$('.'+settings.customClass).each(function(){this.value='';});}});}
function args(elem){var newAttrs={};var rinlinejQuery=/^jQuery\d+$/;$.each(elem.attributes,function(i,attr){if(attr.specified&&!rinlinejQuery.test(attr.name)){newAttrs[attr.name]=attr.value;}});return newAttrs;}
function clearPlaceholder(event,value){var input=this;var $input=$(this);if(input.value===$input.attr((debugMode?'placeholder-x':'placeholder'))&&$input.hasClass(settings.customClass)){input.value='';$input.removeClass(settings.customClass);if($input.data('placeholder-password')){$input=$input.hide().nextAll('input[type="password"]:first').show().attr('id',$input.removeAttr('id').data('placeholder-id'));if(event===true){$input[0].value=value;return value;}
$input.focus();}else{input==safeActiveElement()&&input.select();}}}
function setPlaceholder(event){var $replacement;var input=this;var $input=$(this);var id=input.id;if(event&&event.type==='blur'&&$input.hasClass(settings.customClass)){return;}
if(input.value===''){if(input.type==='password'){if(!$input.data('placeholder-textinput')){try{$replacement=$input.clone().prop({'type':'text'});}catch(e){$replacement=$('<input>').attr($.extend(args(this),{'type':'text'}));}
$replacement.removeAttr('name').data({'placeholder-enabled':true,'placeholder-password':$input,'placeholder-id':id}).bind('focus.placeholder',clearPlaceholder);$input.data({'placeholder-textinput':$replacement,'placeholder-id':id}).before($replacement);}
input.value='';$input=$input.removeAttr('id').hide().prevAll('input[type="text"]:first').attr('id',$input.data('placeholder-id')).show();}else{var $passwordInput=$input.data('placeholder-password');if($passwordInput){$passwordInput[0].value='';$input.attr('id',$input.data('placeholder-id')).show().nextAll('input[type="password"]:last').hide().removeAttr('id');}}
$input.addClass(settings.customClass);$input[0].value=$input.attr((debugMode?'placeholder-x':'placeholder'));}else{$input.removeClass(settings.customClass);}}
function safeActiveElement(){try{return document.activeElement;}catch(exception){}}}));;!function(){"use strict";var f,b={open:"{{",close:"}}"},c={exp:function(a){return new RegExp(a,"g")},query:function(a,c,e){var f=["#([\\s\\S])+?","([^{#}])*?"][a||0];return d((c||"")+b.open+f+b.close+(e||""))},escape:function(a){return String(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(a,b){var c="Laytpl Error：";return"object"==typeof console&&console.error(c+a+"\n"+(b||"")),c+a}},d=c.exp,e=function(a){this.tpl=a};e.pt=e.prototype,e.pt.parse=function(a,e){var f=this,g=a,h=d("^"+b.open+"#",""),i=d(b.close+"$","");a=a.replace(/[\r\t\n]/g," ").replace(d(b.open+"#"),b.open+"# ").replace(d(b.close+"}"),"} "+b.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(c.query(),function(a){return a=a.replace(h,"").replace(i,""),'";'+a.replace(/\\/g,"")+'; view+="'}).replace(c.query(1),function(a){var c='"+(';return a.replace(/\s/g,"")===b.open+b.close?"":(a=a.replace(d(b.open+"|"+b.close),""),/^=/.test(a)&&(a=a.replace(/^=/,""),c='"+_escape_('),c+a.replace(/\\/g,"")+')+"')}),a='"use strict";var view = "'+a+'";return view;';try{return f.cache=a=new Function("d, _escape_",a),a(e,c.escape)}catch(j){return delete f.cache,c.error(j,g)}},e.pt.render=function(a,b){var e,d=this;return a?(e=d.cache?d.cache(a,c.escape):d.parse(d.tpl,a),b?(b(e),void 0):e):c.error("no data")},f=function(a){return"string"!=typeof a?c.error("Template not found"):new e(a)},f.config=function(a){a=a||{};for(var c in a)b[c]=a[c]},f.v="1.1","function"==typeof define?define(function(){return f}):"undefined"!=typeof exports?module.exports=f:window.laytpl=f}();(function($){"use strict";var methods={validateStrBytes:function(varStr){var count=0;for(var i=0;i<varStr.length;i++){if(varStr.charCodeAt(i)>127||varStr.charCodeAt(i)==94){count=count+2;}
else{count=count+1}}
return count;},init:function(options){var form=this;if(!form.data('jqv')||form.data('jqv')==null){options=methods._saveOptions(form,options);$(document).on("click",".formError",function(){$(this).fadeOut(150,function(){$(this).parent('.formErrorOuter').remove();$(this).remove();});});}
return this;},attach:function(userOptions){var form=this;var options;if(userOptions)
options=methods._saveOptions(form,userOptions);else
options=form.data('jqv');options.validateAttribute=(form.find("[data-validation-engine*=validate]").length)?"data-validation-engine":"class";if(options.binded){form.on(options.validationEventTrigger,"["+options.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",methods._onFieldEvent);form.on("click","["+options.validateAttribute+"*=validate][type=checkbox],["+options.validateAttribute+"*=validate][type=radio]",methods._onFieldEvent);form.on(options.validationEventTrigger,"["+options.validateAttribute+"*=validate][class*=datepicker]",{"delay":300},methods._onFieldEvent);}
if(options.autoPositionUpdate){$(window).bind("resize",{"noAnimation":true,"formElem":form},methods.updatePromptsPosition);}
form.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",methods._submitButtonClick);form.removeData('jqv_submitButton');form.on("submit",methods._onSubmitEvent);return this;},detach:function(){var form=this;var options=form.data('jqv');form.find("["+options.validateAttribute+"*=validate]").not("[type=checkbox]").off(options.validationEventTrigger,methods._onFieldEvent);form.find("["+options.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",methods._onFieldEvent);form.off("submit",methods._onSubmitEvent);form.removeData('jqv');form.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",methods._submitButtonClick);form.removeData('jqv_submitButton');if(options.autoPositionUpdate)
$(window).off("resize",methods.updatePromptsPosition);return this;},validate:function(userOptions){var element=$(this);var valid=null;var options;if(element.is("form")||element.hasClass("validationEngineContainer")){if(element.hasClass('validating')){return false;}else{element.addClass('validating');if(userOptions){options=methods._saveOptions(element,userOptions);}else{options=element.data('jqv');}
valid=methods._validateFields(this);setTimeout(function(){element.removeClass('validating');},100);if(valid&&options.onSuccess){options.onSuccess();}else if(!valid&&options.onFailure){options.onFailure();}}}else if(element.is('form')||element.hasClass('validationEngineContainer')){element.removeClass('validating');}else{var form=element.closest('form, .validationEngineContainer'),options=(form.data('jqv'))?form.data('jqv'):$.validationEngine.defaults,valid=methods._validateField(element,options);if(valid&&options.onFieldSuccess)
options.onFieldSuccess();else if(options.onFieldFailure&&options.InvalidFields.length>0){options.onFieldFailure();}}
if(options.onValidationComplete){return!!options.onValidationComplete(form,valid);}
return valid;},updatePromptsPosition:function(event){if(event&&this==window){var form=event.data.formElem;var noAnimation=event.data.noAnimation;}
else
var form=$(this.closest('form, .validationEngineContainer'));var options=form.data('jqv');form.find('['+options.validateAttribute+'*=validate]').not(":disabled").each(function(){var field=$(this);if(options.prettySelect&&field.is(":hidden"))
field=form.find("#"+options.usePrefix+field.attr('id')+options.useSuffix);var prompt=methods._getPrompt(field);var promptText=$(prompt).find(".formErrorContent").html();if(prompt)
methods._updatePrompt(field,$(prompt),promptText,undefined,false,options,noAnimation);});return this;},showPrompt:function(promptText,type,promptPosition,showArrow){var form=this.closest('form, .validationEngineContainer');var options=form.data('jqv');if(!options)
options=methods._saveOptions(this,options);if(promptPosition)
options.promptPosition=promptPosition;options.showArrow=showArrow==true;methods._showPrompt(this,promptText,type,false,options);return this;},hide:function(){var form=$(this).closest('form, .validationEngineContainer');var options=form.data('jqv');var fadeDuration=(options&&options.fadeDuration)?options.fadeDuration:0.3;var closingtag;if($(this).is("form")||$(this).hasClass("validationEngineContainer")){closingtag="parentForm"+methods._getClassName($(this).attr("id"));}else{closingtag=methods._getClassName($(this).attr("id"))+"formError";}
$('.'+closingtag).fadeTo(fadeDuration,0.3,function(){$(this).parent('.formErrorOuter').remove();$(this).remove();});return this;},hideAll:function(){var form=this;var options=form.data('jqv');var duration=options?options.fadeDuration:300;$('.formError').fadeTo(duration,300,function(){$(this).parent('.formErrorOuter').remove();$(this).remove();});return this;},_onFieldEvent:function(event){var field=$(this);var form=field.closest('form, .validationEngineContainer');var options=form.data('jqv');options.eventTrigger="field";window.setTimeout(function(){methods._validateField(field,options);if(options.InvalidFields.length==0&&options.onFieldSuccess){options.onFieldSuccess();}else if(options.InvalidFields.length>0&&options.onFieldFailure){options.onFieldFailure();}},(event.data)?event.data.delay:0);},_onSubmitEvent:function(){var form=$(this);var options=form.data('jqv');if(form.data("jqv_submitButton")){var submitButton=$("#"+form.data("jqv_submitButton"));if(submitButton){if(submitButton.length>0){if(submitButton.hasClass("validate-skip")||submitButton.attr("data-validation-engine-skip")=="true")
return true;}}}
options.eventTrigger="submit";var r=methods._validateFields(form);if(r&&options.ajaxFormValidation){methods._validateFormWithAjax(form,options);return false;}
if(options.onValidationComplete){return!!options.onValidationComplete(form,r);}
return r;},_checkAjaxStatus:function(options){var status=true;$.each(options.ajaxValidCache,function(key,value){if(!value){status=false;return false;}});return status;},_checkAjaxFieldStatus:function(fieldid,options){return options.ajaxValidCache[fieldid]==true;},_validateFields:function(form){var options=form.data('jqv');var errorFound=false;form.trigger("jqv.form.validating");var first_err=null;form.find('['+options.validateAttribute+'*=validate]').not(":disabled").not("label").each(function(){var field=$(this);var names=[];if($.inArray(field.attr('name'),names)<0){errorFound|=methods._validateField(field,options);if(errorFound&&first_err==null)
if(field.is(":hidden")&&options.prettySelect)
first_err=field=form.find("#"+options.usePrefix+methods._jqSelector(field.attr('id'))+options.useSuffix);else{if(field.data('jqv-prompt-at')instanceof jQuery){field=field.data('jqv-prompt-at');}else if(field.data('jqv-prompt-at')){field=$(field.data('jqv-prompt-at'));}
first_err=field;}
if(options.doNotShowAllErrosOnSubmit)
return false;names.push(field.attr('name'));if(options.showOneMessage==true&&errorFound){return false;}}});form.trigger("jqv.form.result",[errorFound]);if(errorFound){if(options.scroll){var destination=first_err.offset().top;var fixleft=first_err.offset().left;var positionType=options.promptPosition;if(typeof(positionType)=='string'&&positionType.indexOf(":")!=-1)
positionType=positionType.substring(0,positionType.indexOf(":"));if(positionType!="bottomRight"&&positionType!="bottomLeft"){var prompt_err=methods._getPrompt(first_err);if(prompt_err){destination=prompt_err.offset().top;}}
if(options.scrollOffset){destination-=options.scrollOffset;}
if(options.isOverflown){var overflowDIV=$(options.overflownDIV);if(!overflowDIV.length)return false;var scrollContainerScroll=overflowDIV.scrollTop();var scrollContainerPos=-parseInt(overflowDIV.offset().top);destination+=scrollContainerScroll+scrollContainerPos-5;var scrollContainer=$(options.overflownDIV+":not(:animated)");scrollContainer.animate({scrollTop:destination},1100,function(){if(options.focusFirstField)first_err.focus();});}else{$("html, body").animate({scrollTop:destination},1100,function(){if(options.focusFirstField)first_err.focus();});$("html, body").animate({scrollLeft:fixleft},1100)}}else if(options.focusFirstField)
first_err.focus();return false;}
return true;},_validateFormWithAjax:function(form,options){var data=form.serialize();var type=(options.ajaxFormValidationMethod)?options.ajaxFormValidationMethod:"GET";var url=(options.ajaxFormValidationURL)?options.ajaxFormValidationURL:form.attr("action");var dataType=(options.dataType)?options.dataType:"json";$.ajax({type:type,url:url,cache:false,dataType:dataType,data:data,form:form,methods:methods,options:options,beforeSend:function(){return options.onBeforeAjaxFormValidation(form,options);},error:function(data,transport){methods._ajaxError(data,transport);},success:function(json){if((dataType=="json")&&(json!==true)){var errorInForm=false;for(var i=0;i<json.length;i++){var value=json[i];var errorFieldId=value[0];var errorField=$($("#"+errorFieldId)[0]);if(errorField.length==1){var msg=value[2];if(value[1]==true){if(msg==""||!msg){methods._closePrompt(errorField);}else{if(options.allrules[msg]){var txt=options.allrules[msg].alertTextOk;if(txt)
msg=txt;}
if(options.showPrompts)methods._showPrompt(errorField,msg,"pass",false,options,true);}}else{errorInForm|=true;if(options.allrules[msg]){var txt=options.allrules[msg].alertText;if(txt)
msg=txt;}
if(options.showPrompts)methods._showPrompt(errorField,msg,"",false,options,true);}}}
options.onAjaxFormComplete(!errorInForm,form,json,options);}else
options.onAjaxFormComplete(true,form,json,options);}});},_validateField:function(field,options,skipAjaxValidation){if(!field.attr("id")){field.attr("id","form-validation-field-"+$.validationEngine.fieldIdCounter);++$.validationEngine.fieldIdCounter;}
if(!options.validateNonVisibleFields&&(field.is(":hidden")&&!options.prettySelect||field.parent().is(":hidden")))
return false;var rulesParsing=field.attr(options.validateAttribute);var getRules=/validate\[(.*)\]/.exec(rulesParsing);if(!getRules)
return false;var str=getRules[1];var rules=str.split(/\[|,|\]/);var isAjaxValidator=false;var fieldName=field.attr("name");var promptText="";var promptType="";var required=false;var limitErrors=false;options.isError=false;options.showArrow=true;if(options.maxErrorsPerField>0){limitErrors=true;}
var form=$(field.closest("form, .validationEngineContainer"));for(var i=0;i<rules.length;i++){rules[i]=rules[i].replace(" ","");if(rules[i]===''){delete rules[i];}}
for(var i=0,field_errors=0;i<rules.length;i++){if(limitErrors&&field_errors>=options.maxErrorsPerField){if(!required){var have_required=$.inArray('required',rules);required=(have_required!=-1&&have_required>=i);}
break;}
var errorMsg=undefined;switch(rules[i]){case"required":required=true;errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._required);break;case"custom":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._custom);break;case"groupRequired":var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";var firstOfGroup=form.find(classGroup).eq(0);if(firstOfGroup[0]!=field[0]){methods._validateField(firstOfGroup,options,skipAjaxValidation);options.showArrow=true;}
errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._groupRequired);if(errorMsg){var groupRequiredMsg=$.trim(field.attr("groupRequiredMsg"));if(groupRequiredMsg!=""){errorMsg=groupRequiredMsg;}
required=true;}
options.showArrow=false;break;case"ajax":errorMsg=methods._ajax(field,rules,i,options);if(errorMsg){promptType="load";}
break;case"minSize":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._minSize);break;case"maxSize":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._maxSize);break;case"min":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._min);break;case"max":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._max);break;case"compareNumber":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._compareNumber);break;case"compareTime":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._compareTime);break;case"dotmax":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._dotmax);break;case"dotformat":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._dotformat);break;case"past":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._past);break;case"future":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._future);break;case"dateRange":var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";options.firstOfGroup=form.find(classGroup).eq(0);options.secondOfGroup=form.find(classGroup).eq(1);if(options.firstOfGroup[0].value||options.secondOfGroup[0].value){errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._dateRange);}
if(errorMsg)required=true;options.showArrow=false;break;case"dateTimeRange":var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";options.firstOfGroup=form.find(classGroup).eq(0);options.secondOfGroup=form.find(classGroup).eq(1);if(options.firstOfGroup[0].value||options.secondOfGroup[0].value){errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._dateTimeRange);}
if(errorMsg)required=true;options.showArrow=false;break;case"maxCheckbox":field=$(form.find("input[name='"+fieldName+"']"));errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._maxCheckbox);break;case"minCheckbox":field=$(form.find("input[name='"+fieldName+"']"));errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._minCheckbox);break;case"minCheckbox4b2g":field=$(form.find("input[name='"+fieldName+"']"));errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._minCheckbox4b2g);break;case"equals":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._equals);break;case"funcCall":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._funcCall);break;case"creditCard":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._creditCard);break;case"condRequired":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._condRequired);if(errorMsg!==undefined){required=true;}
break;default:}
var end_validation=false;if(typeof errorMsg=="object"){switch(errorMsg.status){case"_break":end_validation=true;break;case"_error":errorMsg=errorMsg.message;break;case"_error_no_prompt":return true;break;default:break;}}
if(end_validation){break;}
if(typeof errorMsg=='string'){promptText+=errorMsg+"  ";options.isError=true;field_errors++;}}
if(!required&&!(field.val())&&field.val().length<1)options.isError=false;var fieldType=field.prop("type");var positionType=field.data("promptPosition")||options.promptPosition;if((fieldType=="radio"||fieldType=="checkbox")&&form.find("input[name='"+fieldName+"']").size()>1){if(positionType==='inline'){field=$(form.find("input[name='"+fieldName+"'][type!=hidden]:last"));}else{field=$(form.find("input[name='"+fieldName+"'][type!=hidden]:first"));}
options.showArrow=false;}
if(field.is(":hidden")&&options.prettySelect){field=form.find("#"+options.usePrefix+methods._jqSelector(field.attr('id'))+options.useSuffix);}
if(options.isError&&options.showPrompts){methods._showPrompt(field,promptText,promptType,false,options);}else{if(!isAjaxValidator)methods._closePrompt(field);}
if(!isAjaxValidator){field.trigger("jqv.field.result",[field,options.isError,promptText]);}
var errindex=$.inArray(field[0],options.InvalidFields);if(errindex==-1){if(options.isError)
options.InvalidFields.push(field[0]);}else if(!options.isError){options.InvalidFields.splice(errindex,1);}
methods._handleStatusCssClasses(field,options);if(options.isError&&options.onFieldFailure)
options.onFieldFailure(field);if(!options.isError&&options.onFieldSuccess)
options.onFieldSuccess(field);return options.isError;},_handleStatusCssClasses:function(field,options){if(options.addSuccessCssClassToField)
field.removeClass(options.addSuccessCssClassToField);if(options.addFailureCssClassToField)
field.removeClass(options.addFailureCssClassToField);if(options.addSuccessCssClassToField&&!options.isError)
field.addClass(options.addSuccessCssClassToField);if(options.addFailureCssClassToField&&options.isError)
field.addClass(options.addFailureCssClassToField);},_getErrorMessage:function(form,field,rule,rules,i,options,originalValidationMethod){var rule_index=jQuery.inArray(rule,rules);if(rule==="custom"||rule==="funcCall"){var custom_validation_type=rules[rule_index+1];rule=rule+"["+custom_validation_type+"]";delete(rules[rule_index]);}
var alteredRule=rule;var element_classes=(field.attr("data-validation-engine"))?field.attr("data-validation-engine"):field.attr("class");var element_classes_array=element_classes.split(" ");var errorMsg;if(rule=="future"||rule=="past"||rule=="maxCheckbox"||rule=="minCheckbox"||rule=="minCheckbox4b2g"||rule=="compareNumber"||rule=="compareTime"){errorMsg=originalValidationMethod(form,field,rules,i,options);}else{errorMsg=originalValidationMethod(field,rules,i,options);}
if(errorMsg!=undefined){var custom_message=methods._getCustomErrorMessage($(field),element_classes_array,alteredRule,options);if(custom_message)errorMsg=custom_message;}
return errorMsg;},_getCustomErrorMessage:function(field,classes,rule,options){var custom_message=false;var validityProp=/^custom\[.*\]$/.test(rule)?methods._validityProp["custom"]:methods._validityProp[rule];if(validityProp!=undefined){custom_message=field.attr("data-errormessage-"+validityProp);if(custom_message!=undefined)
return custom_message;}
custom_message=field.attr("data-errormessage");if(custom_message!=undefined)
return custom_message;var id='#'+field.attr("id");if(typeof options.custom_error_messages[id]!="undefined"&&typeof options.custom_error_messages[id][rule]!="undefined"){custom_message=options.custom_error_messages[id][rule]['message'];}else if(classes.length>0){for(var i=0;i<classes.length&&classes.length>0;i++){var element_class="."+classes[i];if(typeof options.custom_error_messages[element_class]!="undefined"&&typeof options.custom_error_messages[element_class][rule]!="undefined"){custom_message=options.custom_error_messages[element_class][rule]['message'];break;}}}
if(!custom_message&&typeof options.custom_error_messages[rule]!="undefined"&&typeof options.custom_error_messages[rule]['message']!="undefined"){custom_message=options.custom_error_messages[rule]['message'];}
return custom_message;},_validityProp:{"required":"value-missing","custom":"custom-error","groupRequired":"value-missing","ajax":"custom-error","minSize":"range-underflow","maxSize":"range-overflow","min":"range-underflow","max":"range-overflow","past":"type-mismatch","future":"type-mismatch","dateRange":"type-mismatch","dateTimeRange":"type-mismatch","maxCheckbox":"range-overflow","minCheckbox":"range-underflow","minCheckbox4b2g":"range-underflow","equals":"pattern-mismatch","funcCall":"custom-error","creditCard":"pattern-mismatch","condRequired":"value-missing"},_required:function(field,rules,i,options,condRequired){switch(field.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var field_val=$.trim(field.val());var dv_placeholder=$.trim(field.attr("data-validation-placeholder"));var placeholder=$.trim(field.attr("placeholder"));if((!field_val)||(dv_placeholder&&field_val==dv_placeholder)||(placeholder&&field_val==placeholder)){return options.allrules[rules[i]].alertText;}
break;case"radio":case"checkbox":if(condRequired){if(!field.attr('checked')){return options.allrules[rules[i]].alertTextCheckboxMultiple;}
break;}
var form=field.closest("form, .validationEngineContainer");var name=field.attr("name");if(form.find("input[name='"+name+"']:checked").size()==0){if(form.find("input[name='"+name+"']:visible").size()==1)
return options.allrules[rules[i]].alertTextCheckboxe;else
return options.allrules[rules[i]].alertTextCheckboxMultiple;}
break;}},_groupRequired:function(field,rules,i,options){var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";var isValid=false;field.closest("form, .validationEngineContainer").find(classGroup).each(function(){if(!methods._required($(this),rules,i,options)){isValid=true;return false;}});if(!isValid){return options.allrules[rules[i]].alertText;}},_custom:function(field,rules,i,options){var customRule=rules[i+1];var rule=options.allrules[customRule];var fn;if(!rule){alert("jqv:custom rule not found - "+customRule);return;}
if(rule["regex"]){var ex=rule.regex;if(!ex){alert("jqv:custom regex not found - "+customRule);return;}
var pattern=new RegExp(ex);if(!pattern.test(field.val()))return options.allrules[customRule].alertText;}else if(rule["func"]){fn=rule["func"];if(typeof(fn)!=="function"){alert("jqv:custom parameter 'function' is no function - "+customRule);return;}
if(!fn(field,rules,i,options))
return options.allrules[customRule].alertText;}else{alert("jqv:custom type not allowed "+customRule);return;}},_funcCall:function(field,rules,i,options){var functionName=rules[i+1];var fn;if(functionName.indexOf('.')>-1)
{var namespaces=functionName.split('.');var scope=window;while(namespaces.length)
{scope=scope[namespaces.shift()];}
fn=scope;}
else
fn=window[functionName]||options.customFunctions[functionName];if(typeof(fn)=='function')
return fn(field,rules,i,options);},_equals:function(field,rules,i,options){var equalsField=rules[i+1];if(field.val()!=$("#"+equalsField).val())
return options.allrules.equals.alertText;},_maxSize:function(field,rules,i,options){var max=rules[i+1];var len=methods.validateStrBytes(field.val());if(len>max){var rule=options.allrules.maxSize;return rule.alertText+max+rule.alertText2;}},_minSize:function(field,rules,i,options){var min=rules[i+1];var len=field.val().length;if(len<min){var rule=options.allrules.minSize;return rule.alertText+min+rule.alertText2;}},_min:function(field,rules,i,options){var min=parseFloat(rules[i+1]);var len=parseFloat(field.val());if(len<min){var rule=options.allrules.min;if(rule.alertText2)return rule.alertText+min+rule.alertText2;return rule.alertText+min;}},_max:function(field,rules,i,options){var max=parseFloat(rules[i+1]);var len=parseFloat(field.val());if(len>max){var rule=options.allrules.max;if(rule.alertText2)return rule.alertText+max+rule.alertText2;return rule.alertText+max;}},_dotmax:function(field,rules,i,options){var max=rules[i+1];var len=field.val().length;var v=field.val();var dotindex=v.indexOf(".");if(dotindex>-1){v=v.substring(dotindex+1);if((v.length-max)>0){return options.allrules.dotmax.alertText+max+"位";}}},_dotformat:function(field,rules,i,options){var format=rules[i+1];var v=field.val();var dotindex=v.indexOf(".");var forindex=format.indexOf(".");if(forindex>-1){var befCount=format.substring(0,forindex).length;var aftCount=format.substring(forindex+1).length;if(befCount==0)befCount=12;var txt=options.allrules.dotformat.alertText+format;if(dotindex>-1){var bef=v.substring(0,dotindex);if((bef.length-befCount)>0){txt+="[小数点前不超过"+befCount+"位]";return txt;}
var aft=v.substring(dotindex+1);if((aft.length-aftCount)>0){txt+="[小数点后不超过"+aftCount+"位]";return txt;}}else{if((v.length-befCount)>0){txt+="[小数点前不超过"+befCount+"位]";return txt;}}}},_compareNumber:function(form,field,rules,i,options){var p=rules[i+1];var fieldAlt=$("#"+p.replace(/^#+/,''));var pVal=0;if(undefined!=fieldAlt.val()){if(fieldAlt.is(":disabled"))
return;pVal=parseFloat(fieldAlt.val());}
var vVal=parseFloat(field.val());if(vVal<pVal)
return options.allrules.compareNumber.alertText;},_getSeconds:function(value){value=$.trim(value);if(value=="")
value="0";var seconds=0;var pArr=value.split(":");if(pArr.length==2){seconds=parseInt(pArr[0],10)*3600+parseInt(pArr[1],10)*60;}else if(pArr.length==3){seconds=parseInt(pArr[0],10)*3600+parseInt(pArr[1],10)*60+parseInt(pArr[2],10);}
return seconds;},_compareTime:function(form,field,rules,i,options){var p=rules[i+1];var fieldAlt=$(form.find("input[id='"+p.replace(/^#+/,'')+"']"));var pVal=0;if(undefined!=fieldAlt.val()){if(fieldAlt.is(":disabled"))
return;pVal=$.trim(fieldAlt.val());}
var seconds=methods._getSeconds(pVal);var vVal=$.trim(field.val());var seconds2=methods._getSeconds(vVal);if(vVal!=null&&seconds2==0){return options.allrules.timeFormat.alertText;}
if(parseInt(seconds2,10)<parseInt(seconds,10))
return options.allrules.compareTime.alertText;},_past:function(form,field,rules,i,options){var p=rules[i+1];var fieldAlt=$(form.find("input[name='"+p.replace(/^#+/,'')+"']"));var pdate;if(p.toLowerCase()=="now"){pdate=new Date();}else if(undefined!=fieldAlt.val()){if(fieldAlt.is(":disabled"))
return;pdate=methods._parseDate(fieldAlt.val());}else{pdate=methods._parseDate(p);}
var vdate=methods._parseDate(field.val());if(vdate>pdate){var rule=options.allrules.past;if(rule.alertText2)return rule.alertText+methods._dateToString(pdate)+rule.alertText2;return rule.alertText+methods._dateToString(pdate);}},_future:function(form,field,rules,i,options){var p=rules[i+1];var fieldAlt=$(form.find("input[name='"+p.replace(/^#+/,'')+"']"));var pdate;if(p.toLowerCase()=="now"){pdate=new Date();}else if(undefined!=fieldAlt.val()){if(fieldAlt.is(":disabled"))
return;pdate=methods._parseDate(fieldAlt.val());}else{pdate=methods._parseDate(p);}
var vdate=methods._parseDate(field.val());if(vdate<pdate){var rule=options.allrules.future;if(rule.alertText2)
return rule.alertText+methods._dateToString(pdate)+rule.alertText2;return rule.alertText+methods._dateToString(pdate);}},_isDate:function(value){var dateRegEx=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return dateRegEx.test(value);},_isDateTime:function(value){var dateTimeRegEx=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return dateTimeRegEx.test(value);},_dateCompare:function(start,end){return(new Date(start.toString())<new Date(end.toString()));},_dateRange:function(field,rules,i,options){if((!options.firstOfGroup[0].value&&options.secondOfGroup[0].value)||(options.firstOfGroup[0].value&&!options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}
if(!methods._isDate(options.firstOfGroup[0].value)||!methods._isDate(options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}
if(!methods._dateCompare(options.firstOfGroup[0].value,options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}},_dateTimeRange:function(field,rules,i,options){if((!options.firstOfGroup[0].value&&options.secondOfGroup[0].value)||(options.firstOfGroup[0].value&&!options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}
if(!methods._isDateTime(options.firstOfGroup[0].value)||!methods._isDateTime(options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}
if(!methods._dateCompare(options.firstOfGroup[0].value,options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}},_maxCheckbox:function(form,field,rules,i,options){var nbCheck=rules[i+1];var groupname=field.attr("name");var groupSize=form.find("input[name='"+groupname+"']:checked").size();if(groupSize>nbCheck){options.showArrow=false;if(options.allrules.maxCheckbox.alertText2)
return options.allrules.maxCheckbox.alertText+" "+nbCheck+" "+options.allrules.maxCheckbox.alertText2;return options.allrules.maxCheckbox.alertText;}},_minCheckbox:function(form,field,rules,i,options){var nbCheck=rules[i+1];var groupname=field.attr("name");var groupSize=form.find("input[name='"+groupname+"']:checked").size();if(groupSize<nbCheck){options.showArrow=false;return options.allrules.minCheckbox.alertText+" "+nbCheck+" "+options.allrules.minCheckbox.alertText2;}},_minCheckbox4b2g:function(form,field,rules,i,options){var nbCheck=rules[i+1];var groupname=field.attr("name");var groupSize=form.find("input[name='"+groupname+"']:checked").size();if(groupSize<nbCheck){options.showArrow=false;return options.allrules.minCheckbox4b2g.alertText+" "+nbCheck+" "+options.allrules.minCheckbox4b2g.alertText2;}},_creditCard:function(field,rules,i,options){var valid=false,cardNumber=field.val().replace(/ +/g,'').replace(/-+/g,'');var numDigits=cardNumber.length;if(numDigits>=14&&numDigits<=16&&parseInt(cardNumber)>0){var sum=0,i=numDigits-1,pos=1,digit,luhn=new String();do{digit=parseInt(cardNumber.charAt(i));luhn+=(pos++%2==0)?digit*2:digit;}while(--i>=0)
for(i=0;i<luhn.length;i++){sum+=parseInt(luhn.charAt(i));}
valid=sum%10==0;}
if(!valid)return options.allrules.creditCard.alertText;},_ajax:function(field,rules,i,options){var errorSelector=rules[i+1];var rule=options.allrules[errorSelector];var extraData=rule.extraData;var extraDataDynamic=rule.extraDataDynamic;var sname=field.attr("name");var sid=field.attr("id");var svalue=field.val();var cacheId=sid+"_"+svalue;var data=new Object();data[sname]=svalue;if(typeof extraData==="object"){$.extend(data,extraData);}else if(typeof extraData==="string"){var tempData=extraData.split("&");for(var i=0;i<tempData.length;i++){var values=tempData[i].split("=");if(values[0]&&values[0]){data[values[0]]=values[1];}}}
if(extraDataDynamic){var tmpData=[];var domIds=String(extraDataDynamic).split(",");for(var i=0;i<domIds.length;i++){var id=domIds[i];if($(id).length){var inputValue=field.closest("form, .validationEngineContainer").find(id).val();var keyValue=id.replace('#','')+'='+escape(inputValue);data[$(id).attr("name")]=inputValue;}}}
if(options.eventTrigger=="field"){delete(options.ajaxValidCache[cacheId]);}
if(!options.isError&&!methods._checkAjaxFieldStatus(cacheId,options)){$.ajax({type:options.ajaxFormValidationMethod,url:rule.url,cache:false,dataType:"json",data:data,field:field,async:false,rule:rule,methods:methods,options:options,beforeSend:function(){},error:function(data,transport){methods._ajaxError(data,transport);},success:function(json){var errorFieldId=field.attr("id");var errorField=$("#"+errorFieldId).eq(0);if(errorField.length==1){var status=json[1];var msg=json[2];if(!status){options.ajaxValidCache[cacheId]=false;options.isError=true;if(msg){if(options.allrules[msg]){var txt=options.allrules[msg].alertText;if(txt){msg=txt;}}}
else
msg=rule.alertText;if(options.showPrompts)methods._showPrompt(errorField,msg,"",true,options);}else{options.ajaxValidCache[cacheId]=true;if(msg){if(options.allrules[msg]){var txt=options.allrules[msg].alertTextOk;if(txt){msg=txt;}}}
else
msg=rule.alertTextOk;if(options.showPrompts){if(msg)
methods._showPrompt(errorField,msg,"pass",true,options);else
methods._closePrompt(errorField);}
if(options.eventTrigger=="submit")
field.closest("form").submit();}}
errorField.trigger("jqv.field.result",[errorField,options.isError,msg]);}});return rule.alertTextLoad;}},_ajaxError:function(data,transport){if(data.status==0&&transport==null)
alert("The page is not served from a server! ajax call failed");else if(typeof console!="undefined")
console.log("Ajax error: "+data.status+" "+transport);},_dateToString:function(date){return date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate();},_parseDate:function(d){var dateParts=d.split("-");if(dateParts==d)
dateParts=d.split("/");if(dateParts==d){dateParts=d.split(".");return new Date(dateParts[2],(dateParts[1]-1),dateParts[0]);}
return new Date(dateParts[0],(dateParts[1]-1),dateParts[2]);},_showPrompt:function(field,promptText,type,ajaxed,options,ajaxform){if(field.data('jqv-prompt-at')instanceof jQuery){field=field.data('jqv-prompt-at');}else if(field.data('jqv-prompt-at')){field=$(field.data('jqv-prompt-at'));}
var prompt=methods._getPrompt(field);if(ajaxform)prompt=false;if($.trim(promptText)){if(prompt)
methods._updatePrompt(field,prompt,promptText,type,ajaxed,options);else
methods._buildPrompt(field,promptText,type,ajaxed,options);}},_buildPrompt:function(field,promptText,type,ajaxed,options){var prompt=$('<div>');prompt.addClass(methods._getClassName(field.attr("id"))+"formError");prompt.addClass("parentForm"+methods._getClassName(field.closest('form, .validationEngineContainer').attr("id")));prompt.addClass("formError");switch(type){case"pass":prompt.addClass("greenPopup");break;case"load":prompt.addClass("blackPopup");break;default:}
if(ajaxed)
prompt.addClass("ajaxed");var promptContent=$('<div>').addClass("formErrorContent").html(promptText).appendTo(prompt);var positionType=field.data("promptPosition")||options.promptPosition;if(options.showArrow){var arrow=$('<div>').addClass("formErrorArrow");if(typeof(positionType)=='string')
{var pos=positionType.indexOf(":");if(pos!=-1)
positionType=positionType.substring(0,pos);}
switch(positionType){case"bottomLeft":case"bottomRight":prompt.find(".formErrorContent").before(arrow);arrow.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":arrow.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');prompt.append(arrow);break;}}
if(options.addPromptClass)
prompt.addClass(options.addPromptClass);var requiredOverride=field.attr('data-required-class');if(requiredOverride!==undefined){prompt.addClass(requiredOverride);}else{if(options.prettySelect){if($('#'+field.attr('id')).next().is('select')){var prettyOverrideClass=$('#'+field.attr('id').substr(options.usePrefix.length).substring(options.useSuffix.length)).attr('data-required-class');if(prettyOverrideClass!==undefined){prompt.addClass(prettyOverrideClass);}}}}
prompt.css({"opacity":0});if(positionType==='inline'){prompt.addClass("inline");if(typeof field.attr('data-prompt-target')!=='undefined'&&$('#'+field.attr('data-prompt-target')).length>0){prompt.appendTo($('#'+field.attr('data-prompt-target')));}else{field.after(prompt);}}else{field.before(prompt);}
var pos=methods._calculatePosition(field,prompt,options);prompt.css({'position':positionType==='inline'?'relative':'absolute',"top":pos.callerTopPosition,"left":pos.callerleftPosition,"marginTop":pos.marginTopSize,"opacity":0}).data("callerField",field);if(options.autoHidePrompt){setTimeout(function(){prompt.animate({"opacity":0},function(){prompt.closest('.formErrorOuter').remove();prompt.remove();});},options.autoHideDelay);}
return prompt.animate({"opacity":1.0});},_updatePrompt:function(field,prompt,promptText,type,ajaxed,options,noAnimation){if(prompt){if(typeof type!=="undefined"){if(type=="pass")
prompt.addClass("greenPopup");else
prompt.removeClass("greenPopup");if(type=="load")
prompt.addClass("blackPopup");else
prompt.removeClass("blackPopup");}
if(ajaxed)
prompt.addClass("ajaxed");else
prompt.removeClass("ajaxed");prompt.find(".formErrorContent").html(promptText);var pos=methods._calculatePosition(field,prompt,options);var css={"top":pos.callerTopPosition,"left":pos.callerleftPosition,"marginTop":pos.marginTopSize};if(noAnimation)
prompt.css(css);else
prompt.animate(css);}},_closePrompt:function(field){var prompt=methods._getPrompt(field);if(prompt)
prompt.fadeTo("fast",0,function(){prompt.parent('.formErrorOuter').remove();prompt.remove();});},closePrompt:function(field){return methods._closePrompt(field);},_getPrompt:function(field){if($.validationEngine.defaults.autoHidePrompt===true)return;var formId=$(field).closest('form, .validationEngineContainer').attr('id');var className=methods._getClassName(field.attr("id"))+"formError";var match=$("."+methods._escapeExpression(className)+'.parentForm'+methods._getClassName(formId))[0];if(match)
return $(match);},_escapeExpression:function(selector){return selector.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1");},isRTL:function(field)
{var $document=$(document);var $body=$('body');var rtl=(field&&field.hasClass('rtl'))||(field&&(field.attr('dir')||'').toLowerCase()==='rtl')||$document.hasClass('rtl')||($document.attr('dir')||'').toLowerCase()==='rtl'||$body.hasClass('rtl')||($body.attr('dir')||'').toLowerCase()==='rtl';return Boolean(rtl);},_calculatePosition:function(field,promptElmt,options){var promptTopPosition,promptleftPosition,marginTopSize;var fieldWidth=field.width();var fieldLeft=field.position().left;var fieldTop=field.position().top;var fieldHeight=field.height();var promptHeight=promptElmt.height();promptTopPosition=promptleftPosition=0;marginTopSize=-promptHeight;var positionType=field.data("promptPosition")||options.promptPosition;var shift1="";var shift2="";var shiftX=0;var shiftY=0;if(typeof(positionType)=='string'){if(positionType.indexOf(":")!=-1){shift1=positionType.substring(positionType.indexOf(":")+1);positionType=positionType.substring(0,positionType.indexOf(":"));if(shift1.indexOf(",")!=-1){shift2=shift1.substring(shift1.indexOf(",")+1);shift1=shift1.substring(0,shift1.indexOf(","));shiftY=parseInt(shift2);if(isNaN(shiftY))shiftY=0;};shiftX=parseInt(shift1);if(isNaN(shift1))shift1=0;};};switch(positionType){default:case"topRight":promptleftPosition+=fieldLeft+fieldWidth-30;promptTopPosition+=fieldTop;break;case"topLeft":promptTopPosition+=fieldTop;promptleftPosition+=fieldLeft;break;case"centerRight":promptTopPosition=fieldTop+4;marginTopSize=0;promptleftPosition=fieldLeft+field.outerWidth(true)+5;break;case"centerLeft":promptleftPosition=fieldLeft-(promptElmt.width()+2);promptTopPosition=fieldTop+4;marginTopSize=0;break;case"bottomLeft":promptTopPosition=fieldTop+field.height()+5;marginTopSize=0;promptleftPosition=fieldLeft;break;case"bottomRight":promptleftPosition=fieldLeft+fieldWidth-30;promptTopPosition=fieldTop+field.height()+5;marginTopSize=0;break;case"inline":promptleftPosition=0;promptTopPosition=0;marginTopSize=0;};promptleftPosition+=shiftX;promptTopPosition+=shiftY;return{"callerTopPosition":promptTopPosition+"px","callerleftPosition":promptleftPosition+"px","marginTopSize":marginTopSize+"px"};},_saveOptions:function(form,options){if($.validationEngineLanguage)
var allRules=$.validationEngineLanguage.allRules;else
$.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");$.validationEngine.defaults.allrules=allRules;var userOptions=$.extend(true,{},$.validationEngine.defaults,options);form.data('jqv',userOptions);return userOptions;},_getClassName:function(className){if(className)
return className.replace(/:/g,"_").replace(/\./g,"_");},_jqSelector:function(str){return str.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1');},_condRequired:function(field,rules,i,options){var idx,dependingField;for(idx=(i+1);idx<rules.length;idx++){dependingField=jQuery("#"+rules[idx]).first();if(dependingField.length&&methods._required(dependingField,["required"],0,options,true)==undefined){return methods._required(field,["required"],0,options);}}},_submitButtonClick:function(event){var button=$(this);var form=button.closest('form, .validationEngineContainer');form.data("jqv_submitButton",button.attr("id"));}};$.fn.validationEngine=function(method){var form=$(this);if(!form[0])return form;if(typeof(method)=='string'&&method.charAt(0)!='_'&&methods[method]){if(method!="showPrompt"&&method!="hide"&&method!="hideAll")
methods.init.apply(form);return methods[method].apply(form,Array.prototype.slice.call(arguments,1));}else if(typeof method=='object'||!method){methods.init.apply(form,arguments);return methods.attach.apply(form);}else{$.error('Method '+method+' does not exist in jQuery.validationEngine');}};$.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"",scroll:true,focusFirstField:true,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:'get',onAjaxFormComplete:$.noop,onBeforeAjaxFormValidation:$.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:true,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:true,autoHideDelay:2000,fadeDuration:0.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:true}};$(function(){$.validationEngine.defaults.promptPosition=methods.isRTL()?'topRight':"topLeft"});})(jQuery);(function($){$.fn.validationEngineLanguage=function(){};$.validationEngineLanguage={newLang:function(){$.validationEngineLanguage.allRules={"required":{"regex":"none","alertText":"此处不为空，请输入值","alertTextCheckboxMultiple":"请选择一个项目","alertTextCheckboxe":"您必须钩选此栏","alertTextDateRange":"日期范围不可为空"},"requiredInFunction":{"func":function(field,rules,i,options){return(field.val()=="test")?true:false;},"alertText":"Field must equal test"},"airportCode":{"func":function(field,rules,i,options){var val=field.val();if($.isBlank(val)){return true;}
if(val=="---"){return true;}
var reg=/\//g;var str=val.replace(reg,"");reg=/\w{3}/g;var a=str.match(reg);if(!a){return false;}
var end=str.substring(a.join('').length);if(end.length>0){return false;}
return true;},"alertText":"请输入正确的机场三字码，必须用/分隔,如:PEK/SZX"},"hkgsCode":{"func":function(field,rules,i,options){var val=field.val();if($.isBlank(val)){return true;}
if(val=="---"){return true;}
var reg=/\//g;var str=val.replace(reg,"");reg=/\w{2}/g;var a=str.match(reg);if(!a){return false;}
var end=str.substring(a.join('').length);if(end.length>0){return false;}
return true;},"alertText":"请输入正确的航空公司二字码，必须用/分隔,如:CA/MU"},"hx":{"func":function(field,rules,i,options){var val=field.val();if($.isBlank(val)){return true;}
var reg=/\//g;var str=val.replace(reg,"");reg=/\w{6}/g;var a=str.match(reg);if(!a){return false;}
var end=str.substring(a.join('').length);if(end.length>0){return false;}
return true;},"alertText":"请输入正确航线，必须用/分隔,如:PEKWUH/SZXPEK"},"dotmax":{"regex":"none","alertText":"小数点后位数不能超过"},"dateRange":{"regex":"none","alertText":"无效的 ","alertText2":" 日期范围"},"dateTimeRange":{"regex":"none","alertText":"无效的 ","alertText2":" 时间范围"},"minSize":{"regex":"none","alertText":"最少","alertText2":"个字符"},"maxSize":{"regex":"none","alertText":"最多 ","alertText2":" 个字符"},"groupRequired":{"regex":"none","alertText":"你必须选填其中一个栏位"},"min":{"regex":"none","alertText":"最小值为 "},"max":{"regex":"none","alertText":"最大值为 "},"past":{"regex":"none","alertText":"日期必须等于 ","alertText2":" 或者在此日期之前"},"future":{"regex":"none","alertText":"日期必须等于 ","alertText2":" 或者在此日期之后"},"maxCheckbox":{"regex":"none","alertText":"最多选取 ","alertText2":" 个项目"},"minCheckbox":{"regex":"none","alertText":"请选择 ","alertText2":" 个项目"},"minCheckbox4b2g":{"regex":"none","alertText":"请选择 ","alertText2":" 个选项"},"equals":{"regex":"none","alertText":"请输入与前面相同的密码"},"creditCard":{"regex":"none","alertText":"无效的信用卡号码"},"phone":{"regex":/^([\+][0-9]{1,3}[ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,"alertText":"无效的电话号码"},"fax":{"regex":/^([\+][0-9]{1,3}[ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,"alertText":"无效的传真号码"},"email":{"regex":/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,"alertText":"邮件地址无效"},"integer":{"regex":/^[\-\+]?\d+$/,"alertText":"只能输入有效的整数"},"qqnumber":{"regex":/^[1-9]\d{4,12}$/,"alertText":"无效的qq号码格式"},"number":{"regex":/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,"alertText":"无效的数字"},"date":{"regex":/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,"alertText":"无效的日期，格式必须为 YYYY-MM-DD"},"ipv4":{"regex":/^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/,"alertText":"无效的 IP 地址"},"mipv4":{"func":function(field,rules,i,options){var ipval=field.val();if(ipval=="")return true;var reg=/^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/;var patt1=new RegExp(reg);var ipvalarr=ipval.split(",");for(var i=0;i<ipvalarr.length;i++){if(!patt1.test(ipvalarr[i])){return false;}}
return true;},"alertText":"无效的 IP 地址,多个请用,分隔"},"url":{"regex":/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,"alertText":"请输入合法的URL"},"url2":{"regex":/^(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,"alertText":"请输入合法的URL"},"onlyNumberSp":{"regex":/^[0-9]+$/,"alertText":"只能输入数字"},"onlyNumberGroup":{"regex":/^\d+([,]\d+)*$/,"alertText":"只能输入数字,多个以逗号分割"},"chinese":{"regex":/^[\u4e00-\u9fa5]+$/,"alertText":"只能输入中文"},"letter":{"regex":/^[a-zA-Z]+$/,"alertText":"只能输入英文字母"},"zip":{"regex":/^[0-9]\d{5}$/,"alertText":"请输入合法的邮政编码"},"onlyLetterSp":{"regex":/^[a-zA-Z\ \']+$/,"alertText":"只能输入英文字母"},"onlyLetterNumber":{"regex":/^[0-9a-zA-Z]+$/,"alertText":"只能输入英文和数字"},"onlyLetterNumberPoint":{"regex":/^[0-9a-zA-Z.]+$/,"alertText":"只能输入英文数字和 . (英文点)"},"onlyLetterNumberUnderline":{"regex":/^[0-9a-zA-Z-]+$/,"alertText":"只能输入英文数字和破折号"},"checkGjCjrxm":{"regex":/^[A-Z|0-9|\(|\)|\s]+\/[A-Z|0-9|\(|\)|\s]+$/,"alertText":"请输入合法的乘机人格式，如：XX/XX"},"checkYhzh":{"regex":/^[\-\+]?\d+$/,"alertText":"银行账号只能是数字"},"ajaxUserCall":{"url":"ajaxValidateFieldUser","extraData":"name=eric","alertText":"此名称已被其他人使用","alertTextLoad":"正在确认名称是否有其他人使用，请稍等。"},"ajaxUserCallPhp":{"url":"phpajax/ajaxValidateFieldUser.php","extraData":"name=eric","alertTextOk":"此帐号名称可以使用","alertText":"此名称已被其他人使用","alertTextLoad":"正在确认帐号名称是否有其他人使用，请稍等。"},"ajaxSpdhValidate":{"url":"/webcomponent/b2g/kjcommb2g/getTravelNum?notitle=1","extraData":"hyid,clkid,sqdh,cplx","extraDataDynamic":['#widget_validate_hyid','#widget_validate_clkid','#widget_spdh','#widget_validate_cplx'],"alertText":"此审批单号验证不合格,请重新输入"},"ajaxNameCall":{"url":"ajaxValidateFieldName","alertText":"此名称可以使用","alertTextOk":"此名称已被其他人使用","alertTextLoad":"正在确认名称是否有其他人使用，请稍等。"},"ajaxNameCallPhp":{"url":"phpajax/ajaxValidateFieldName.php","alertText":"此名称已被其他人使用","alertTextLoad":"正在确认名称是否有其他人使用，请稍等。"},"validate2fields":{"alertText":"请输入 HELLO"},"dateFormat":{"regex":/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/,"alertText":"无效的日期格式"},"dateTimeFormat":{"regex":/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/,"alertText":"无效的日期或时间格式","alertText2":"可接受的格式： ","alertText3":"mm/dd/yyyy hh:mm:ss AM|PM 或 ","alertText4":"yyyy-mm-dd hh:mm:ss AM|PM"},"checkCard":{"func":function(field,rules,i,options){return $.checkCard(field.val());},"alertText":"您输入的身份证号码不正确，请重新输入"},"ajaxShbhCall":{"url":"/airsa/shb!checkZh.shtml","alertText":"该商户编号已使用，请重新输入"},"ajaxCheckHd":{"url":"/airsb/cgsgl!checkHd.shtml","extraData":"bx_dzhd.ksno=,bx_dzhd.jsno=,bx_dzhd.bxxz=,bx_dzhd.dzqz=","extraDataDynamic":['#ksno','#jsno','#bxxz','#dzqz'],"alertText":"该号段已被使用，请重新输入"},"ajaxCheckUserBh":{"url":"/airsa/ve_user!checkBh.shtml","alertText":"该用户编号已使用，请重新输入"},"ajaxCheckYhBhB":{"url":"/airsb/sh_yhb!checkYhbh.shtml","alertText":"该用户编号已使用，请重新输入"},"ajaxCheckVeYhbBh":{"url":"/asms/organization/ve_yhb/checkVeYhbBh","extraData":"dt="+(new Date()).getTime(),"alertText":"该用户编号已使用，请重新输入"},"ajaxCheckMemberHyzcm":{"url":"/asms/member/t_member/checkMember","extraData":"dt="+(new Date()).getTime(),"alertText":"该会员注册名已使用，请重新输入"},"ajaxCheckMemberHykh":{"url":"/asms/member/t_member/checkMember","extraData":"dt="+(new Date()).getTime(),"alertText":"该会员卡号已使用，请重新输入"},"ajaxCheckYwlxmc":{"url":"/asms/sysconfig/jcsj/ys_ywlx/ajaxCheckYwlxmc","extraData":"ys_ywlx.ywlx=,ys_ywlx.bh=","extraDataDynamic":['#ywlx','#bh'],"alertText":"该业务名称已使用，请重新输入"},"ajaxCheckSvalue":{"url":"/asms/member/grade/ajaxCheckHydj","extraData":"b_jcsjb.svalue=","extraDataDynamic":['#svalue'],"alertText":"该规则名称已使用，请重新输入"},"checkZcHbh":{"func":function(field,rules,i,options){return hbhValidate($(field)[0]);},"alertText":"航班号格式错误!航班号支持四种<br>格式：---、MU2301/2302、MU2310、MU2310-2314"},"checkBsyrq":{"func":function(field,rules,i,options){return bsyrqValidate($(field)[0]);},"alertText":"不适用日期格式错误!支持区间段【用“|”分割】和多个日期【用“/”分割】格式<br>例如：2016-02-04|2016-02-10 或 2016-02-04|2016-02-10/2016-02-12 或 2016-01-08/2016-01-09三种格式"},"pnrNo":{"regex":/^(\w|\d){6}$/,"alertText":"PNR格式错误"},"tkno":{"regex":/^[0-9]{3}\-[0-9]{10}$/,"alertText":"票号格式不正确"},"ajaxEzdhCall":{"url":"/airsa/b_airway!checkez.shtml","extraData":"ezdh=","extraDataDynamic":['#ezdh'],"alertText":"该二字代号已使用，请重新输入"},"ajaxCwbhCall":{"url":"/airsa/b_airway_cw!check.shtml","extraData":"cwdj=,ezdh=,yxq=","extraDataDynamic":['#cwdj','#ezdh','#yxq'],"alertText":"该舱位编号已使用，请重新输入"},"ajaxFjjxCall":{"url":"/airsa/b_comm_plane!check.shtml","extraData":"fjjx=","extraDataDynamic":['#fjjx'],"alertText":"该飞机机型已使用，请重新输入"},"ajaxSxrqCall":{"url":"/airsa/rep_pjgz!checknHkgs.shtml","extraData":"hkgs=,sxrq=","extraDataDynamic":['#hkgs','#sxrq'],"alertText":"此航空公司在此生效日期已设置过票价比例,不能重复设置"},"ajaxHkgsCall":{"url":"/airsa/rep_rysz!checkHkgs.shtml","extraData":"hkgs=,sxrq=","extraDataDynamic":['#hkgs','#sxrq'],"alertText":"此航空公司在该日期已存在燃油设置,不能重复设置"},"ajaxTshxCall":{"url":"/airsa/b_airway_cw_hc!check.shtml","alertText":"航空公司、舱位及航程不能重复录入"},"ajaxHbCall":{"url":"/airsa/b_comm_hb!check.shtml","alertText":"航班已存在，不能重复！"},"ajaxSzdmCall":{"url":"/airsa/b_city_old!checknbbh.shtml","extraDataDynamic":['#bh'],"alertText":"记录已经存在，请重新录入！"},"ajaxSzdmtycCall":{"url":"/airsa/b_city_old!checktyc.shtml","extraDataDynamic":['#bh'],"alertText":"记录已经存在，请重新录入！"},"ajaxDlbhcCall":{"url":"/airsa/b_city_old!checkdldh.shtml","extraDataDynamic":['#bh'],"alertText":"记录已经存在，请重新录入！"},"ajaxHkpjCall":{"url":"/airsa/b_air_price!check.shtml","alertText":"记录已经存在，请重新录入！"},"ajaxCsbhCall":{"url":"/airsa/ve_csb!checkbh.shtml","alertText":"参数编号已经存在，请重新录入！"},"ajaxHtbhCall":{"url":"/airsa/sh_gyht!checkHtbh.shtml","alertText":"该合同编号已使用，请重新输入"},"ajaxCompbhCall":{"url":"/airsa/ve_zzjgqx!checkCompBh.shtml","alertText":"该公司编号已使用，请重新输入"},"ajaxDzggxx":{"url":"/airsa/cxzx/ggw_ggxx!getDzggList.shtml","extraData":"cx_ggw_cp.syrqs=,cx_ggw_cp.syrqz=,cx_ggw_cp.dzsjs=,cx_ggw_cp.dzsjz=,cx_ggw_cp.ggwwz=,cx_ggw_cp.id=","extraDataDynamic":['#syrqs','#syrqz','#qfsjs','#qfsjz','#ggwwz','#cx_ggw_cpid'],"alertText":"独占的广告，同一时间段不能发两个!"},"compareNumber":{"regex":"none","alertText":"后面的值必须大于或等于前面的值"},"compareTime":{"regex":"none","alertText":"后面的时间必须晚于前面的时间"},"timeFormat":{"regex":/^(?:[01]\d|2[0-3])(?:[0-5]\d)$/,"alertText":"时间格式错误，时间格式为：HH:mm"},"dotformat":{"regex":"none","alertText":"小数格式为："},"ajaxIbeJkmcCall":{"url":"/airsa/resource/zgl!checkeIbemc.shtml","extraData":"ibe_jkgl.ibemc=,ibe_jkgl.id","extraDataDynamic":['#ibemc','#id'],"alertText":"该接口名称已使用，请重新输入"},"checkOffice":{"regex":/^[A-Z]{3}\d{3}$/,"alertText":"OFFICE号格式不对，例： WUH123"},"checkCsdm":{"regex":/^[A-Z]{3}$/,"alertText":"城市代码格式不对，例： WUH"},"checkFssjd":{"regex":/^\d{2}:\d{2}-\d{2}:\d{2}([,]\d{2}:\d{2}-\d{2}:\d{2})*$/,"alertText":"时间格式:HH:mm-HH:mm,多时间段还用 , 分隔"},"checkMm":{"regex":/^[a-zA-Z0-9_-]{6,18}$/,"alertText":"密码格式不对，密码由6-18位的数字、字母、_和-组成"},"checkPort":{"regex":/^\d{1,10}$/,"alertText":"端口格式不对，端口由1-10长度的数字组成"},"validate-alpha-chinese":{"regex":/^[\u4e00-\u9fa5a-zA-Z\/*\s*\·\.]+$/,"alertText":"请输入英文字母或中文"},"validate-both-phone":{"regex":/(^0?[1][0-9]{10}$)|(^((0[1-9]{3})?(0[12][0-9])?)?\d{7,10}$)/,"alertText":"请输入正确的手机号码或电话号码,电话号码如需加区号，格式如：01029392929"},"4numbers":{"regex":/\d{4}/,"alertText":"请输入4位数字"},"gzbh":{"regex":/(^\d{1,3}-{1}\d{1,3}-{1}\d{1,3}$)|(^\d{1,3}-{1}\d{1,3}-{1}\d{1,3}-{1}\d{1,3}-{1}\d{1,3}$)|(^0$)/,"alertText":"格式不正确，请输入正确的规则编号"},"checkInput":{"regex":/^[^<>`~!/@\#}$%:; _^{&*=|'+-]+$/,"alertText":"含有非法字符，请正确输入"},"checkInputToNumber":{"regex":/^\+?[1-9][0-9]*$/,"alertText":"请输入正整数"},"checkInputNumeric":{"regex":/^\+?\d+(\.\d+)?$/,"alertText":"请输入正数"},"hh:mm":{"func":function(field,rules,i,options){var _val=field.val();if(_val=="")return true;var reg=/^(\d{2})\:(\d{2})$/;var exp=new RegExp(reg);if(exp.test(_val)){var $1=_val.substr(0,2);var $2=_val.substr(3,2);return($1<24&&$2<60)?true:false;}},"alertText":"时间格式错误，时间格式为：HH:mm"},"hh:mm:ss":{"func":function(field,rules,i,options){var _val=field.val();if(_val=="")return true;var reg=/^(\d{2})\:(\d{2})\:(\d{2})$/;var exp=new RegExp(reg);if(exp.test(_val)){var $1=_val.substr(0,2);var $2=_val.substr(3,2);var $3=_val.substr(6,2);return($1<24&&$2<60&&$3<60)?true:false;}},"alertText":"时间格式错误，时间格式为：HH:mm:ss"},"hhmm":{"func":function(field,rules,i,options){var _val=field.val();if(_val=="")return true;var reg=/^(\d{2})(\d{2})$/;var exp=new RegExp(reg);if(exp.test(_val)){var $1=_val.substr(0,2);var $2=_val.substr(2,2);return($1<24&&$2<60)?true:false;}},"alertText":"时间格式错误，时间格式为：HHmm"},"hhmmss":{"func":function(field,rules,i,options){var _val=field.val();if(_val=="")return true;var reg=/^(\d{2})(\d{2})(\d{2})$/;var exp=new RegExp(reg);if(exp.test(_val)){var $1=_val.substr(0,2);var $2=_val.substr(2,2);var $3=_val.substr(4,2);return($1<24&&$2<60&&$3<60)?true:false;}},"alertText":"时间格式错误，时间格式为：HHmmss"},"hhmm-hhmm":{"func":function(field,rules,i,options){var _val=field.val();if(_val=="")return true;var reg=/^(\d{2})(\d{2})-(\d{2})(\d{2})$/;var exp=new RegExp(reg);if(exp.test(_val)){var $1=_val.substr(0,2);var $2=_val.substr(2,2);var $3=_val.substr(5,2);var $4=_val.substr(7,2);return($1<24&&$2<60&&$3<24&&$4<60&&($1+$2)<=($3+$4))?true:false;}},"alertText":"时间格式错误，时间格式为：HHmm-HHmm"},"mult-mobile":{"func":function(field,rules,i,options){var _val=field.val();if(_val==''||_val==null){return true;}
var phArr=_val.split('/');var regx=/(^0?[1][0-9]{10}$)/;for(var f=0;f<phArr.length;f++){if(!regx.test(phArr[f])){return false;}}
return true;},"alertText":"请输入正确的手机号码，多个用'/'分隔"},"mobile":{"func":function(field,rules,i,options){var _val=field.val(),regx=/^(((\([1-9]\d{0,3}\))[1-9]\d{5,15})|((?!.*(\(|\)))[1-9]\d{10}))$/;var timpVal=_val.replace(/\s+/g,"");return regx.test(timpVal);},"alertText":"请输入：(国家区号)6-15位手机号码  或  11位国内手机号码"},"checkInputMobleNumber":{"func":function(field,rules,i,options){var _val=field.val(),regx=/^(((\([1-9]\d{0,3}\))[1-9]\d{5,15})|((?!.*(\(|\)))[1-9]\d{10}))$/;var timpVal=_val.replace(/\s+/g,"");return regx.test(timpVal);},"alertText":"请输入：(国家区号)6-15位手机号码  或  11位国内手机号码"},"mult-mobilePhone":{"func":function(field,rules,i,options){var _val=field.val();if(_val==''||_val==null){return true;}
var phArr=_val.split(',');var regx=/(^0?[1][0-9]{10}$)/;for(var f=0;f<phArr.length;f++){if(!regx.test(phArr[f])){return false;}}
return true;},"alertText":"请输入正确的手机号码，多个用','分隔"},"mult-mobilePhone-xh":{"func":function(field,rules,i,options){var _val=field.val();if(_val==''||_val==null){return true;}
return true;},"alertText":"请输入正确的手机号码，多个用','分隔"},"username":{"func":function(field,rules,i,options){var _val=field.val();if(_val==''||_val==null){return true;}
if(!/^[\u4e00-\u9fa5a-zA-Z\s\·]+$/.test(_val)){return false;}
if(_val.indexOf("/")>=0||_val.indexOf("\\")>=0){return false;}
return true;},"alertText":"请输入英文字母或中文"},"username-t":{"func":function(field,rules,i,options){var _val=field.val();if(_val==''||_val==null){return true;}
if(_val.indexOf("*")!=-1){return false;}
if(!/^[\u4e00-\u9fa5a-zA-Z\/*\s*\·\.]+$/.test(_val)){return false;}
if(_val.indexOf("/")>=0||_val.indexOf("\\")>=0){return false;}
return true;},"alertText":"请输入英文字母或中文"},"mult-email":{"func":function(field,rules,i,options){var _val=field.val();if(_val==''||_val==null){return true;}
var phArr=_val.split('/');var regx=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;for(var f=0;f<phArr.length;f++){if(!regx.test(phArr[f])){return false;}}
return true;},"alertText":"请输入正确的邮件，多个用'/'分隔"},"ajaxCheckVeDpet":{"url":"/asms/b2b/sysconfig/fxsz/fxsz_ve_dept/checkVeDpet","extraData":"dt="+(new Date()).getTime(),"alertText":"该分销商信息已使用，请重新输入"},"ajaxCheckVeCompBh":{"url":"/asms/organization/ve_comp/checkVeCompBh","extraData":"dt="+(new Date()).getTime(),"alertText":"该单位代号已使用，请重新输入"},"ajaxCheckUpdateKmmc":{"url":"/asms/sysconfig/fskm/b_zfkmsz/ajaxCheckUpdateKmmc","extraData":"b_zfkmsz.kmmc=,b_zfkmsz.id=,b_zfkmsz.compid=","extraDataDynamic":['#kmmc','#id','#compid'],"alertText":"该支付科目名称已使用，请重新输入"},"ajaxCheckHydj":{"url":"/asms/member/grade/ajaxCheckHydj","extraData":"b_jcsjb.svalue=,b_jcsjb.id=,b_jcsjb.compid=,b_jcsjb.hylx=","extraDataDynamic":['#svalue','#id','#compid','#hylx'],"alertText":"该等级名称已使用，请重新输入"},"ajaxCheckJcsjbBymc":{"url":"/asms/sysconfig/jcsj/b_jcsjb_cj/ajaxCheckJcsjbBymc","extraData":"b_jcsjb_cj.mc=,b_jcsjb_cj.id=,b_jcsjb_cj.zgs=,b_jcsjb_cj.lb=","extraDataDynamic":['#mc','#id','#zgs','#lb'],"alertText":"该名称已使用，请重新输入"},"checkMm2":{"regex":/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/,"alertText":"密码长度6-18位，且必须是数字和字母组合"},"ajaxCheckVeDeptBh":{"url":"/asms/organization/ve_dept/checkVeDeptBh","extraData":"dt="+(new Date()).getTime(),"alertText":"该供应商编号已使用，请重新输入"},"ajaxCheckGysBh":{"url":"/asms/organization/ve_dept/checkVeDeptBh","extraData":"dt="+(new Date()).getTime(),"alertText":"该供应商编号已使用，请重新输入"},"mult-phone":{"func":function(field,rules,i,options){var _val=field.val();if(_val==''||_val==null){return true;}
var phArr=_val.split(',');var regx=/^([\+][0-9]{1,3}[ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/;for(var f=0;f<phArr.length;f++){if(!regx.test(phArr[f])){return false;}}
return true;},"alertText":"请输入正确的电话号码，多个用','分隔"},"mult-phone-xh":{"func":function(field,rules,i,options){var _val=field.val();if(_val==''||_val==null){return true;}
return true;},"alertText":"请输入正确的电话号码，多个用','分隔"},"onlyLetterNumberAt":{"regex":/^[0-9a-zA-Z@]+$/,"alertText":"只能输入英文数字和@"}}}};$.validationEngineLanguage.newLang();function hbhValidate(obj){var obj=$(obj);var _hbh=obj.val();obj.val(obj.val().toUpperCase());_hbh=_hbh.toUpperCase();if(_hbh=="---"){return true;}
if($.isBlank(_hbh)){return true;}
if(_hbh.indexOf("/")>-1){var hbhs=_hbh.split("/");return hbhsValid(hbhs,obj);}else if(_hbh.indexOf("-")>-1){var hbhs=_hbh.split("-");if(hbhs.length!=2){flag=false;obj.focus();return false;}
return hbhsValid(hbhs,obj);}else{if(!hbhValid(_hbh)){obj.focus();return false;}}
return true;}
function hbhValid(hbh){hbh=hbh+"/";return(hbh.replace(/[A-Za-z|0-9]{2}\w{3,5}\//g,"").length==0);}
function hbhsValid(hbhs,obj){var flag=true;for(var i=0;i<hbhs.length;i++){if(i==0){if(!(hbhs[i].length>4&&hbhs[i].length<=6)){flag=false;obj.focus();}else{var temp=hbhs[i].replace(/[A-Za-z|0-9]{2}\w{3,5}/,"");if(temp.length!=0){flag=false;obj.focus();}}}else{if(!(hbhs[i].length>=3&&hbhs[i].length<=6)){flag=false;obj.focus();}else{var temp=hbhs[i].replace(/([A-Za-z|0-9]{2}){0,1}\w{3,5}/,"");if(temp.length!=0){flag=false;obj.focus();}}}
if(!flag)break;}
return flag;}
function bsyrqValidate(obj){var _value=$(obj).val();if(_value=="")return true;if(_value.indexOf("|")==-1){if(_value.indexOf("/")==-1){return _dateValid(_value);}else{var _arr=_value.split("/");for(var i=0;i<_arr.length;i++){if(!_dateValidXg(_arr[i])){return false;}}}}else{var _arr=_value.split("|");if(_value.indexOf("/")==-1){if(!_dateValidHg(_value)){return false;}}else{var _arrT=_value.split("/");for(var i=0;i<_arrT.length;i++){if(_arrT[i].indexOf("|")==-1){if(!_dateValidXg(_arrT[i])){return false;}}else{if(!_dateValidHg(_arrT[i])){return false;}}}}}
return true;}
function _dateValidXg(_value){if(_value=="")return true;if(_value!=""&&!_dateValid(_value)){return false;}
return true;}
function _dateValidHg(_value){if(_value=="")return true;var _arr=_value.split("|");if(_arr.length!=2)return false;var begin=_arr[0];var end=_arr[1];if(begin!=""&&!_dateValid(begin)){return false;}
if(end!=""&&!_dateValid(end)){return false;}
return $.dateDiff(begin,end)>0;}
function _dateValid(_value){var reg=/^\d{4}[\/\-](0[1-9]|1[012])[\/\-](0[1-9]|[12][0-9]|3[01])$/;return(_value.replace(reg,"").length==0);}})(jQuery);var JSON;if(!JSON){JSON={};}
(function(){'use strict';function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){var jQuery=require('jquery');module.exports=factory(jQuery);}else{factory(window.jQuery||window.Zepto||window.$);}
var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;var jQuery=window.jQuery||window.$||window.zepto;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type;var result=this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type));return result;}).map(function(i,elem){var val=jQuery(this).val(),result=null;var keyName=jQuery(elem).attr("actual-name")?jQuery(elem).attr("actual-name"):elem.name;if(null==val){result=null;}else if(jQuery.isArray(val)){result=jQuery.map(val,function(val){return{name:keyName,value:val.replace(rCRLF,"\r\n")};});}else{result={name:keyName,value:val.replace(rCRLF,"\r\n")};}
return result;}).get();}});}(function($){"use strict";$.fn.serializeJSON=function(options){var f,$form,opts,formAsArray,serializedObject,name,value,_obj,nameWithNoType,type,keys;f=$.serializeJSON;$form=this;opts=f.setupOpts(options);formAsArray=$form.serializeArray();f.readCheckboxUncheckedValues(formAsArray,opts,$form);serializedObject={};$.each(formAsArray,function(i,obj){name=obj.name;value=obj.value;_obj=f.extractTypeAndNameWithNoType(name);nameWithNoType=_obj.nameWithNoType;type=_obj.type;f.validateType(name,type,opts);if(type!=='skip'){keys=f.splitInputNameIntoKeysArray(nameWithNoType);value=f.parseValue(value,name,type,opts);f.deepSet(serializedObject,keys,value,opts);}});return serializedObject;};$.serializeJSON={defaultOptions:{checkboxUncheckedValue:undefined,parseNumbers:false,parseBooleans:false,parseNulls:false,parseAll:false,parseWithFunction:null,customTypes:{},defaultTypes:{"string":function(str){return String(str);},"number":function(str){return Number(str);},"boolean":function(str){var falses=["false","null","undefined","","0"];return falses.indexOf(str)===-1;},"null":function(str){var falses=["false","null","undefined","","0"];return falses.indexOf(str)===-1?str:null;},"array":function(str){return JSON.parse(str);},"object":function(str){return JSON.parse(str);},"auto":function(str){return $.serializeJSON.parseValue(str,null,null,{parseNumbers:true,parseBooleans:true,parseNulls:true});},"skip":null},useIntKeysAsArrayIndex:false},setupOpts:function(options){var opt,validOpts,defaultOptions,optWithDefault,parseAll,f;f=$.serializeJSON;if(options==null){options={};}
defaultOptions=f.defaultOptions||{};validOpts=['checkboxUncheckedValue','parseNumbers','parseBooleans','parseNulls','parseAll','parseWithFunction','customTypes','defaultTypes','useIntKeysAsArrayIndex'];for(opt in options){if(validOpts.indexOf(opt)===-1){throw new Error("serializeJSON ERROR: invalid option '"+opt+"'. Please use one of "+validOpts.join(', '));}}
optWithDefault=function(key){return(options[key]!==false)&&(options[key]!=='')&&(options[key]||defaultOptions[key]);};parseAll=optWithDefault('parseAll');return{checkboxUncheckedValue:optWithDefault('checkboxUncheckedValue'),parseNumbers:parseAll||optWithDefault('parseNumbers'),parseBooleans:parseAll||optWithDefault('parseBooleans'),parseNulls:parseAll||optWithDefault('parseNulls'),parseWithFunction:optWithDefault('parseWithFunction'),typeFunctions:$.extend({},optWithDefault('defaultTypes'),optWithDefault('customTypes')),useIntKeysAsArrayIndex:optWithDefault('useIntKeysAsArrayIndex')};},parseValue:function(valStr,inputName,type,opts){var f,parsedVal;f=$.serializeJSON;parsedVal=valStr;if(opts.typeFunctions&&type&&opts.typeFunctions[type]){parsedVal=opts.typeFunctions[type](valStr);}else if(opts.parseNumbers&&f.isNumeric(valStr)){parsedVal=Number(valStr);}else if(opts.parseBooleans&&(valStr==="true"||valStr==="false")){parsedVal=(valStr==="true");}else if(opts.parseNulls&&valStr=="null"){parsedVal=null;}
if(opts.parseWithFunction&&!type){parsedVal=opts.parseWithFunction(parsedVal,inputName);}
return parsedVal;},isObject:function(obj){return obj===Object(obj);},isUndefined:function(obj){return obj===void 0;},isValidArrayIndex:function(val){return/^[0-9]+$/.test(String(val));},isNumeric:function(obj){return obj-parseFloat(obj)>=0;},optionKeys:function(obj){if(Object.keys){return Object.keys(obj);}else{var key,keys=[];for(key in obj){keys.push(key);}return keys;}},readCheckboxUncheckedValues:function(formAsArray,opts,$form){var selector,$uncheckedCheckboxes,$el,dataUncheckedValue,f;if(opts==null){opts={};}
f=$.serializeJSON;selector='input[type=checkbox][name]:not(:checked):not([disabled])';$uncheckedCheckboxes=$form.find(selector).add($form.filter(selector));$uncheckedCheckboxes.each(function(i,el){$el=$(el);dataUncheckedValue=$el.attr('data-unchecked-value');if(dataUncheckedValue){formAsArray.push({name:el.name,value:dataUncheckedValue});}else{if(!f.isUndefined(opts.checkboxUncheckedValue)){formAsArray.push({name:el.name,value:opts.checkboxUncheckedValue});}}});},extractTypeAndNameWithNoType:function(name){var match;if(match=name.match(/(.*):([^:]+)$/)){return{nameWithNoType:match[1],type:match[2]};}else{return{nameWithNoType:name,type:null};}},tryToFindTypeFromDataAttr:function(name,$form){var escapedName,selector,$input,typeFromDataAttr;escapedName=name.replace(/(:|\.|\[|\]|\s)/g,'\\$1');selector='[name="'+escapedName+'"]';$input=$form.find(selector).add($form.filter(selector));typeFromDataAttr=$input.attr('data-value-type');return typeFromDataAttr||null;},validateType:function(name,type,opts){var validTypes,f;f=$.serializeJSON;validTypes=f.optionKeys(opts?opts.typeFunctions:f.defaultOptions.defaultTypes);if(!type||validTypes.indexOf(type)!==-1){return true;}else{throw new Error("serializeJSON ERROR: Invalid type "+type+" found in input name '"+name+"', please use one of "+validTypes.join(', '));}},splitInputNameIntoKeysArray:function(nameWithNoType){var keys,f;f=$.serializeJSON;keys=nameWithNoType.split(/\[|\./g);keys=$.map(keys,function(key){return key.replace(/\]/g,'');});if(keys[0]===''){keys.shift();}
return keys;},deepSet:function(o,keys,value,opts){var key,nextKey,tail,lastIdx,lastVal,f;if(opts==null){opts={};}
f=$.serializeJSON;if(f.isUndefined(o)){throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");}
if(!keys||keys.length===0){throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");}
key=keys[0];if(keys.length===1){if(key===''){o.push(value);}else{o[key]=value;}}else{nextKey=keys[1];if(key===''){lastIdx=o.length-1;lastVal=o[lastIdx];if(f.isObject(lastVal)&&(f.isUndefined(lastVal[nextKey])||keys.length>2)){key=lastIdx;}else{key=lastIdx+1;}}
if(nextKey===''){if(f.isUndefined(o[key])||!$.isArray(o[key])){o[key]=[];}}else{if(opts.useIntKeysAsArrayIndex&&f.isValidArrayIndex(nextKey)){if(f.isUndefined(o[key])||!$.isArray(o[key])){o[key]=[];}}else{if(f.isUndefined(o[key])||!f.isObject(o[key])){o[key]={};}}}
tail=keys.slice(1);f.deepSet(o[key],tail,value,opts);}}};}));var DateUtil=function(){this.isLeapYear=function(date){return(0==date.getYear()%4&&((date.getYear()%100!=0)||(date.getYear()%400==0)));}
this.dateToStr=function(formatStr,date){formatStr=arguments[0]||"yyyy-MM-dd HH:mm:ss";date=arguments[1]||new Date();var str=formatStr;var Week=['日','一','二','三','四','五','六'];str=str.replace(/yyyy|YYYY/,date.getFullYear());str=str.replace(/yy|YY/,(date.getYear()%100)>9?(date.getYear()%100).toString():'0'+(date.getYear()%100));str=str.replace(/MM/,date.getMonth()>=9?(date.getMonth()+1):'0'+(date.getMonth()+1));str=str.replace(/M/g,date.getMonth());str=str.replace(/w|W/g,Week[date.getDay()]);str=str.replace(/dd|DD/,date.getDate()>9?date.getDate().toString():'0'+date.getDate());str=str.replace(/d|D/g,date.getDate());str=str.replace(/hh|HH/,date.getHours()>9?date.getHours().toString():'0'+date.getHours());str=str.replace(/h|H/g,date.getHours());str=str.replace(/mm/,date.getMinutes()>9?date.getMinutes().toString():'0'+date.getMinutes());str=str.replace(/m/g,date.getMinutes());str=str.replace(/ss|SS/,date.getSeconds()>9?date.getSeconds().toString():'0'+date.getSeconds());str=str.replace(/s|S/g,date.getSeconds());return str;}
this.dateAdd=function(strInterval,num,date){date=arguments[2]||new Date();switch(strInterval){case's':return new Date(date.getTime()+(1000*num));case'n':return new Date(date.getTime()+(60000*num));case'h':return new Date(date.getTime()+(3600000*num));case'd':return new Date(date.getTime()+(86400000*num));case'w':return new Date(date.getTime()+((86400000*7)*num));case'm':return new Date(date.getFullYear(),(date.getMonth())+num,date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds());case'y':return new Date((date.getFullYear()+num),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds());}}
this.dateDiff=function(strInterval,dtStart,dtEnd){switch(strInterval){case's':return parseInt((dtEnd-dtStart)/1000);case'n':return parseInt((dtEnd-dtStart)/60000);case'h':return parseInt((dtEnd-dtStart)/3600000);case'd':return parseInt((dtEnd-dtStart)/86400000);case'w':return parseInt((dtEnd-dtStart)/(86400000*7));case'm':return(dtEnd.getMonth()+1)+((dtEnd.getFullYear()-dtStart.getFullYear())*12)-(dtStart.getMonth()+1);case'y':return dtEnd.getFullYear()-dtStart.getFullYear();}}
this.strToDate=function(dateStr){var data=dateStr;var reCat=/(\d{1,4})/gm;var t=data.match(reCat);t[1]=t[1]-1;eval('var d = new Date('+t.join(',')+');');return d;}
this.strFormatToDate=function(formatStr,dateStr){var year=0;var start=-1;var len=dateStr.length;if((start=formatStr.indexOf('yyyy'))>-1&&start<len){year=dateStr.substr(start,4);}
var month=0;if((start=formatStr.indexOf('MM'))>-1&&start<len){var monthStr=dateStr.substr(start,2);if(monthStr.indexOf("0")==0){monthStr=monthStr.substring(1);}
month=parseInt(monthStr)-1;}
var day=0;if((start=formatStr.indexOf('dd'))>-1&&start<len){var dayStr=dateStr.substr(start,2);if(dayStr.indexOf("0")==0){dayStr=dayStr.substring(1);}
day=parseInt(dayStr);}
var hour=0;if(((start=formatStr.indexOf('HH'))>-1||(start=formatStr.indexOf('hh'))>1)&&start<len){var hourStr=dateStr.substr(start,2);if(hourStr.indexOf("0")==0){hourStr=hourStr.substring(1);}
hour=parseInt(hourStr);}
var minute=0;if((start=formatStr.indexOf('mm'))>-1&&start<len){minute=dateStr.substr(start,2);}
var second=0;if((start=formatStr.indexOf('ss'))>-1&&start<len){second=dateStr.substr(start,2);}
return new Date(year,month,day,hour,minute,second);}
this.dateToLong=function(date){return date.getTime();}
this.longToDate=function(dateVal){return new Date(dateVal);}
this.isDate=function(str,formatStr){if(formatStr==null){formatStr="yyyyMMdd";}
var yIndex=formatStr.indexOf("yyyy");if(yIndex==-1){return false;}
var year=str.substring(yIndex,yIndex+4);var mIndex=formatStr.indexOf("MM");if(mIndex==-1){return false;}
var month=str.substring(mIndex,mIndex+2);var dIndex=formatStr.indexOf("dd");if(dIndex==-1){return false;}
var day=str.substring(dIndex,dIndex+2);if(!isNumber(year)||year>"2100"||year<"1900"){return false;}
if(!isNumber(month)||month>"12"||month<"01"){return false;}
if(day>getMaxDay(year,month)||day<"01"){return false;}
return true;}
this.getMaxDay=function(year,month){if(month==4||month==6||month==9||month==11)
return"30";if(month==2)
if(year%4==0&&year%100!=0||year%400==0)
return"29";else
return"28";return"31";}
this.isNumber=function(str)
{var regExp=/^\d+$/g;return regExp.test(str);}
this.toArray=function(myDate)
{myDate=arguments[0]||new Date();var myArray=Array();myArray[0]=myDate.getFullYear();myArray[1]=myDate.getMonth();myArray[2]=myDate.getDate();myArray[3]=myDate.getHours();myArray[4]=myDate.getMinutes();myArray[5]=myDate.getSeconds();return myArray;}
this.datePart=function(interval,myDate)
{myDate=arguments[1]||new Date();var partStr='';var Week=['日','一','二','三','四','五','六'];switch(interval)
{case'y':partStr=myDate.getFullYear();break;case'M':partStr=myDate.getMonth()+1;break;case'd':partStr=myDate.getDate();break;case'w':partStr=Week[myDate.getDay()];break;case'ww':partStr=myDate.WeekNumOfYear();break;case'h':partStr=myDate.getHours();break;case'm':partStr=myDate.getMinutes();break;case's':partStr=myDate.getSeconds();break;}
return partStr;}
this.maxDayOfDate=function(date)
{date=arguments[0]||new Date();date.setDate(1);date.setMonth(date.getMonth()+1);var time=date.getTime()-24*60*60*1000;var newDate=new Date(time);return newDate;}
this.lastDayOfMonth=function(date)
{date=arguments[0]||new Date();if(typeof date=='string'){date=this.strFormatToDate("yyyy-MM-dd",date);}
date.setDate(1);date.setMonth(date.getMonth()+1);var time=date.getTime()-24*60*60*1000;var newDate=new Date(time);return this.dateToStr("yyyy-MM-dd",newDate);}
return this;}();(function(){function getBrowserInfo(){var agent=navigator.userAgent.toLowerCase();var regStr_ie=/msie [\d.]+;/gi;var regStr_ff=/firefox\/[\d.]+/gi
var regStr_chrome=/chrome\/[\d.]+/gi;var regStr_saf=/safari\/[\d.]+/gi;if(agent.indexOf("msie")>0){return agent.match(regStr_ie);}
if(agent.indexOf("firefox")>0){return agent.match(regStr_ff);}
if(agent.indexOf("chrome")>0){return agent.match(regStr_chrome);}
if(agent.indexOf("safari")>0&&agent.indexOf("chrome")<0){return agent.match(regStr_saf);}}
var browser=getBrowserInfo();var typeInfo=(browser+"").replace(/[0-9.\/; ]/ig,"");typeInfo=typeInfo==="msie"?"IE":typeInfo;var verinfo=(browser+"").replace(/[^0-9.]/ig,"");window.BROWSER={type:typeInfo,version:verinfo};function addTips(){var tips=document.createElement("div");tips.style.background="#fffbee";tips.style.height="30px";tips.style.width="100%";tips.style.lineHeight="30px";tips.style.textAlign="center";tips.innerHTML="您的浏览器版本太低，为了避免影响使用，请升级您的浏览器！";if(window.BROWSER.type==="IE"&&window.BROWSER.version<8){var showTips=document.getElementById("browser-typeAndVersion-info");if(showTips){showTips.appendChild(tips);}else{tips.style.position="fixed";tips.style.left=0;tips.style.top=0;document.body.appendChild(tips);}}}
window.addTips=addTips;})(window,document);;(function($){if(!(Array.indexOf||Array.prototype.indexOf)){Array.prototype.indexOf=function(){for(var i=0;i<this.length;i++){if(this[i]==arguments[0])return i;}
return-1;}}
window.console=window.console||(function(){var c={};c.log=c.warn=c.debug=c.info=c.error=c.time=c.dir=c.profile=c.clear=c.exception=c.trace=c.assert=function(){};return c;})();addMergeTableFn();addHighlightTableRows();addSortTable();addDynTable();addCommonUtil();addRMBUpperCase();addWeekFn();addTipsAndPlaceHolder();overWriteAjax();(function(original){jQuery.fn.clone=function(){var result=original.apply(this,arguments),my_textareas=this.find('textarea').add(this.filter('textarea')),result_textareas=result.find('textarea').add(result.filter('textarea')),my_selects=this.find('select').add(this.filter('select')),result_selects=result.find('select').add(result.filter('select'));for(var i=0,l=my_textareas.length;i<l;++i)$(result_textareas[i]).val($(my_textareas[i]).val());for(var i=0,l=my_selects.length;i<l;++i)result_selects[i].selectedIndex=my_selects[i].selectedIndex;return result;};})(jQuery.fn.clone);function overWriteAjax(){var erroNum=0;$.ajaxProp=$.ajax;$.ajax=function(url,options){if(typeof url==="object"){options=url;url=undefined;}
var success=options.success;var callBack=function(data,textStatus,xhr){var loginHeader=xhr.getResponseHeader("VELOGINAGAIN");if(loginHeader){layer.alert("抱歉系统开小差了，可能的原因有缓存超时，账号同时登录。您需要重新登录以后才能进行该操作！",function(){window.top.location.href=loginHeader;});}else{var json=data;if(data&&$.type(data)==="string"){try{json=$.parseJSON(data);}catch(e){}}
var isOpenError=true;if(success){try{isOpenError=!success(data,textStatus,xhr);}catch(e){isOpenError=true;}}
if($.type(json)==="object"&&json.status==='0'&&json.errorType==='2'&&json.errorMessage!=null&&json.errorMessage!=""&&isOpenError){ERRORLAYER=new VeLayer();ERRORLAYER.msg(json.errorMessage+"["+json.code+"]",{icon:6,closeBtn:1});}else if($.type(json)==="object"&&json.status==='0'&&isOpenError&&erroNum==0){top.$errorData=data;$.post("/core/vebug/error/viewerror?notitle=1",{},function(str){ERRORLAYER=new VeLayer();ERRORLAYER.open({type:1,content:str,top:false,area:['600px','350px'],shade:0,maxmin:false,end:function(){erroNum=0;}});});erroNum++;}}};options.success=callBack;if(options.dataType!=="script"&&options.dataType!=="jsonp"&&options.cache!==true)options.cache=false;return $.ajaxProp(url,options);};jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}
var selector,response,type,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off);}
if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}
if(self.length>0){if(url.indexOf("notitle=1")===-1){if(url.indexOf("?")!==-1)url+="&notitle=1";else url+="?notitle=1";}
if(url.indexOf("submitType")>-1){url=decodeURIComponent(url);var ret=parseQueryString(url)||{};if((ret.submitType||"").toUpperCase()==="POST"){params=ret;delete params.notitle;type="POST";url=url.split("?")[0]+"?notitle=1";}}
jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText);}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR]);});}
return this;}}
function inputTrim(oInput){oInput=oInput||this;oInput.value=$.trim(oInput.value);}
function addMergeTableFn(){$.mergeTable=function(tableid,mergeobj){tableid=document.getElementById(tableid);if(tableid&&tableid.rows.length>0){var iColumns=tableid.rows[0].cells.length;var start=0;var th="";var delcell="";for(var i=0;i<mergeobj.length;i++){hbcol=mergeobj[i].col;if(hbcol!=""){hbtitle=mergeobj[i].title;stcol=hbcol.split(",")[0];colcount=hbcol.split(",").length;for(;start<stcol;start++){var cell=tableid.rows[0].cells[start];th=th+"<th rowspan=2 class='"+cell.className+"'>"+cell.innerHTML+"</th>";delcell+=start+",";}
th=th+"<th colspan="+colcount+">"+hbtitle+"</th>";start+=colcount;}}
for(;start<iColumns;start++){var cell=tableid.rows[0].cells[start];th=th+"<th rowspan=2 class='"+cell.className+"'>"+cell.innerHTML+"</th>";delcell+=start+",";}
var tr="<tr>"+th+"</tr>";var delcell_=delcell.split(",");for(var i=delcell_.length-1;i>=0;i--){if(delcell_[i]!=""){tableid.rows[0].removeChild(tableid.rows[0].cells[delcell_[i]]);}}
$(tableid.getElementsByTagName("tr")[0]).before(tr);}};$.mooop=function(tableid,delc){$table=$('#'+tableid);if(!$table||$table.length==0){return;}
$table.find('tFoot tr').each(function(i,n){var delcs=delc.split(",");for(var di=delcs.length-1;di>=0;di--){if(delcs[di]==""){continue;}
var dn=parseInt(delcs[di]);var cu=0;var $foottds=$(n).find('td');$foottds.each(function(i,tdObj){var oneTd=$(tdObj);if(oneTd.attr('colspan')!=null&&oneTd.attr('colspan')!=""){cu+=parseInt(oneTd.attr('colspan'));}else{cu++;}
if(cu>dn){cu=i;return false;}});if(cu<$foottds.length){$movetd=$foottds.eq(cu);var moetdColspan=parseInt($movetd.attr("colspan"))
if(moetdColspan>1){$movetd.attr("colspan",moetdColspan-1);}else{$movetd.hide();}}}});}};$.mergeAllTotal=function(tableId){debugger;var $table=$("#"+tableId);if(!$table.length)return;$table.on("totalMerge",function(e,data){var $firstTd=$table.find("td["+data.className+"]").eq(0);if($firstTd){var $tds=$firstTd.parent().find("td");$.each($tds,function(i,td){if($firstTd.get(0)===td){if(i<2)return false;$.each($tds,function(j,td2){if(j<i-1){$(td2).remove();}else if(j==i-1){$(td2).attr("colspan",i).html(data.value);}else{return false;}});return false;}});}});$table.trigger("totalMerge",{className:"total",value:"本页小计："});$table.trigger("totalMerge",{className:"alltotal",value:"合计："});$table.off("totalMerge");};$.dispSortable=function(tableId,divId,callback){$("#"+tableId).find("th.sortable").each(function(){var $a=$(this).find("a");if($a.length){var oriUrl=$a.attr("href");$a.attr("href","javascript:void(0);");$a.on("click",{url:oriUrl,"divId":divId,"callback":callback},tableSortFn);}});};window.tableSortFn=function(ev){var pageUrl=ev.data.url,divId=ev.data.divId,callback=ev.data.callback;try{var ii=new VeLayer();ii.load();$('#'+divId).load(pageUrl,function(){try{ii.close();eval(callback)();}catch(e){}});}catch(e){}};function addHighlightTableRows(){$.fn.highlightTableRows=function(){$thisTable=this;$(this).find('tr').each(function(i){if(i==0){return;}
var $tr=$(this);$tr.mouseover(function(){if(!$tr.hasClass('clickbackground')&&!$tr.hasClass('lastclickbackground')){$tr.addClass('hoverbackground');}});$tr.mouseout(function(){$tr.removeClass('hoverbackground');});$tr.click(function(){if(!$tr.hasClass('clickbackground')){$('.clickbackground').removeClass('clickbackground').addClass('lastclickbackground');$tr.removeClass('hoverbackground').removeClass('lastclickbackground').addClass('clickbackground');}});});};}
function addSortTable(){$.sortTable=function(currentTr,op,callBack){if(op=='downtolast'){var lastTr=$(currentTr).siblings('tr').last();$(lastTr).after(currentTr);}else if(op=="uptofirst"){var firstTr=$(currentTr).siblings('tr').first();$(firstTr).before(currentTr);}else if(op=="up"){var preTr=$(currentTr).prev('tr');$(preTr).before(currentTr);}else if(op=="down"){var nextTr=$(currentTr).next('tr');$(nextTr).after(currentTr);}
$('.orderNo').each(function(i){$(this).html(i+1);});var length=$('.upfirstImg').length;$('.upfirstImg').each(function(i){if(i==0){$(this).css('visibility','hidden');}else{$(this).css('visibility','visible');}});$('.upImg').each(function(i){if(i==0){$(this).css('visibility','hidden');}else{$(this).css('visibility','visible');}});$('.downlastImg').each(function(i){if(i==length-1){$(this).css('visibility','hidden');}else{$(this).css('visibility','visible');}});$('.downImg').each(function(i){if(i==length-1){$(this).css('visibility','hidden');}else{$(this).css('visibility','visible');}});if(callBack){callBack(currentTr);}};}
function addDynTable(){$.fn.dynTable=function(options){options=$.extend(true,{tplid:"",onBeforeDel:function(){return true;},onBeforeAdd:function(){return true;},onAfterDel:function(){},onAfterAdd:function(){}},options);this.on('click',".addButton,.addRow",function(){var otr=$(this).parentsUntil("table","tr");if(options.onBeforeAdd()){otr.after($("#"+options.tplid).html());options.onAfterAdd();}});this.on('click',".delButton,.delRow",function(){var otr=$(this).parentsUntil("table","tr");if(options.onBeforeDel()){$(otr).remove();options.onAfterDel();}});};DynTable=function(options){options=$.extend(true,{tplid:"",parentSelector:"table",currentSelector:"tr",onBeforeDel:function(){return true;},onBeforeAdd:function(){return true;},onAfterDel:function(){},onAfterAdd:function(){}},options);this.addRow=function(btn,data,isBefore){var otr=$(btn).parentsUntil(options.parentSelector,options.currentSelector);if(options.onBeforeAdd()){if($.isEmptyObject(data)){if(isBefore){otr.before($("#"+options.tplid).html());}else{otr.after($("#"+options.tplid).html());}}else{laytpl($("#"+options.tplid).html()).render(data,function(html){if(isBefore){otr.before(html);}else{otr.after(html);}});}
options.onAfterAdd();}};this.addRowLast=function(btn,data){var currentTr=$(btn).parentsUntil(options.parentSelector,options.currentSelector);var table=currentTr.parent();if(options.onBeforeAdd()){if($.isEmptyObject(data)){table.append($("#"+options.tplid).html());}else{laytpl($("#"+options.tplid).html()).render(data,function(html){table.append(html);});}
options.onAfterAdd();}};this.addRowByIndex=function(index,data,isBefore){var $allTr=$(options.parentSelector).children(options.currentSelector);if($allTr.length==0){$allTr=$(options.parentSelector).children().children(options.currentSelector);}
if($allTr.length==0){this.initOneRow(data);}
var otr=$allTr.eq(index);if(options.onBeforeAdd()){if($.isEmptyObject(data)){if(isBefore){otr.before($("#"+options.tplid).html());}else{otr.after($("#"+options.tplid).html());}}else{laytpl($("#"+options.tplid).html()).render(data,function(html){if(isBefore){otr.before(html);}else{otr.after(html);}});}
options.onAfterAdd();}};this.delRow=function(btn){var otr=$(btn).parentsUntil(options.parentSelector,options.currentSelector);if(options.onBeforeDel()){$(otr).remove();options.onAfterDel();}};this.initOneRow=function(data){if(options.onBeforeAdd()){if($.isEmptyObject(data)){$(options.parentSelector).append($("#"+options.tplid).html());}else{laytpl($("#"+options.tplid).html()).render(data,function(html){$(options.parentSelector).append(html);});}
options.onAfterAdd();}};};}
(function(){$.fn.addOperateTable=function(options){options=$.extend(true,{totalFlag:false,amountFlag:false,render:function(){}},options);var $table=$(this);$table.on('addRow',function(){var $trs=$table.find('tbody').find('tr');var $lastTr=$trs.last();var oTr=options.render();var $template='';if(oTr){$template=oTr;}else{if($trs.length==1||!options.totalFlag&&!options.amountFlag){$template=$lastTr.clone(true);}else if(options.totalFlag&&options.amountFlag){$template=$trs.eq(-3).clone(true);}else{$template=$trs.eq(-2).clone(true);}
if($template.length>0){var thLen=$template.children().length;$template.empty();for(var i=0;i<thLen;i++){var $td=$('<td></td>');$template.append($td);}}
$template.find('td').each(function(i,item){if(i==0){var $checkbox=$('<input type="checkbox"/>');$(this).html($checkbox);$(this).attr('align','center');}else{$(this).html('');}});}
if(!options.totalFlag&&!options.amountFlag){$table.find('tbody').append($template);}else if(options.totalFlag&&options.amountFlag){$lastTr.prev().before($template);}else{$lastTr.before($template);}});$table.on('copyRow',function(){var $checkedTr=$table.find('input:checked').eq(0).parents('tr');if($checkedTr.length==0){alert('请选择要复制的行!');return;}
var $newTr=$checkedTr.clone(true);$checkedTr.after($newTr);});$table.on('delRow',function(){if($table.find('input:checked').length==0){alert('请选择要删除的行!');return;}
$table.find('input:checked').parents('tr').remove();$table.trigger('addIndex');});$table.on('upRow',function(){var $trLength=$table.find('tbody').children().length;var $thLength=$table.find('th').parent('tr').length;var $checkedTr=$table.find('input:checked').eq(0).parents('tr');if($checkedTr.length==0){alert('请选择要上移的行!');return;}
var $lastTr=$checkedTr.prev();if($checkedTr.index()==$thLength){return;}
$lastTr.before($checkedTr);$table.trigger('addIndex');});$table.on('downRow',function(){var $trLength=$table.find('tbody').children().length;var $checkedTr=$table.find('input:checked').last().parents('tr');if($checkedTr.length==0){alert('请选择要下移的行!');return;}
var $nextTr=$checkedTr.next();var $maxIndex=0;if(options.totalFlag&&options.amountFlag){$maxIndex=$trLength-3;}else if(options.totalFlag||options.amountFlag){$maxIndex=$trLength-2;}else{$maxIndex=$trLength-1;}
if($checkedTr.index()==$maxIndex){return;}
$nextTr.after($checkedTr);})
$table.on('addIndex',function(){$tr=$table.find('tr');$tr.each(function(i,el){if($(el).has('th').length>0)return true;var $thLength=$table.find('th').parent('tr').length;$(this).attr('index',$(this).index()-$thLength);})})}})();(function(){$.fn.pullLoad=function(options){var options=$.extend(true,{url:'',qDatas:'',currentPage:1,pageSize:10,type:'get',cbFn:function(dataList){}},options);var $this=$(this);if(!$this||$this.length==0)throw new Error('dom节点绑定错误');$this.loadFlag=true;$this.tipsContainer=$('<div id="tips_container"></div>');$this.tipsContainer.css({'text-align':'center'});$this.addTips=function(status){var $tipsIcon=$('<i class="loading"></i>');var $tips='';if(status=='1'){$tips=$('<span class="loadTips">数据加载中……</span>');$this.tipsContainer.append($tipsIcon);}
if(status=='0'){$tips=$('<span class="loadTips">没有更多数据了.</span>');}
$this.tipsContainer.append($tips);$this.find('#tips_container').remove();$this.append($this.tipsContainer);};$this.removeTips=function(){$this.tipsContainer.html('');$this.tipsContainer.remove();};$this.loadData=function(){if($this.loadFlag){$this.loadFlag=false;$this.addTips('1');var tempUrl="count="+options.pageSize+"&start="+(options.currentPage-1)*options.pageSize;options.url+=(options.url.indexOf("?")>-1?"&":"?")+tempUrl;$.ajax({url:options.url,data:options.qDatas,type:options.type,success:function(data){if(data){if(typeof data=='string')data=JSON.parse(data);setTimeout(function(){$this.removeTips();options.cbFn(data);},500);if(data.length>=options.pageSize){setTimeout(function(){$this.loadFlag=true;},500);}else{$this.loadFlag=false;$this.removeTips();$this.addTips('0');}}else{$this.loadFlag=false;$this.removeTips();$this.addTips('0');}}})}};$this.loadData();$(window).scroll(function(){var documentH=$(document.body).height();var winH=$(window).height();var scrollH=$(document).scrollTop();if(documentH-winH-scrollH<50){$this.loadData();}})};})();function addCommonUtil(){$.randomLong=function(){return(""+Math.random()).substring(2)};$.nullToEmpty=function(obj){if(obj==null||obj==undefined){return'';}
return obj;};$.isBlank=function(s){if(s==null){return true;}
return $.trim(s)=="";};$.isInteger=function(s){var i;for(i=0;i<s.length;i++){var c=s.charAt(i);if(((c<"0")||(c>"9")))return false;}
return true;};$.isDigit=function(s){return(s.replace(/\d/g,"").length==0);};$.isAlphaOrNum=function(s){return(s.replace(/^([a-zA-Z]|\d|_)*$/g,"").length==0);};$.isNumber=function(v){return(!isNaN(v)&&!/^\s+$/.test(v));};$.isTime=function(strTime,f){var fmtTime;if(f=="hh:mm"){fmtTime=/^(\d{2})\:(\d{2})$/;return fmtTime.test(strTime)&&RegExp.$1<24&&RegExp.$2<60;}
if(f=="hh:mm:ss"){fmtTime=/^(\d{2})\:(\d{2})\:(\d{2})$/;return fmtTime.test(strTime)&&RegExp.$1<24&&RegExp.$2<60&&RegExp.$3<60;}
if(f=="hhmm"){fmtTime=/^(\d{2})(\d{2})$/;return fmtTime.test(strTime)&&RegExp.$1<24&&RegExp.$2<60;}
if(f=="hhmmss"){fmtTime=/^(\d{2})(\d{2})(\d{2})$/;return fmtTime.test(strTime)&&RegExp.$1<24&&RegExp.$2<60&&RegExp.$3<60;}};$.isEnglish=function(s){var re=/^[A-Za-z|//|\s]+$/g;re.lastIndex=0;return re.test(s);};$.isChinese=function(s){var re=/^([\u4E00-\u9FA5]|[\uFE30-\uFFA0])*$/;re.lastIndex=0;return re.test(s);};$.isEnglishChinese=function(s){var re=/^[A-Za-z|//|\s|\u4E00-\u9FA5|\uFE30-\uFFA0]+$/g;re.lastIndex=0;return re.test(s);};$.isInChinese=function(s){return(s.length!=s.replace(/[^\x00-\xff]/g,"**").length);};$.upperCase=function(input){if(!$.isBlank($(input).val())){$(input).val($(input).val().toUpperCase());}};$.dateDiff=function(sDate1,sDate2){var splitReg='-';if(sDate1.indexOf('/')>-1){splitReg='/';}
var sDate1Arry=sDate1.split(splitReg);var sDate2Arry=sDate2.split(splitReg);var date1=new Date(sDate1Arry[0],sDate1Arry[1]-1,sDate1Arry[2]);var date2=new Date(sDate2Arry[0],sDate2Arry[1]-1,sDate2Arry[2]);return(date1-date2)/1000/60/60/24;};$.dateMinDiff=function(sDate1,sDate2){if($.isBlank(sDate1)||$.isBlank(sDate2)){throw new Error("参数1和参数2都不能为空");}
sDate1=$.trim(sDate1);sDate2=$.trim(sDate2);if(sDate1.length!=16&&sDate1.length!=5){throw new Error("时间格式必须为：yyyy-MM-dd hh:mm格式或yyyy/MM/dd hh:mm格式或hh:mm");}else if(sDate1.length==5){sDate1="1990-01-01 "+sDate1;sDate2="1990-01-01 "+sDate2;}
var splitReg='-';if(sDate1.indexOf('/')>-1){splitReg='/';}
var arr1=sDate1.split(" ");var arr2=sDate2.split(" ");var sDate1Arry=arr1[0].split(splitReg);var sDate2Arry=arr2[0].split(splitReg);var timeArr1=arr1[1].split(":");var timeArr2=arr2[1].split(":");var date1=new Date(sDate1Arry[0],sDate1Arry[1]-1,sDate1Arry[2],timeArr1[0],timeArr1[1]);var date2=new Date(sDate2Arry[0],sDate2Arry[1]-1,sDate2Arry[2],timeArr2[0],timeArr2[1]);return(date1-date2)/1000/60;};$.str2Date=function(dateStr,formatStr){var year=0;var start=-1;var len=dateStr.length;if((start=formatStr.indexOf('yyyy'))>-1&&start<len){year=dateStr.substr(start,4);}
var month=0;if((start=formatStr.indexOf('MM'))>-1&&start<len){month=parseInt(dateStr.substr(start,2),10)-1;}
var day=0;if((start=formatStr.indexOf('dd'))>-1&&start<len){day=parseInt(dateStr.substr(start,2),10);}
var hour=0;if(((start=formatStr.indexOf('HH'))>-1||(start=formatStr.indexOf('hh'))>1)&&start<len){hour=parseInt(dateStr.substr(start,2),10);}
var minute=0;if((start=formatStr.indexOf('mm'))>-1&&start<len){minute=dateStr.substr(start,2);}
var second=0;if((start=formatStr.indexOf('ss'))>-1&&start<len){second=dateStr.substr(start,2);}
return new Date(year,month,day,hour,minute,second);};$.date2Str=function(formatStr,date){formatStr=arguments[0]||"yyyy-MM-dd HH:mm:ss";date=arguments[1]||new Date();var str=formatStr;var Week=['日','一','二','三','四','五','六'];str=str.replace(/yyyy|YYYY/,date.getFullYear());str=str.replace(/yy|YY/,(date.getYear()%100)>9?(date.getYear()%100).toString():'0'+(date.getYear()%100));str=str.replace(/MM/,date.getMonth()>=9?(date.getMonth()+1):'0'+(date.getMonth()+1));str=str.replace(/M/g,date.getMonth());str=str.replace(/w|W/g,Week[date.getDay()]);str=str.replace(/dd|DD/,date.getDate()>9?date.getDate().toString():'0'+date.getDate());str=str.replace(/d|D/g,date.getDate());str=str.replace(/hh|HH/,date.getHours()>9?date.getHours().toString():'0'+date.getHours());str=str.replace(/h|H/g,date.getHours());str=str.replace(/mm/,date.getMinutes()>9?date.getMinutes().toString():'0'+date.getMinutes());str=str.replace(/m/g,date.getMinutes());str=str.replace(/ss|SS/,date.getSeconds()>9?date.getSeconds().toString():'0'+date.getSeconds());str=str.replace(/s|S/g,date.getSeconds());return str;};$.addDate=function(date,day,splitStr){if($.type(date)==="string")date=$.str2Date(date,"yyyy-MM-dd");var y=date.getFullYear(),m=date.getMonth(),d=date.getDate();var newDate=new Date(y,m,d+day);splitStr=splitStr?splitStr:"-";y=newDate.getFullYear();m=newDate.getMonth()+1;d=newDate.getDate();return y+splitStr+(m<10?"0"+m:m)+splitStr+(d<10?"0"+d:d);};$.getProvinceByCard=function(idCard){var vcity={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};var province=idCard.substr(0,2);return vcity[province];};$.getBirthday=function(card){try{card=(card||"").toUpperCase();var len=card.length;if(len=='15'){var re_fifteen=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/;var arr_data=card.match(re_fifteen);var year=arr_data[2];var month=arr_data[3];var day=arr_data[4];var birthday=new Date('19'+year+'/'+month+'/'+day);if($.verifyBirthday('19'+year,month,day,birthday)){return year+"-"+month+"-"+day;}else{return null;}}
if(len=='18'){var re_eighteen=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/;var arr_data=card.match(re_eighteen);var year=arr_data[2];var month=arr_data[3];var day=arr_data[4];var birthday=new Date(year+'/'+month+'/'+day);if($.verifyBirthday(year,month,day,birthday)){return year+"-"+month+"-"+day;}else{return null;}}}catch(e){return null;}};$.verifyBirthday=function(year,month,day,birthday){var now=new Date();var now_year=now.getFullYear();if(birthday.getFullYear()==year&&(birthday.getMonth()+1)==month&&birthday.getDate()==day){var time=now_year-year;if(time>=0&&time<=100){return true;}
return false;}
return false;};$.checkParity=function(card){card=$.changeFivteenToEighteen(card);var len=card.length;if(len=='18'){var arrInt=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var arrCh=new Array('1','0','X','9','8','7','6','5','4','3','2');var cardTemp=0,i,valnum;for(i=0;i<17;i++){cardTemp+=card.substr(i,1)*arrInt[i];}
valnum=arrCh[cardTemp%11];if(valnum==card.substr(17,1)){return true;}
return false;}
return false;};$.changeFivteenToEighteen=function(card){if(card.length=='15'){var arrInt=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var arrCh=new Array('1','0','X','9','8','7','6','5','4','3','2');var cardTemp=0,i;card=card.substr(0,6)+'19'+card.substr(6,card.length-6);for(i=0;i<17;i++){cardTemp+=card.substr(i,1)*arrInt[i];}
card+=arrCh[cardTemp%11];return card;}
return card;};$.checkCard=function(str){var card=str.toUpperCase();if(card===''){return false;}
var isCardRegx=/(^\d{15}$)|(^\d{17}(\d|X)$)/;if(isCardRegx.test(card)===false){return false;}
var sf=$.getProvinceByCard(card);if($.isBlank(sf)){return false;}
var birthDay=$.getBirthday(card);if($.isBlank(birthDay)){return false;}
if($.checkParity(card)===false){return false;}
return true;};$.parseIdCard=function(card){if($.checkCard(card)==false){return null;}
var json={};json.birthDay=$.getBirthday(card);json.sf=$.getProvinceByCard(card);if(card.length==15){json.sex=parseInt(card.substring(14,1),10)%2?"男":"女";}else if(card.length==18){json.sex=parseInt(card.substring(17,1),10)%2?"男":"女";}
return json;};$.renderLatpl=function(mbid,data){var htm='';laytpl($('#'+mbid).html()).render(data,function(html){htm=html;});return htm;};$.getKhtq=function(){return $.cookie("KH_TQ_PT");};$.qx=function(arr){var _mkbh=$('#_gnmks').attr("mkbh");if(_mkbh){var _gnmks=$('#_gnmks').text();if(_gnmks){var json=$.parseJSON(_gnmks);json=json[_mkbh];$(arr).each(function(){var gnbh=$(this).attr("gnbh");if(json[gnbh]==null){$(this).hide();}});}}};$.qx2=function(gnbh){var _mkbh=$('#_gnmks').attr("mkbh");if(_mkbh){var _gnmks=$('#_gnmks').text();if(_gnmks){var json=$.parseJSON(_gnmks);json=json[_mkbh];if(json[gnbh]){return true;}}}
return false;};$.reportList=function(options){var key=$.randomLong()+'';if(!top.$$displaytag_allTitleMap){top.$$displaytag_allTitleMap={};}
top.$$displaytag_allTitleMap[key]=options.allTitle;var veLayer=new VeLayer();veLayer.open({content:"/webcomponent/t_report_list/edit?titleKey="+key+"&mkbh="+options.mkbh+"&gnbh="+options.gnbh,area:['840px','520px'],maxmin:false,top:true,end:function(){delete top.$$displaytag_allTitleMap[key];}})};$.thousandBit=function(s,p){p=p||2;s=s+''||'';var f='';if(s.indexOf('-')>-1){f='-';s=s.split('-')[1];}
if(/[^0-9\.]/.test(s))return'0.00';s=s.replace(/^(\d*)$/,'$1.');s=(s+'00').replace(/(\d*\.\d\d)\d*/,'$1');s=s.replace('.',',');var re=/(\d)(\d{3},)/;while(re.test(s)){s=s.replace(re,'$1,$2');}
s=s.replace(/,(\d\d)$/,'.$1');return f+s.replace(/^\./,'0.')}
$.deleThousandBit=function(s){var val=s||'0';return Number(val.replace(/,+/g,''))||'';}}
function addRMBUpperCase(){$.RMBUpperCase=function(currencyDigits){var MAXIMUM_NUMBER=99999999999.99;var CN_ZERO="零";var CN_ONE="壹";var CN_TWO="贰";var CN_THREE="叁";var CN_FOUR="肆";var CN_FIVE="伍";var CN_SIX="陆";var CN_SEVEN="柒";var CN_EIGHT="捌";var CN_NINE="玖";var CN_TEN="拾";var CN_HUNDRED="佰";var CN_THOUSAND="仟";var CN_TEN_THOUSAND="万";var CN_HUNDRED_MILLION="亿";var CN_SYMBOL="人民币";var CN_DOLLAR="元";var CN_TEN_CENT="角";var CN_CENT="分";var CN_INTEGER="整";var integral;var decimal;var outputCharacters;var parts;var digits,radices,bigRadices,decimals;var zeroCount;var i,p,d;var quotient,modulus;currencyDigits=currencyDigits.toString();if(currencyDigits==""){alert("请输入小写金额！");return"";}
if(currencyDigits.match(/[^,.\d]/)!=null){alert("小写金额含有无效字符！");return"";}
if((currencyDigits).match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/)==null){alert("小写金额的格式不正确！");return"";}
currencyDigits=currencyDigits.replace(/,/g,"");currencyDigits=currencyDigits.replace(/^0+/,"");if(Number(currencyDigits)>MAXIMUM_NUMBER){alert("金额过大，应小于1000亿元！");return"";}
parts=currencyDigits.split(".");if(parts.length>1){integral=parts[0];decimal=parts[1];decimal=decimal.substr(0,2);}
else{integral=parts[0];decimal="";}
digits=new Array(CN_ZERO,CN_ONE,CN_TWO,CN_THREE,CN_FOUR,CN_FIVE,CN_SIX,CN_SEVEN,CN_EIGHT,CN_NINE);radices=new Array("",CN_TEN,CN_HUNDRED,CN_THOUSAND);bigRadices=new Array("",CN_TEN_THOUSAND,CN_HUNDRED_MILLION);decimals=new Array(CN_TEN_CENT,CN_CENT);outputCharacters="";if(Number(integral)>0){zeroCount=0;for(i=0;i<integral.length;i++){p=integral.length-i-1;d=integral.substr(i,1);quotient=p/4;modulus=p%4;if(d=="0"){zeroCount++;}else{if(zeroCount>0)
{outputCharacters+=digits[0];}
zeroCount=0;outputCharacters+=digits[Number(d)]+radices[modulus];}
if(modulus==0&&zeroCount<4){outputCharacters+=bigRadices[quotient];zeroCount=0;}}
outputCharacters+=CN_DOLLAR;}
if(decimal!=""){for(i=0;i<decimal.length;i++){d=decimal.substr(i,1);if(d!="0"){outputCharacters+=digits[Number(d)]+decimals[i];}}}
if(outputCharacters==""){outputCharacters=CN_ZERO+CN_DOLLAR;}
if(decimal==""){outputCharacters+=CN_INTEGER;}
outputCharacters=CN_SYMBOL+outputCharacters;return outputCharacters;};}
function addWeekFn(){$.fn.week=function(){this.unbind("keydown");this.keydown(function(event){if(event.keyCode==8||event.keyCode==46){return true;}
var keycode=event.keyCode;if(parseInt(keycode)<104&&parseInt(keycode)>96){keycode=parseInt(keycode)-48;}
var inputVal=String.fromCharCode(keycode+"");if(parseInt(inputVal)<1||parseInt(inputVal)>7||isNaN(parseInt(inputVal))){return false;}
var values="";if($(this).val()==""){values=[];}else{values=$(this).val().split("/");}
var arr=[];var flag=true;for(var i=0;i<values.length;i++){if(parseInt(values[i])>=1&&parseInt(values[i])<=7){if(values[i]==inputVal){flag=false;}else{arr.push(values[i]);}}}
if(flag){arr.push(inputVal);}
arr.sort(function(val1,val2){if(parseInt(val1)>parseInt(val2)){return 1;}else{return-1;}});$(this).val(arr.join("/"));return false;});};}
function addTipsAndPlaceHolder(){$(document).on("mouseenter","[vetitle]",function(event){var dom=this;var title=$(dom).attr("vetitle");if(title){var index=layer.tips(title,$(dom),{tips:[1,'#1ec1ae'],time:0});$(dom).on("mouseleave",function(){layer.close(index);});}});$(document).ready(function(){$.qx($("input[gnbh],a[gnbh]"));$('table.tableList').highlightTableRows();if($("[placeholder]").placeholder)$("[placeholder]").placeholder();});$(document).on("DOMNodeRemoved",function(event){clearLayer($(event.target));});function clearLayer($dom){var layerIndex=$dom.attr("layerIndex");if(layerIndex)layer.close(layerIndex);var childs=$dom.find("*");for(var i=0;i<childs.length;i++){var $domItem=childs.eq(i);var layerIndex=$domItem&&$domItem.attr("layerIndex");if(layerIndex)layer.close(layerIndex);}}}
$.add=function(x,y){var b=new Decimal(x).plus(y);return b.toNumber();};$.sub=function(x,y){var b=new Decimal(x).sub(y);return b.toNumber();};$.mul=function(x,y){var b=new Decimal(x).mul(y);return b.toNumber();};$.div=function(x,y){var b=new Decimal(x).div(y);return b.toNumber();};$.sr4=function(num,len){return $.sr(num,len,4);};$.sr=function(num,len,sr){var arr=String(num).split("."),currVal=0,tempArr=0;if(arr.length===1)return num;if(parseInt(len,10)===0){currVal=parseInt(arr[1].charAt(0));tempArr=(currVal>sr?1:0);return parseInt(arr[0])+parseInt(tempArr);}else if(len>=arr[1].length){return num;}else{currVal=parseInt(arr[1].charAt(len));tempArr=(parseInt(arr[1].substring(0,len))+(currVal>sr?1:0))/Math.pow(10,len);if(tempArr>=1){arr[0]=parseInt(arr[0],10)+1;return arr[0];}else{arr[1]=String(tempArr).substring(2);return arr[1]===""?arr[0]:arr.join(".");}}};$.arr_sum=function(arr){var result=0;if(arr.length==1){return arr[0];}else if(arr.length>1){result=arr[0];for(var i=1;i<arr.length;i++){result=new Decimal(result).plus(arr[i]);}}
return result;};$.setLocation=function(opts){opts=$.extend({},{pt:"ASMS",ak:"GntvaeQ0BChmEzObGiwO1k0F&coor=bd09ll",cityCbFn:null,lonLatCbFn:null},opts)
function complete(){if(typeof opts.complete=='function')opts.complete();}
$.ajax({type:"post",dataType:'jsonp',url:"https://api.map.baidu.com/location/ip?ak="+opts.ak+'&s=1',success:function(data){if(data&&data["content"]&&data["content"]["point"]){var x=data["content"]["point"]["x"];var y=data["content"]["point"]["y"];if(!$.isBlank(x)&&!$.isBlank(y)){if(typeof opts.lonLatCbFn=='function')opts.lonLatCbFn(x,y);if(typeof opts.cityCbFn=='function'){$.ajax({type:"post",dataType:'json',data:"lon="+x+"&lat="+y+"&pt="+opts.pt,url:"/webcomponent/poi_kj/getLocationCity",success:opts.cityCbFn,error:opts.cityCbFn,complete:complete});}else{complete();}}else{complete();}}},error:function(){complete();}});}
$.fn.locationSearch=function(opts){opts=$.extend({},{lon:"",lat:"",cfmc:"",ddmc:"",callBack:null},opts);var map=new BMap.Map(this.attr("id"));map.centerAndZoom(new BMap.Point(opts.lon,opts.lat),12);var searchComplete=function(results){if(transit.getStatus()!=BMAP_STATUS_SUCCESS){return;}
var plan=results.getPlan(0);if(opts.callBack){opts.callBack({duration:plan.getDuration(true),distance:plan.getDistance(true),data:results})}}
var transit=new BMap.DrivingRoute(map,{renderOptions:{map:map},onSearchComplete:searchComplete});transit.search(opts.cfmc,opts.ddmc);}
function VeLayer(){}
VeLayer.prototype.open=function(options){this.options=$.extend(true,{type:2,title:"",shadeClose:false,maxmin:true,top:false},options);if(this.options["hideScroll"]){var overflowVal=$(document.body).css("overflow");$(document.body).css("overflow","hidden");var endFn=this.options.end||function(){};this.options.end=function(){$(document.body).css("overflow",overflowVal);endFn.call(this);};}
if(this.options.top){var prewin=window.top;this.openId=prewin.layer.open(this.options);if(options.full){prewin.layer.full(this.openId);}}else{this.openId=layer.open(this.options);if(options.full){layer.full(this.openId);}}
return layer;};VeLayer.prototype.close=function(){layer.close(this.openId);};VeLayer.prototype.load=function(msg){msg=msg?msg:'系统正在处理中，请稍后...';this.openId=layer.msg("<div style='white-space: nowrap'>"+msg+"</div>",{icon:16,time:0,shade:[0.1,'#000000']});};VeLayer.prototype.tips=function(content,follow,options){layer.tips(content,follow,options);};VeLayer.prototype.msg=function(msg,options,cbFn){var options=$.extend(true,{icon:16,time:0,top:false},options);if(options.top){this.openId=window.top.layer.msg(msg,options,cbFn);}else{this.openId=layer.msg(msg,options,cbFn);}};VeLayer.prototype.alert=function(msg,options){var options=$.extend(true,{title:"提示信息",time:0,shade:[0.1,'#000000']},options);this.openId=layer.alert(msg,options);};VeLayer.prototype.tips=function(msg,options){var options=$.extend(true,{time:3000},options);layer.tips(msg,options);};VeLayer.prototype.confirm=function(msg,callback,callback2){layer.confirm(msg,{icon:3,title:'确认信息'},function(index){layer.close(index);callback();},function(index){layer.close(index);if(callback2)callback2();});};VeLayer.prototype.success=function(msg,callback){if(this.openId){layer.close(this.openId);}
layer.alert(msg,{icon:6,skin:'layer-ext-moon',end:function(){callback();}});}
VeLayer.prototype.warning=function(msg,callback){if(this.openId){layer.close(this.openId);}
layer.alert(msg,{icon:0,skin:'layer-ext-moon',end:function(){callback();}});};VeLayer.prototype.fail=function(msg,callback){if(this.openId){layer.close(this.openId);}
layer.alert(msg,{icon:5,skin:'layer-ext-moon',end:function(){callback();}});}
window.VeLayer=VeLayer;$.savePrintRecord=function(qDatas,callback){callback=callback||$.noop;if(qDatas){if($.type(qDatas)==="string"){try{qDatas=JSON.parse(qDatas);}catch(e){throw new Error("参数类型错误:"+e);}}else if($.type(qDatas)==="object"){qDatas=qDatas;}else{throw new Error("参数类型错误");}}else{qDatas={};}
$.ajax({url:"/asms/ticket/order/zcd/asmskh_khdd_print/insert",type:"post",data:qDatas,success:function(res){callback(res);}})};$.mergeTableColumn=function(tableId,columnId,formatFn){var columns=[];function merge(arr,formatFn){var lastVal="",delArr=[],rowSpanNum=1;for(var i=0,len=arr.length;i<len;i++){var thisVal=arr[i].html();thisVal=$.type(formatFn)==="function"?formatFn(thisVal):thisVal;if(i===0){lastVal=thisVal;}else{if(lastVal===thisVal){rowSpanNum+=1;delArr.push(arr[i]);}
if(lastVal!==thisVal){if(rowSpanNum!==1){arr[i-rowSpanNum].attr("rowspan",rowSpanNum);clearTd(delArr);}
lastVal=thisVal;rowSpanNum=1;}}}
if(rowSpanNum>1){arr[len-rowSpanNum].attr("rowspan",rowSpanNum);clearTd(delArr);}}
function clearTd(arr){for(var i=0,len=arr.length;i<len;i++){arr[i].remove();}
arr.length=0;}
$("#"+tableId).find("tbody").find("tr").each(function(){var $tds=$(this).find("td");columns.push($tds.eq(columnId));});merge(columns,formatFn);};function parseQueryString(url){var reg_url=/^[^\?]+\?([\w\W]+)$/,reg_para=/([^&=]+)=([\w\W]*?)(&|$|#)/g,arr_url=reg_url.exec(url),ret={};if(arr_url&&arr_url[1]){var str_para=arr_url[1],result;while((result=reg_para.exec(str_para))!=null){ret[result[1]]=result[2];}}
return ret;}})(jQuery,window,document);;(function($,window,document){window.$$components={};window.GLOBALVERSION=window.GLOBALVERSION?window.GLOBALVERSION:"1";window.veCallOut=function(phone,phoneType){var url='/asms/callcenter/callbar/viewcallout?phone='+phone+'&phoneType='+phoneType;layer.open({type:2,title:'呼出',area:['360px','180px'],content:url});}
window.LogInfo=function(message){if(window.console&&console.error)console.error(message);};window.requireJs=function(jsPath){if(!jsPath)return;var paths=[];if($.type(jsPath)==="string"){paths.push(jsPath);}else if($.type(jsPath)==="array"){paths=jsPath;}else{LogInfo("requireJs执行失败，参数类型错误。");return;}
try{for(var i=0,len=paths.length;i<len;i++){var url=paths[i];if(window.$$components[url])continue;window.$$components[url]=url;if(url.indexOf("?")>-1)url+="&v="+window.GLOBALVERSION;else url+="?v="+window.GLOBALVERSION;$.ajax({url:url,dataType:"script",async:false,cache:true,error:function(msg){LogInfo(msg);}});}}catch(e){LogInfo(e);}};window.requireJs=requireJs;requireJs("/static/core/decimal.js");$.toAsmsExport=function(mkbh,bbh,curl,alltitle,allexpfield,exportUrl){$.toExport(mkbh||'',bbh||'',curl||'',alltitle||'',allexpfield||'','ASMS',exportUrl||'');};$.toB2GExport=function(mkbh,bbh,curl,alltitle,allexpfield,exportUrl){$.toExport(mkbh||'',bbh||'',curl||'',alltitle||'',allexpfield||'','B2G',exportUrl||'');};$.toB2BExport=function(mkbh,bbh,curl,alltitle,allexpfield,exportUrl){$.toExport(mkbh||'',bbh||'',curl||'',alltitle||'',allexpfield||'','B2B',exportUrl||'');};$.toExport=function(mkbh,bbh,curl,alltitle,allexpfield,pt,exportUrl){try{var velayerExport=new VeLayer();var url='/webcomponent/export/toExport?mkbh='+mkbh+'&bbh='+bbh+'&pt='+pt;top.$$alltitle=alltitle||"导出";if(!$.isBlank(curl)&&!$.isBlank(exportUrl)){var indexParam=curl.indexOf('?');var indexParamExportUrl=exportUrl.indexOf('?');exportUrl=indexParamExportUrl>0?exportUrl.substring(0,indexParam):exportUrl;if(indexParam>0){curl=exportUrl+curl.substring(indexParam);}else{curl=exportUrl;}}
top.$$curl=curl;top.$$allexpfield=allexpfield;velayerExport.open({content:url,area:['780px','540px'],maxmin:false,top:true,"title":"导出"});}catch(e){LogInfo(e);}}
$.showCalculator=function(){try{layer.open({title:"计算器",type:2,content:"/static/core/component/calc/calculator.html",area:["465px","440px"]});}catch(e){LogInfo(e);}};$.fn.priceCalendar=function(options,cbFn){requireJs("/static/core/component/common/Calendar.js");requireJs("/static/core/component/common/jquery.calendar.js");return this.addCalendar(options,cbFn);}
$.closeLeftMenu=function(){window.top.switchMenuHandler(null);};$.strLike=function(org,search){if($.isBlank(org)){return false;}
return org.indexOf(search)>-1;}
$.strLikeIndex=function(org,search){if($.isBlank(org)){return-1;}
if($.isBlank(search)){return 0;}
return org.indexOf(search);}
$.gnCitySearch=function(data,value){value=$.trim(value).toUpperCase();if(value==data.id){return 0;}
if(value==data.pyjp){return 0.1;}
if(value==data.py){return 0;}
if(value==data.zwjc){return 0.1;}
if(value==data.name){return 0;}
var idx=$.strLikeIndex(data.id,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.pyjp,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.py,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.zwjc,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.name,value);if(idx>-1){return idx+1;}
return-1;}
$.gnCitySearchNew=function(data,value){value=$.trim(value).toUpperCase();if(value==data.value){return 0;}
if(value==data.szm){return 0.1;}
if(value==data.echo){return 0.1;}
if(value==data.mc){return 0;}
if(value==data.searchkey){return 0.1;}
if(value==data.id){return 0;}
var idx=$.strLikeIndex(data.value,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.szm,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.echo,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.mc,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.searchkey,value);if(idx>-1){return idx+1;}
idx=$.strLikeIndex(data.id,value);if(idx>-1){return idx+1;}
return-1;}
$.fn.addGjHotCity=function(options,dataTab,dataHot,dataList){var oInput=this.get(0);manager.clear(oInput);if(!oInput)return;var rightWidth=180;var tabWidth=25;if(dataTab&&dataTab.length>4){rightWidth=5;tabWidth=10;}
var args={"options":{"_hasPage_":false,type:1,typeValue:dataHot,hiddenName:options.hiddenName,width:options.width,pageSize:options.pageSize,title:options.title,fn1:options.fn1,autoClear:false},"filterFn":options.filterFn,"cbFn":options.cbFn};var pulldownObj1=$(oInput).addPulldown(null,args);var args2={"options":{type:2,typeValue:"/webcomponent/kjcommdata/getLikeCity?notitle=1&gngj=0",pageSize:10,"_hasPage_":false,dataType:"dynamic",hiddenName:options.hiddenName,width:options.width,pageSize:options.pageSize,title:options.title,fn1:options.fn1,autoClear:false},"filterFn":options.filterFn,"cbFn":options.cbFn};var pulldownObj2=$(oInput).addPulldown(null,args2);var tabObj=$(oInput).addVeNTab({usetype:"composite",hiddenName:options.hiddenName,type:1,typeValue:dataTab,tabStyle:2},options.cbFn);$(this).on("click",oInputClickHandler).on("keyup",oInputKeyupHandler);manager.addEvent(tabObj.id,"click",oInputClickHandler);manager.addEvent(pulldownObj2.id,"keyup",oInputKeyupHandler);function oInputClickHandler(event){tabObj.show();pulldownObj1.hide();pulldownObj2.hide();}
function oInputKeyupHandler(event){tabObj.hide();if($(oInput).val()===""&&(dataHot&&dataHot.length>0)){pulldownObj1.elemKeyUpHandler(event);pulldownObj2.hide(false);}else if($(oInput).val()===""){tabObj.show();pulldownObj1.hide();pulldownObj2.hide();}else{pulldownObj1.hide(false);pulldownObj2.elemKeyUpHandler(event);}
$(oInput).focus();}};$.fn.mpjd=function(opts,callBack){try{requireJs("/static/data/mpjd.js");opts=$.extend(true,{hiddenName:null,width:240,type:1,typeValue:mpjd,pageSize:18,title:"可输入景点首字母、汉字",preWidth:"50%",subfixWidth:"50%"},opts);opts.fn1=function(data){var spanHtml='<span style="width:'+opts.preWidth+'" title="'+data.py+'">'+data.py+'</span>';spanHtml+='<span class="right" style="width:'+opts.subfixWidth+'" title="'+data.py+'">'+data.name+'</span>';return spanHtml;};function filter(data,value){var name=(data.name||"").toUpperCase(),py=(data.py||"").toUpperCase(),value=$.trim(value).toUpperCase();if(value==name){return 0;}
if(value==py){return 0;}
var index=$.strLikeIndex(name,value);if(index>-1)return index+1;index=$.strLikeIndex(py,value);if(index>-1)return index+1;return-1;}
this.addPulldown("single",{options:opts,filterFn:filter,cbFn:callBack});}catch(e){LogInfo(e);}};$.fn.mpjqName=function(opts,callBack){try{var opts1=$.extend({},{width:210,typeValue:"/webcomponent/mp/mp_web/queryAuthorityScenery?pt=ASMS",pageSize:10,title:"可输入名称、省份、城市关键字查询",dataType:"dynamic",autoSetValue:false,simpleData:{name:"jqmc",id:"jqid"}},opts);opts1.fn1=function(data){var spanHtml='<span style="width: 100%" title="'+data.jqmc+'">'+data.jqmc+'</span>';return spanHtml;};var filter=function(data,value){var jqid=data.jqid.toUpperCase();var jqmc=(data.jqmc).toUpperCase();if(jqid==value||jqmc==value)return 1;var index=$.strLikeIndex(jqid,value);if(index>-1)return index+1;index=$.strLikeIndex(jqmc,value);if(index>-1)return index+1;return-1;};this.addPulldown("single",{options:opts1,filterFn:filter,cbFn:callBack});}catch(e){LogInfo(e);}};$.fn.addCabinCore=function(opts,callBack){try{opts=$.extend(true,{hkgs:''},opts);requireJs("/static/fl/lticket/jquery.space.js");var url='/webcomponent/ajax/genCabin_'+opts.hkgs;var options=$.extend({},{type:'2',typeValue:url},opts);this.addSpace(options,opts.callBack);}catch(e){LogInfo(e);}};$.fn.addDynamicCabinCore=function(opts,callBack){debugger;try{opts=$.extend(true,{usetype:2,url:"",hkgsId:''},opts);requireJs("/static/fl/lticket/jquery.space.js");var url='/webcomponent/ajax/genCabin_'+$("#"+opts.hkgsId).val();var options=$.extend({},{type:'2',typeValue:url},opts);this.addSpace(options,opts.callBack);}catch(e){LogInfo(e);}};$.fn.hyXflx=function(options,cbFn){try{requireJs("/static/core/component/common/jquery.multselect.js");var url="/webcomponent/ajax/genHyXflx";var $this=this;$.ajax({url:url,dataType:"json",async:false,success:function(json){json.unshift({"id":"",name:"==请选择=="});var opts=$.extend(true,{type:1,typeValue:json,usetype:"radio",width:130,height:150},options);$this.multselect(opts,cbFn);}});}catch(e){LogInfo(e);}}
$.fn.showCheckBox=function(opts){try{opts=$.extend(true,{data:[],boxName:'',defaultChecked:'',valueInputId:'',fgf:',',className:'',itemWidth:'70px',extendParam:{},callBack:function(){}},opts);requireJs("/static/core/component/common/jquery.office.js");var checkedArr;if(!$.isBlank(opts.defaultChecked)){if($.trim(opts.defaultChecked)=='---'){checkedArr=['---'];}else{checkedArr=opts.defaultChecked.split(opts.fgf);}}
var options=$.extend({},{type:'1',typeValue:opts.data,itemWidth:opts.itemWidth,defaultChecked:checkedArr,name:opts.boxName,clsName:opts.className},opts.extendParam);return this.addOffice(options,function(data,allchecked){if(!$.isBlank(opts.valueInputId)){if(allchecked){$('#'+opts.valueInputId).val('---');}else{var val=[];for(var key in data){if(data.hasOwnProperty(key)){val.push(key);}}
$('#'+opts.valueInputId).val(val.join(opts.fgf));}}
opts.callBack();});}catch(e){LogInfo(e);}}
$.fn.enumCheckBox=function(options){try{var options=$.extend(true,{split:"/"},options);requireJs("/static/data/enumData.js");$(this).empty();if(options.data){var data=eval(options.data);for(var i=0;i<data.length;i++){if(options.filter&&options.filter(data[i])){continue;}
var selected="";if(options.value&&(options.value+options.split).indexOf(data[i].name+options.split)>-1){selected="checked='checked'";}
var radiotmp=$("<label style='width:20px;vertical-align: top;'><input type='checkbox' name='"+options.boxName+"' "+selected+" value='"+data[i].name+"'>"+data[i].value+"&nbsp;&nbsp;&nbsp;&nbsp;"+"</input></label>");for(var key in options.html){radiotmp.attr(key,options.html[key]);}
for(var key in options.event){radiotmp.on(key,options.event[key]);}
$(this).append(radiotmp);}}}catch(e){LogInfo(e);}}
$.fn.enumCheckBoxReadOnly=function(options){try{var options=$.extend(true,{split:"/"},options);requireJs("/static/data/enumData.js");$(this).empty();if(options.data){var data=eval(options.data);var optionsCount=0;var radiotmp;for(var i=0;i<data.length;i++){if(options.filter&&options.filter(data[i])){continue;}
var selected="";if(options.value&&(options.value+options.split).indexOf(data[i].name+options.split)>-1){radiotmp=$("<label style='color:green'  name='"+options.boxName+"' >&nbsp;&nbsp;"+data[i].value+"</label>");optionsCount++;}
$(this).append(radiotmp);}
if(optionsCount==0){radiotmp=$("<label style='color:red'  name='"+options.boxName+"' >&nbsp;&nbsp;未设置</label>");$(this).append(radiotmp);}}}catch(e){LogInfo(e);}}
$.enumValue=function(options){requireJs("/static/data/enumData.js");var data=eval(options.data);for(var i=0;i<data.length;i++){if(options.name==data[i].name){return data[i].value;}}
return"";}
$.fn.addVPulldown=function(options,callback,filterFn){try{requireJs("/static/core/component/common/jquery.pulldown.js");this.options=$.extend(true,{},options);var originalFilterFn=function(data,value){var name=data.name,py=(data.py||"").toUpperCase();value=value.toUpperCase();if(py==value||name==value)return 0;var indx=$.strLikeIndex(py,value);if(indx>-1)return indx+1;indx=$.strLikeIndex(name,value);if(indx>-1)return indx+1;return-1;};this.addPulldown("single",{options:this.options,filterFn:filterFn||originalFilterFn,elemBeforeClick:options.elemBeforeClick||function(){return true},cbFn:callback||function(){}});return this;}catch(e){LogInfo(e);}};$.fn.getPosition=function(width,height){var chinkHeight=2;var pointer=$(this).offset();var documentWidth=$(document).width();width=parseInt(width);height=parseInt(height);var left=0;if(width>=documentWidth){left=0;}if(documentWidth>=(pointer.left+width)){left=pointer.left;}else{left=documentWidth-width;}
return{left:left,top:pointer.top+$(this).height()+chinkHeight}};})(jQuery,window,document);function Calendar(){var unlockNum=true;var solarTerm=new Array("小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至");var DifferenceInMonth=new Array(1272060,1275495,1281180,1289445,1299225,1310355,1321560,1333035,1342770,1350855,1356420,1359045,1358580,1355055,1348695,1340040,1329630,1318455,1306935,1297380,1286865,1277730,1274550,1271556);var SF={"0101":"元旦","0214":"情人节","0305#":"学雷锋纪念日","0308":"妇女节","0312#":"植树节","0315#":"消费者权益日","0401#":"愚人节","0501":"劳动节","0504":"青年节","0601":"儿童节","0701":"建党节","0801":"建军节","0910":"教师节","1001":"国庆节","1224":"平安夜","1225":"圣诞节"};var LF={"0101":"春节","0115":"元宵节","0505":"端午节","0815":"中秋节","0707":"七夕","0909":"重阳节","1010#":"感恩节","1208#":"腊八节","0100":"除夕"};var CalendarData=new Array(100),madd=new Array(12),tgString="甲乙丙丁戊己庚辛壬癸",dzString="子丑寅卯辰巳午未申酉戌亥",numString="一二三四五六七八九十",monString="正二三四五六七八九十冬腊",weekString="日一二三四五六",sx="鼠牛虎兔龙蛇马羊猴鸡狗猪",cYear,cMonth,cDay,TheDate;CalendarData=new Array(0xA4B,0x5164B,0x6A5,0x6D4,0x415B5,0x2B6,0x957,0x2092F,0x497,0x60C96,0xD4A,0xEA5,0x50DA9,0x5AD,0x2B6,0x3126E,0x92E,0x7192D,0xC95,0xD4A,0x61B4A,0xB55,0x56A,0x4155B,0x25D,0x92D,0x2192B,0xA95,0x71695,0x6CA,0xB55,0x50AB5,0x4DA,0xA5B,0x30A57,0x52B,0x8152A,0xE95,0x6AA,0x615AA,0xAB5,0x4B6,0x414AE,0xA57,0x526,0x31D26,0xD95,0x70B55,0x56A,0x96D,0x5095D,0x4AD,0xA4D,0x41A4D,0xD25,0x81AA5,0xB54,0xB6A,0x612DA,0x95B,0x49B,0x41497,0xA4B,0xA164B,0x6A5,0x6D4,0x615B4,0xAB6,0x957,0x5092F,0x497,0x64B,0x30D4A,0xEA5,0x80D65,0x5AC,0xAB6,0x5126D,0x92E,0xC96,0x41A95,0xD4A,0xDA5,0x20B55,0x56A,0x7155B,0x25D,0x92D,0x5192B,0xA95,0xB4A,0x416AA,0xAD5,0x90AB5,0x4BA,0xA5B,0x60A57,0x52B,0xA93,0x40E95);madd[0]=0;madd[1]=31;madd[2]=59;madd[3]=90;madd[4]=120;madd[5]=151;madd[6]=181;madd[7]=212;madd[8]=243;madd[9]=273;madd[10]=304;madd[11]=334;function GetBit(m,n){return(m>>n)&1}
function e2c(){TheDate=(arguments.length!=3)?new Date():new Date(arguments[0],arguments[1],arguments[2]);var total,m,n,k;var isEnd=false;var tmp=TheDate.getFullYear();total=(tmp-1921)*365+Math.floor((tmp-1921)/4)+madd[TheDate.getMonth()]+TheDate.getDate()-38;if(TheDate.getYear()%4==0&&TheDate.getMonth()>1){total++}
for(m=0;;m++){k=(CalendarData[m]<0xfff)?11:12;for(n=k;n>=0;n--){if(total<=29+GetBit(CalendarData[m],n)){isEnd=true;break}
total=total-29-GetBit(CalendarData[m],n)}
if(isEnd)break}
cYear=1921+m;cMonth=k-n+1;cDay=total;if(k==12){if(cMonth==Math.floor(CalendarData[m]/0x10000)+1){cMonth=1-cMonth}
if(cMonth>Math.floor(CalendarData[m]/0x10000)+1){cMonth--}}}
function GetcDateString(){var P=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448];var tmp="";if(unlockNum==false){tmp+=tgString.charAt((cYear-4)%10);tmp+=dzString.charAt((cYear-4)%12);tmp+="(";tmp+=sx.charAt((cYear-4)%12);tmp+=")年";}
if(cMonth<1){if(unlockNum==false){tmp+="(闰)";tmp+=monString.charAt(-cMonth-1);}else{tmp+=cMonth<10?"0"+(cMonth-2):(cMonth-2);}}else{if(unlockNum==false){tmp+=monString.charAt(cMonth-1);}else{tmp+=cMonth<10?"0"+cMonth:cMonth;}}
if(unlockNum==false){tmp+="月";tmp+=(cDay<11)?"初":((cDay<20)?"十":((cDay<30)?"廿":"三十"));if(cDay%10!=0||cDay==10){tmp+=numString.charAt((cDay-1)%10);}}else{tmp+=(cDay<10?"0"+cDay:cDay);if(cMonth==12&&cDay==((P[cYear-1900]&(65536>>12))?30:29)){tmp="0100";}}
return tmp;}
function GetLunarDay(solarYear,solarMonth,solarDay){if(solarYear<1921||solarYear>2020){return""}else{solarMonth=(parseInt(solarMonth)>0)?(solarMonth-1):11;e2c(solarYear,solarMonth,solarDay);return GetcDateString()}}
this.getst=function(date){var DifferenceInYear=31556926;var BeginTime=new Date(1901/1/1);BeginTime.setTime(947120460000);for(;date.getFullYear()<BeginTime.getFullYear();){BeginTime.setTime(BeginTime.getTime()-DifferenceInYear*1000);}
for(;date.getFullYear()>BeginTime.getFullYear();){BeginTime.setTime(BeginTime.getTime()+DifferenceInYear*1000);}
for(var M=0;date.getMonth()>BeginTime.getMonth();M++){BeginTime.setTime(BeginTime.getTime()+DifferenceInMonth[M]*1000);}
if(date.getDate()>BeginTime.getDate()){BeginTime.setTime(BeginTime.getTime()+DifferenceInMonth[M]*1000);M++;}
if(date.getDate()>BeginTime.getDate()){BeginTime.setTime(BeginTime.getTime()+DifferenceInMonth[M]*1000);M==23?M=0:M++;}
var JQ="";if(date.getDate()==BeginTime.getDate()){JQ+=solarTerm[M];}
return JQ;}
this.getsf=function(){var m,d;if(arguments.length==2){m=arguments[0];d=arguments[1];}else{m=arguments[0].getMonth()+1;d=arguments[0].getDate();}
m=SF[(m<10?"0"+m:m.toString())+(d<10?"0"+d:d.toString())];return m?m:'';}
this.getl=function(D,lockNum){unlockNum=lockNum;if(lockNum==false||lockNum=="false"){numString="一二三四五六七八九十";monString="正二三四五六七八九十冬腊";}
var yy=D.getFullYear();var mm=D.getMonth()+1;var dd=D.getDate();var ww=D.getDay();var ss=parseInt(D.getTime()/1000);if(yy<100)yy="19"+yy;return GetLunarDay(yy,mm,dd);}
this.getlf=function(D){var dayT=LF[this.getl(D,true)];return dayT?dayT:"";}
this.getls=function(D){var tmp=this.getl(D,false);var t=['','','',''];var s=tmp.indexOf('年');if(s!=-1){t[0]=tmp.substring(0,2);t[1]=tmp.substring(3,4);tmp=tmp.substring(6);s=tmp.indexOf('月');t[2]=tmp.substring(0,s);t[3]=tmp.substring(s+1);}
return t;}}
function ComponentManager(){this.componentCollection=new Object();this.eventCollection=new Object();}
ComponentManager.prototype._addComponent=function(component){this.componentCollection[component.id]=component;};ComponentManager.prototype._removeComponent=function(id){this.componentCollection[id]&&this.componentCollection[id].destroy();delete this.componentCollection[id];}
ComponentManager.prototype.addEvent=function(compId,evType,evName){if(!this.eventCollection[compId])this.eventCollection[compId]=new Array();this.eventCollection[compId].push({"evType":evType,"evName":evName});}
ComponentManager.prototype._removeEvent=function(compId){var events=this.eventCollection[compId];if(events&&events.length>0){for(var i=0;i<events.length;i++){this.componentCollection[compId].$elem.unbind(events[i]["evType"],events[i]["evName"]);}
delete this.eventCollection[compId];}}
ComponentManager.prototype.clear=function(domElement){domElement=domElement.length?domElement[0]:domElement;var ids=domElement.getAttribute("vetech-ids")||"";ids=ids?ids.split(","):[];for(var i=0;i<ids.length;i++){this._removeEvent(ids[i]);this._removeComponent(ids[i]);}
domElement.removeAttribute("vetech-ids");}
ComponentManager.prototype.manage=function(component){var domElement=component.elem;var ids=domElement.getAttribute("vetech-ids")||"";ids=ids?ids.split(","):[];ids.push(component.id);domElement.setAttribute("vetech-ids",ids.join(","));this._addComponent(component);}
ComponentManager.prototype.getComponent=function(compId){return this.componentCollection[compId];};window.manager=new ComponentManager();;(function($,window,document){$.fn.countryArea=function(options,cbFn){if(this.length==0)throw new Error("DOM绑定错误");var oInput=this.get(0);$(oInput).bind("click",function(ev){$(oInput).val("");if(options.hiddenName!=""&&$("#"+options.hiddenName).val()!==""){$("#"+options.hiddenName).val("");}
var value;if(options.countryHiddenId){value=$("#"+options.countryHiddenId).val();if(value){options.typeValue="/webcomponent/visa/kjcommvisa/getQzLqList?gjdm="+value;}else{$("#"+options.countryId).focus().click();return;}}
if(!options.editable){$(oInput).on("keydown",function(){return false;});}
var countryArea=new CountryArea(oInput,options,cbFn);countryArea.show();});};$.fn.countryArea.options={width:null,height:200,simpleData:{"id":"id","name":"name"},type:"2",typeValue:"",hiddenName:"",splitStr:",",hasAllChecked:false,countryId:"countryh",usetype:"mult",editable:false,fn1:null};function CountryArea(elem,options,cbFn){this.id="CountryArea-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.countryArea.options,options);this.data=[];this.dataBuffer=[];this.isShow=false;this.cbFn=cbFn;if(!(this.opts.fn1&&Object.prototype.toString.call(this.opts.fn1)==="[object Function]"))this.opts.fn1=null;if(!this.opts.hiddenName)this.opts.hiddenName=this.elem.id+"- hiddenInput";this.$hiddenInput=$(document.body).find("#"+this.opts.hiddenName);this.$container=$('<div class="vetech-mult-select"></div>');var cwidth=this.opts.width?this.opts.width:this.$elem.width();this.$container.css("width",cwidth);this.loadData();}
CountryArea.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data.data;_this.render();}});}};CountryArea.prototype.render=function(){if(this.data&&this.data.length==0){this.$container.append('<p style="padding:0px 10px;margin:0px;line-height: 30px;font-size: 12px;">对不起，暂无数据！</p>');}else{if(this.opts.usetype==="mult"&&this.opts.hasAllChecked){this.$AllCheckedLabel=$('<label title="全选" class="vetech-ms-list" style="font-weight:bold">全选</label>');this.$AllCheckedLabel.prepend($('<input type="checkbox"/>'));this.$container.append(this.$AllCheckedLabel);}else if(this.opts.usetype==="radio"&&this.opts.defaultValues){var value=this.opts.defaultValues[this.opts.simpleData.name]||"";var key=this.opts.defaultValues[this.opts.simpleData.id]||"";var $firstLabel=$('<label title="'+key+'" class="vetech-ms-list" style="font-weight:bold">'+value+'</label>');this.$container.append($firstLabel);this.dataBuffer.push({"data":this.opts.defaultValues,"$node":$firstLabel});}
for(var i=0;i<this.data.length;i++){var value=this.opts.fn1?this.opts.fn1(this.data[i]):this.data[i][this.opts.simpleData.name];var $label=$('<label title="'+value+'" class="vetech-ms-list">'+value+'</label>');if(this.opts.usetype==="mult"){var $checkbox=$('<input type="checkbox" value="'+this.data[i].id+'" />');$label.prepend($checkbox);}
this.dataBuffer.push({"data":this.data[i],"$node":$label});this.$container.append($label);}}
$(document.body).append(this.$container);this.bindEvent();this.writeValue();};CountryArea.prototype.show=function(){this.isShow=true;this.setPos();this.$container.css("visibility","visible");};CountryArea.prototype.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iTop=pointer.top+this.$elem.outerHeight();var iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop});return this;};CountryArea.prototype.hide=function(){if(!this.isShow)return;this.isShow=false;this.$container.css({"visibility":"hidden","left":0,"top":0});this.$elem.blur();};CountryArea.prototype.destroy=function(){this.$container.remove();if(this.$showArea)this.$showArea.html("");};CountryArea.prototype.bindEvent=function(){var _this=this;for(var i=0,len=this.dataBuffer.length;i<len;i++){var dataItem=this.dataBuffer[i];dataItem["$node"].find("input").on("change",deepBind(this,this.setValue));dataItem["$node"].on("click",deepBind(this,this.itemClickHandler,dataItem));}
$(document).on("click",function(ev){if(ev.target!==_this.elem)_this.destroy();});if(this.$AllCheckedLabel){this.$AllCheckedLabel.find("input").on("change",function(ev){_this.stopEvent(ev);for(var i=0,len=_this.dataBuffer.length;i<len;i++){var dataItem=_this.dataBuffer[i];dataItem["$node"].find("input").get(0).checked=this.checked;}
_this.setValue(ev);});this.$AllCheckedLabel.on("click",deepBind(this,this.stopEvent));}
if(this.opts.editable){this.$elem.on("keyup",function(){if(_this.checkedData&&_this.checkedData.values&&_this.$elem.val()===_this.checkedData.values.join(_this.opts.splitStr))return;_this.$hiddenInput.val("");});}};CountryArea.prototype.itemClickHandler=function(event,dataItem){if(this.opts.usetype==="radio"){this.$elem.val(dataItem.data[this.opts.simpleData["name"]]);this.$hiddenInput.val(dataItem.data[this.opts.simpleData["id"]]);if(this.cbFn)this.cbFn(dataItem.data);this.destroy();}
this.stopEvent(event);};CountryArea.prototype.setValue=function(ev){this.checkedData={"keys":[],"values":[],"datas":[]};for(var i=0,len=this.dataBuffer.length;i<len;i++){var dataItem=this.dataBuffer[i];var isExist=this.findNodeByData(dataItem.data);if(dataItem["$node"].find("input").get(0).checked){this.checkedData.keys.push(dataItem.data[this.opts.simpleData.id]);this.checkedData.values.push(dataItem.data[this.opts.simpleData.name]);this.checkedData.datas.push(dataItem.data);if(!isExist)this.operateSelectedNode("add",dataItem.data);}else{if(isExist)this.operateSelectedNode("remove",dataItem.data);}}
!this.opts.showArrow&&this.$elem.val(this.checkedData.values.join(this.opts.splitStr));this.$hiddenInput.val(this.checkedData.keys.join(this.opts.splitStr));if(this.cbFn)this.cbFn(this.checkedData.datas,this.dataBuffer);this.$elem.focus();this.stopEvent(ev);};CountryArea.prototype.findNodeByData=function(data){if(!this.$showArea)return;var $lis=this.$showArea.find("li");for(var i=0,len=$lis.length;i<len;i++){if($lis.eq(i).data("data")===data)return true;}
return false;};CountryArea.prototype.operateSelectedNode=function(opState,data){if(!this.$showArea)return;if(opState==="add"){var $li=$("<li>"+data.name+"<span class='close-btn'></span></li>");$li.data("data",data);this.$showArea.find("ul").append($li);}else{this.$showArea.find("li").each(function(){if(data===$(this).data("data"))$(this).remove();});}
this.setPos();};CountryArea.prototype.writeValue=function(){var keys=this.$hiddenInput.val();if(this.opts.usetype==="mult"){if(keys)keys=keys.split(this.opts.splitStr);if(keys&&keys.length>0){for(var i=0,len=this.dataBuffer.length;i<len;i++){var dataItem=this.dataBuffer[i];if(keys._contains(dataItem.data[this.opts.simpleData.id])){dataItem["$node"].find("input").get(0).checked=true;}}
this.setValue();}}else if(this.opts.usetype==="radio"){for(var i=0,len=this.dataBuffer.length;i<len;i++){var dataItem=this.dataBuffer[i];if(dataItem.data[this.opts.simpleData.id]===keys){this.$elem.val(dataItem.data[this.opts.simpleData.name]);}}}else{throw new Error("参数配置错误:usetype取值范围mult/raido");}};CountryArea.prototype.stopEvent=function(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation(ev);else ev.cancelBubble=true;};function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}
Array.prototype._contains=function(value){for(var i=0;i<this.length;i++){if(this[i]===value)return true;}
return false;};})(jQuery,window,document);;(function($,window,document){$.fn.addVertisement=function(options){if(!this.length)throw new Error("DOM绑定错误，请确认页面是否初始化完毕");var adv=new SmallAdvertisement(this.get(0),options);return adv;};var defaultOptions={position:"up",width:300};function SmallAdvertisement(elem,options){this.id="vetech-smallAdvertisement-"+String(Math.random()).replace(/\D/g,"");this.$elem=$(elem);this.elem=elem;this.opts=$.extend(true,{},defaultOptions,options);if(!(this.opts.data&&$.type(this.opts.data)==="object")){throw new Error("数据格式错误，请确认广告有数据")}
this.setConfiguration();this.initAdvertisement();}
SmallAdvertisement.prototype.initAdvertisement=function(){this.$container=$('<span class="advContainer"></span>');this.$popover=$('<div class="popover"><i class="arraw"></i></div>');this.$popover.css({"width":this.opts.width});this.$container.append(this.$popover);this.renderAdvertisement();};SmallAdvertisement.prototype.setConfiguration=function(){var imgWidth=this.$elem.data("imgWidth");var imgHeight=this.$elem.data("imgHeight");};SmallAdvertisement.prototype.renderAdvertisement=function(){var data=this.opts.data||{};var $img=$('<img class="advItem" src="'+(data["ggtpdz"])+'"/>');this.$popover.before($img);var title=data["ggbt"]||"",ggid=data["ggid"]||"",tpljdz=data["tpljdz"]||"";var $p=$('<p title="'+title+'"><a id="'+ggid+'" href="'+tpljdz+'" target="_blank">'+(data["ggwz"]||"")+'</a></p>');if(!tpljdz){$p.find("a").removeAttr("target").attr("href","javascript:void(0)");}
this.$popover.append($p);this.$elem.append(this.$container);this.setPosition();this.bindEvent();};SmallAdvertisement.prototype.setPosition=function(){var iWidth=this.$elem.width(),iHeight=this.$elem.height(),popoverW=this.$popover.width(),popoverH=this.$popover.height();$arraw=this.$popover.find(".arraw");if(this.opts.position==="up"){$arraw.addClass("down").css("left",(this.opts.width-20)/2);this.$popover.css({"left":(this.opts.width-iWidth)/-2,"top":-1*popoverH-8});}else if(this.opts.position==="down"){$arraw.addClass("up").css("left",(this.opts.width-20)/2);this.$popover.css({"left":(this.opts.width-iWidth)/-2,"top":iHeight+8});}else if(this.opts.position==="left"){$arraw.addClass("right").css("top",(popoverH-20)/2);this.$popover.css({"left":(this.opts.width+13)/-1,"top":(popoverH-iHeight)/-2});}else{$arraw.addClass("left").css("top",(popoverH-20)/2);this.$popover.css({"left":(iWidth+8),"top":(popoverH-iHeight)/-2});}};SmallAdvertisement.prototype.bindEvent=function(){var _this=this;this.$container.on("mouseenter",function(){_this.isMoving=true;_this.$popover.show();}).on("mouseleave",function(){setTimeout(function(){if(!_this.isMoving){_this.$popover.hide();}},50);_this.isMoving=false;}).on("click","a",function(ev){if(!this.href){this.href="javascript:void(0);";}else{_this.countClicked.call(_this,ev);}});this.$popover.on("mouseenter",function(){_this.isMoving=true;}).on("mouseleave",function(){_this.isMoving=false;})};SmallAdvertisement.prototype.countClicked=function(ev){var $target=$(ev.currentTarget);if($target.hasClass("ve-btn"))return;var ggid=$target.attr("id");$.ajax({url:"/webcomponent/advertisement/updateAdvCount",type:"get",data:{"ggid":ggid},success:function(data){if(!(data&&data.tjzt=="1")){throw new Error("广告统计出错");}},error:function(){alert("统计点击次数请求失败.");}});};})(jQuery,window,document);;(function($,w,d){$.executeAdvertisement=function(parent){var advertisements=$(parent||d).find(".advertisement-div");advertisements.each(function(){if($(this).attr("haveLoadedAdv")!=="1"){new Advertisement(this);}});};var adOptions={imgWidth:null,imgHeight:null,wordAlign:"absmiddle",wordBehavior:"scroll",wordBgcolor:"#FFFFFF",wordDirection:"left",wordLoop:-1,wordScrollamount:3,wordScrolldelay:90,xsfs:1,sfgd:1,gdfs:2,wzzs:100,tpqh:1,tpcc:"600*300",sfzclj:1,xssc:3,imgAutoplay:true,imgDirection:"left"};function Advertisement(elem){this.id="vetech-advertisement-"+String(Math.random()).replace(/\D/g,"");this.$elem=$(elem);this.elem=elem;this.currIndex=-1;this.isMoving=false;this.direction="left";this.playTimer=null;this.url="/webcomponent/advertisement/getAdvList";this.setConfiguration();this.loadData();this.$elem.attr("haveLoadedAdv","1");}
var fn=Advertisement.prototype;fn.setConfiguration=function(){this.bh=this.$elem.data("bh");this.qDatas=this.$elem.data("qdatas");this.role=this.$elem.data("role");this.complete=this.$elem.data("complete");this.wordtype=this.$elem.data("wordtype");this.advData=this.$elem.data("data");this.imgWidth=this.$elem.data("imgWidth");this.imgHeight=this.$elem.data("imgHeight");if(!this.bh)throw new Error("请配置广告位编号:bh。");if(!this.qDatas)throw new Error("请配置广告位查询参数:qdatas。");try{this.qDatas=$.extend(true,{},this.qDatas);this.qDatas["ggwbh"]=this.bh;this.qDatas["pt"]=this.qDatas["pt"]||"ASMS";}catch(e){throw new Error("广告位参数配置错误，必须是json格式。");}};fn.loadData=function(){var _this=this,tempCallback=function(data){if(!data["ggwList"].length){_this.$elem.hide();return;}
_this.opts=$.extend(true,{},adOptions,data["ggwConfig"]||{});var tempData=data["ggwList"];if(tempData&&tempData.length>0){_this.renderAdvertisement(tempData);}
if(_this.complete&&$.type(eval(_this.complete))==='function'){var result={status:0};if($.type(data)==="array"&&data.length>0){result={status:1};}
eval(_this.complete)(_this.$elem,result);}};if(this.advData&&this.advData["ggwList"]){tempCallback(this.advData);delete this.advData;}else{$.ajax({method:"post",url:this.url,data:this.qDatas,dataType:"json",success:function(data){if($.type(data)==="string")console.log("获取广告位数据失败");if(data.result)console.log(data.result);tempCallback(data);},error:function(){console.log("loaded advertisement data error!");}});}};fn.renderAdvertisement=function(data){if($.type(data)!=="array")throw new Error("广告数据格式返回错误");this.data=data;this.$container=$('<div class="advertiement-container"></div>');this.repairWidthAndHeight();if(this.opts.xsfs=="1"){this.initWordAdvertisement();}else{this.initImgAdvertisement();}
this.$elem.append(this.$container);this.bindEvent();};fn.repairWidthAndHeight=function(){if(this.imgWidth){var iWidth=String(this.imgWidth);if(String(iWidth).indexOf("%")!==-1){iWidth=this.$elem.width()*0.01*iWidth.replace("%","");}
this.opts.imgWidth=iWidth;}
if(this.imgHeight){var iHeight=String(this.imgHeight);if(String(iHeight).indexOf("%")!==-1){iHeight=this.$elem.height()*0.01*iHeight.replace("%","");}
this.opts.imgHeight=iHeight;}
delete this.imgWidth;delete this.imgHeight;};fn.initWordAdvertisement=function(){if(this.opts.sfgd=="1"){var $marquee=$('<marquee onMouseOver="this.stop()" onMouseOut="this.start()" direction="left"></marquee>');this.opts.wordDirection=this.opts.gdfs=="1"?"left":"down";$marquee.attr("align",this.opts.wordAlign).attr("behavior",this.opts.wordBehavior).attr("bgcolor",this.opts.wordBgcolor).attr("direction",this.opts.wordDirection).attr('scrollamount',this.opts.wordScrollamount);this.$container.append($marquee);var htmlStr="";for(var i=0,len=this.data.length;i<len;i++){var item=this.data[i];if(this.opts.sfzclj){var url=item["tpljdz"];if(url){url+=(url.indexOf("?")>-1?"&":"?");url+="ggid="+item["ggid"];}
if(url){htmlStr+="<a id='"+item["ggid"]+"' href='"+url+"' target='_blank'>"+(item["ggwz"]||"")+"</a>";}else{htmlStr+="<a id='"+item["ggid"]+"' href='javascript:;'>"+(item["ggwz"]||"")+"</a>";}}else{htmlStr+=(item["ggwz"]||"");}}
$marquee.html(htmlStr);this.$container.append($marquee);}else{var str="";var count=0;for(var i=0,len=this.data.length;i<len;i++){var content=(this.data[i]["ggwz"]||"");if(content.length>this.opts.wzzs){content=content.substr(1,this.opts.wzzs);}else{content=content;}
var $span=$("<span>");$span.html(content);$(document.body).append($span);var width=$span.width();$span.remove();var tpljdz=this.data[i]["tpljdz"];if(tpljdz){str+="<a id='"+this.data[i]["ggid"]+"' href='"+tpljdz+"' title='"+(this.data[i]["ggwz"]||"")+"' style='display:block;width: "+width+"px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;' target='_blank'>"+(this.data[i]["ggwz"]||"")+"</a>";}else{str+="<a id='"+this.data[i]["ggid"]+"' href='javascript:;'title='"+(this.data[i]["ggwz"]||"")+"' style='display:block;width: "+width+"px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;'>"+(this.data[i]["ggwz"]||"")+"</a>";}}
this.$container.html(str);}};fn.initImgAdvertisement=function(){var $ul=$('<ul class="list clearfix"></ul>');var strArr=this.opts.tpcc.split("*"),iWidth=strArr[0],iHeight=strArr[1];if(!this.opts.imgWidth){this.opts.imgWidth=iWidth;}
if(!this.opts.imgHeight){this.opts.imgHeight=iHeight;}
this.$container.css({width:this.opts.imgWidth,height:this.opts.imgHeight});$ul.css({width:this.opts.imgWidth*2,height:this.opts.imgHeight});var $leftBtn=$('<a href="javascript:void(0);" class="ve-btn leftBtn"></a>');var $rightBtn=$('<a href="javascript:void(0);" class="ve-btn rightBtn"></a>');var btnTop=(iHeight-35)/2;$leftBtn.css("top",btnTop);$rightBtn.css("top",btnTop);this.$container.append($ul).append($leftBtn).append($rightBtn);this.createImgContent("left",function($li){this.$container.find("ul").append($li);this.opts.liMoveWidth=this.$container.find(".list li").first().width();this.autoPlayImg();});};fn.autoPlayImg=function(){if(this.opts.tpqh!="1")return;this.stopPlayImg();var _this=this;this.playTimer=setInterval(function(){_this.moveHandler.call(_this,_this.opts.imgDirection);},(this.opts.xssc*1000||1000));};fn.stopPlayImg=function(){if(this.playTimer)clearInterval(this.playTimer);};fn.moveHandler=function(directionFlag){this.stopPlayImg();var _this=this;this.opts.imgDirection=directionFlag;if(this.isMoving)return;this.isMoving=true;this.createImgContent(directionFlag,function($li){var $listContainer=this.$container.find(".list");if(directionFlag==="left"){$listContainer.append($li);$listContainer.animate({left:-this.opts.liMoveWidth},function(){$listContainer.find("li").first().remove();$listContainer.css("left",0);_this.isMoving=false;_this.autoPlayImg();});}else{$listContainer.css("left",-this.opts.liMoveWidth);$li.insertBefore($listContainer.find("li").first());$listContainer.animate({left:0},function(){$listContainer.find("li").last().remove();_this.isMoving=false;_this.autoPlayImg();});}});};fn.createImgContent=function(flag,callback){if(flag==="left"){this.currIndex+=1;this.currIndex=this.currIndex==this.data.length?0:this.currIndex;}else{this.currIndex-=1;if(this.currIndex<0)this.currIndex=this.data.length-1;}
var item=this.data[this.currIndex];var $li=$('<li><img src="'+item["ggtpdz"]+'" /></li>');if(this.opts.sfzclj=="1"){var url=item["tpljdz"];if(url){url+=(url.indexOf("?")>-1?"&":"?");url+="ggid="+item["ggid"];}
$li=$('<li style="margin-left:0;"><a id="'+item["ggid"]+'" href="'+(url||"javascript:void(0);")+'" style="display:block;" target="_blank"><img src="'+item["ggtpdz"]+'" /></a></li>');if(!url){$li.removeAttr("target");}}
if(this.opts.xsfs=="3"){if(this.wordtype=="title"){$li.attr("title",item["ggwz"]||"");}else{$li.append('<p class="title">'+item["ggwz"]+'</p>');}}
$li.css({width:this.opts.imgWidth,height:this.opts.imgHeight});$li.data("data",item);$li.find("img").css({"width":"100%","height":this.opts.imgHeight});var _this=this;$li.find("img").on("load",function(){callback.call(_this,$li);});};fn.bindEvent=function(){var _this=this;this.$container.on("click","a",$.proxy(this.countClickedTimes,this));this.$container.on("click",".ve-btn",function(){var state=$(this).hasClass("leftBtn")?"left":"right";_this.moveHandler(state);});this.$container.find(".list").on("mouseenter",function(){_this.stopPlayImg();}).on("mouseleave",function(){_this.autoPlayImg();});};fn.countClickedTimes=function(ev){var $target=$(ev.currentTarget);if($target.hasClass("ve-btn"))return;var ggid=$target.attr("id");$.ajax({url:"/webcomponent/advertisement/updateAdvCount",type:"get",data:{"ggid":ggid,"pt":this.qDatas["pt"]},success:function(data){if(!(data&&data.tjzt=="1")){throw new Error();}},error:function(){alert("统计点击次数请求失败.");}});};})(jQuery,window,document);;(function($,window,document){$.fn.addAreaTree=function(options,cbFn,afterClose){if(this.length===0)throw new Error("DOM绑定错误，确认页面是否加载完毕");if(!layer)throw new Error("layer对象找不到，确认是否引入了layer框架");if(!$.fn.createZtree)throw new Error("请确认是否引入了ztree和ztree扩展包");var elem=this.get(0);var areaTree=new AreaTree(elem,options,cbFn,afterClose);return areaTree;};$.fn.addAreaTree.options={title:"区域树选择",tips:"温馨提示:只能选择最后一个区域",width:460,height:400,triggerDOM:null,offset:"center",type:"3",typeValue:"/component/data/areaTree.data.js",hiddenInput:null,key:null,simpleData:null,isExpandAll:false,onlyCheckedChildNode:true};function AreaTree(elem,options,cbFn,afterClose){this.id="areaTree-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.addAreaTree.options,options);this.cbFn=cbFn;this.afterClose=afterClose;this.checkedNode=null;if(!this.opts.triggerDOM)this.opts.triggerDOM=this.$elem;else if(typeof this.opts.triggerDOM==="string")this.opts.triggerDOM=$("#"+this.opts.triggerDOM);if(typeof this.opts.hiddenInput==="string")this.opts.hiddenInput=$("#"+this.opts.hiddenInput);this.init();this.loadData();}
AreaTree.prototype.init=function(){this.$container=$('<div class="tree-container"></div>');this.$toolbar=$('<div class="toolbar"><a href="javascript:void(0);" class="vetech-sure">确认</a><a href="javascript:void(0);" class="vetech-delete" style="background:#cccccc;">清空</a><p class="tips">'+this.opts.tips+'</p></div>');this.$treeContainer=$('<ul id="ztree-'+this.id+'" class="ztree"></ul>');this.$container.append(this.$toolbar).append(this.$treeContainer);$(document.body).append(this.$container);};AreaTree.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.renderData();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.renderData();}});}};AreaTree.prototype.renderData=function(){var setting={check:{enable:true,chkStyle:"radio"},data:{key:{name:"MC"},simpleData:{enable:true,idKey:"BH",pIdKey:"PARBH",rootPId:"none"}},callback:{onCheck:$.proxy(this.checkedHandler,this),onNodeCreated:$.proxy(this.nodeCreatedHandler,this),beforeCheck:$.proxy(this.beforeCheckHandler,this)}};if(this.opts.key)setting.data.key=this.opts.key;if(this.opts.simpleData)setting.data.simpleData=this.opts.simpleData;this.settings=setting;this.tree=this.$treeContainer.createZtree(setting,this.data);this.tree.zTree.expandAll(this.opts.isExpandAll);this.bindEvent();this.writeValue();};AreaTree.prototype.writeValue=function(){if(!this.opts.hiddenInput)return;var zTree=this.tree.zTree;var nodes=zTree.getNodes();nodes=zTree.transformToArray(nodes);var value=this.opts.hiddenInput.val();for(var i=0;i<nodes.length;i++){if(nodes[i][this.settings.data.simpleData.idKey]==value){zTree.checkNode(nodes[i],true);this.$elem.val(nodes[i][this.settings.data.key.name]);}}};AreaTree.prototype.bindEvent=function(){$(this.opts.triggerDOM).on("click",$.proxy(this.open,this));this.$toolbar.find("a.vetech-sure").on("click",$.proxy(this.sureHandler,this));this.$toolbar.find("a.vetech-delete").on("click",$.proxy(this.deleteHandler,this));};AreaTree.prototype.sureHandler=function(){if(!this.checkedNode)return;if(this.opts.hiddenInput)this.opts.hiddenInput.val(this.checkedNode.BH);this.$elem.val(this.checkedNode.MC);layer.close(this.layer);};AreaTree.prototype.deleteHandler=function(){this.beforeCheckHandler();if(this.opts.hiddenInput)this.opts.hiddenInput.val("");this.$elem.val("");layer.close(this.layer);};AreaTree.prototype.nodeCreatedHandler=function(event,treeId,treeNode){if(treeNode.isParent&&this.opts.onlyCheckedChildNode){this.$container.find("#"+treeNode.tId+"_check").remove();}};AreaTree.prototype.checkedHandler=function(event,treeId,treeNode){if(treeNode.checked)this.checkedNode=treeNode;else this.checkedNode=null;if(this.cbFn)this.cbFn(treeId,treeNode);};AreaTree.prototype.beforeCheckHandler=function(treeId,treeNode){var zTree=this.tree.zTree;var nodes=zTree.getNodes();nodes=zTree.transformToArray(nodes);for(var i=0;i<nodes.length;i++){if(nodes[i]==treeNode)continue;zTree.checkNode(nodes[i],false);}};AreaTree.prototype.open=function(){var pointer=this.$elem.offset();var tempOptions={title:this.opts.title,type:1,offset:[pointer.top+this.$elem.outerHeight()+2+"px",pointer.left+"px"],area:[this.opts.width+"px",this.opts.height+"px"]};tempOptions.content=this.$container;tempOptions.cancel=$.proxy(this.closeHandler,this);this.layer=window.layer.open(tempOptions);window.layer.style(this.layer,{position:"absolute"});};AreaTree.prototype.closeHandler=function(){if(this.afterClose)this.afterClose();};})(jQuery,window,document);;(function($,window,document){$.fn.addB2gJcCityZd=function(options,cbFn){if(this.length==0)throw new Error("DOM绑定错误，请确认页面是否加载完毕");var oInput=this.get(0);manager.clear(oInput);var zd=new B2gJcCityZd(oInput,options,cbFn);$(oInput).bind("click",inputClickHandler);if(!oInput.readOnly){$(oInput).bind("keyup",keyupHandler);}
manager.addEvent(zd.id,"click",inputClickHandler);manager.addEvent(zd.id,"keyup",keyupHandler);return zd;}
function inputClickHandler(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var id=target.getAttribute("vetech-ids");var _this=manager.getComponent(id);if(_this){if(_this.filter){_this.filter.call(_this);_this.renderData().setActive();}
_this.show();}}
function keyupHandler(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var id=target.getAttribute("vetech-ids");var _this=manager.getComponent(id);_this.$inputHidden.val("");}
$.fn.addB2gJcCityZd.options={width:260,height:300,hiddenName:"",matchHiddenName:"",type:1,autoWriteVal:true,typeValue:null,cplx:"train",filter:null,autoExecCbFn:function(){},simpleData:{id:"id",name:"name"}};function B2gJcCityZd(elem,options,cbFn){this.id="vetech-b2gjccityzd-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.addB2gJcCityZd.options,options);this.cbFn=(cbFn&&Object.prototype.toString.call(cbFn)==="[object Function]")?cbFn:function(){}
this.isShow=false;this.isnow=0;this.$inputHidden=$('#'+this.opts.hiddenName);this.$matchInputHidden=$('#'+this.opts.matchHiddenName);this.data=null;this.originalData=null;this.filter=this.opts.filter;this.isFirstLoad=true;manager.manage(this);this.init();}
B2gJcCityZd.prototype={init:function(){this.$container=$('<div class="b2g_trainzd_container"></div>');this.$toptab=$('<div class="city_top_tab"></div>');this.$contentDiv=$("<div class='contentdiv'></div>");this.$container.append(this.$toptab);this.$container.append(this.$contentDiv);this.$container.css("width",this.opts.width);this.$contentDiv.css("max-height",this.opts.height-30);$(document.body).append(this.$container);if($.type(this.opts.autoExecCbFn)=="function"){this.opts.autoExecCbFn.call(this);}
this.loadData().bindEvent();},loadData:function(){if(this.opts.type==2){this.originalData=this.opts.typeValue;this.data=this.opts.typeValue;this.renderData().setActive();}else{var _this=this;$.ajax({type:"get",url:this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.originalData=data;if(!_this.filter){_this.renderData().setActive();}}});}
this.opts.loadedCallback&&this.opts.loadedCallback();return this;},renderData:function(){this.$toptab.html("");this.$contentDiv.html("");if(this.opts.cplx=='train'){this.renderDataForTrain();}else{this.renderDataForFlightHotel();}
if(this.opts.autoWriteVal&&this.isFirstLoad&&!this.$inputHidden.val()){this.writeValue();this.isFirstLoad=false;}
return this;},renderDataForTrain:function(){var _this=this;var index=0;var $tabul=$("<ul></ul>");if(!$.isEmptyObject(this.data)){_this.$toptab.show();var singleLen=0;$.each(this.data,function(title,data){if(!$.isBlank(title)){$tabul.append('<li data-index="'+index+'">'+title+'</li>');var len=title.length;if(len>0&&len*12>singleLen){singleLen=len*12;}
var $content=$('<div class="city_list_div"></div>');var $cityUl=$('<ul></ul>');$.each(data,function(i,city){if(!_this.opts.fn1){var $li=$('<li><span class="pres">'+city[_this.opts.simpleData.name]+'</span><span class="prns">'+city[_this.opts.simpleData.id]+'</span></li>');$li.data("data",city);$cityUl.append($li);}else{var $fn=_this.opts.fn1(city);$fn.data("data",city);$cityUl.append($fn);}
if(_this.$inputHidden.val()==city[_this.opts.simpleData.id]){_this.$inputHidden.data("data",city);if($.isBlank(_this.$elem.val())){_this.$elem.val(city[_this.opts.simpleData.name]);}
_this.isnow=index;}});_this.$contentDiv.append($content.append($cityUl));index++;}});if(singleLen>(this.opts.width/index)){$tabul.find("li").css("padding","0 10px");}else{$tabul.find("li").css("width",100/index+"%");}
this.$toptab.append($tabul);}else{this.$toptab.hide();var $content=$('<div class="city_list_div" style="display:block;"></div>');var $cityUl=$('<ul><span class="pres">暂无可选择的站点</span></ul>')
this.$contentDiv.append($content.append($cityUl));}},renderDataForFlightHotel:function(){var _this=this;var $content=$('<div class="city_list_div" style="display:block;"></div>');var $cityUl=$('<ul></ul>');if($.type(this.data)=='array'&&this.data.length>0){$.each(this.data,function(i,flight){if(!_this.opts.fn1){var $li=$('<li><span class="pres">'+flight[_this.opts.simpleData.name]+'</span><span class="prns">'+flight[_this.opts.simpleData.id]+'</span></li>');$li.data("data",flight);$cityUl.append($li);}else{var $fn=_this.opts.fn1(flight);$fn.data("data",flight);$cityUl.append($fn);}});}else{var cplx=this.opts.cplx=='flight'?'机场':'入住城市';$cityUl.append('<span class="pres">暂无可选择的'+cplx+'</span>');}
_this.$toptab.hide();_this.$contentDiv.append($content.append($cityUl));},bindEvent:function(){var _this=this;this.$toptab.on("click","li",$.proxy(liClickHandler,this));this.$container.on("click",".city_list_div li",$.proxy(itemClickHandler,this));$(document).on("click",$.proxy(this.closeHandler,this));this.$container.on("mousedown",function(ev){ev.preventDefault();ev.stopPropagation();if(document.all&&!document.addEventListener){_this.$container.find(".contentdiv")[0].setCapture&&_this.$container.find(".contentdiv")[0].setCapture();}
return false;}).on("mouseup",function(){_this.$container.find(".contentdiv")[0].releaseCapture&&_this.$container.find(".contentdiv")[0].releaseCapture();}).on("click",$.proxy(this.stopEvent,this));this.$elem.on("blur",function(){_this.hide.call(_this);});function liClickHandler(event){var $targetLi=$(event.currentTarget);var index=$targetLi.data("index");this.setActive(index);}
function itemClickHandler(event){var $targetLi=$(event.currentTarget);var data=$targetLi.data("data");if(this.cbFn){data.iscity="1";this.cbFn(this.$elem,data);}
this.$elem.val(data[this.opts.simpleData.name]);$('#'+this.opts.hiddenName).val(data[this.opts.simpleData.id]);$('#'+this.opts.hiddenName).data("data",data);this.closeHandler(event);}
return this;},setActive:function(index){if(this.opts.cplx!='train')return;if($.isBlank(index))index=this.isnow;this.$toptab.find("li").removeClass("active");this.$toptab.find("li").eq(index).addClass("active");this.$container.find(".city_list_div").hide();this.$container.find(".city_list_div").eq(index).show();},closeHandler:function(event){var target=event.target;if(this.elem!==target){this.hide();}
this.stopEvent(event);},show:function(){if(this.isShow)return;this.setPos();this.$container.css("visibility","visible");this.isShow=true;},setPos:function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iHeight=$(document).outerHeight(),iLeft=0,iTop=pointer.top+this.$elem.outerHeight();iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop});return this;},hide:function(){if(!this.isShow)return;this.$container.css({"visibility":"hidden","left":0,"top":0});this.isShow=false;},destroy:function(){if(this.$container){this.$container.remove();}},stopEvent:function(ev){var event=ev||window.event;if(event.stopPropagation)event.stopPropagation();else event.cancelBubble=true;},writeValue:function(){var item=null,value="",hValue="";var datas=$.extend(true,[],this.data)
if(Object.prototype.toString.call(this.data)=="[object Object]"){datas=[];for(var i in this.data){datas.push(this.data[i]);}
if(this.opts.flag==="dd"&&datas.length>1)datas=datas[1]
else datas=datas[0]||[];}
if(this.opts.flag==="cf"){item=datas[0]||{};}else if(this.opts.flag==="dd"){item=datas[1]||{};}
this.$elem.val(item[this.opts.simpleData.name]||"");this.$inputHidden.val(item[this.opts.simpleData.id]||"");}};})(jQuery,window,document);;(function($,window,document){$.fn.addBigVeTab=function(options,cbFn){if(this.length==0)throw new Error("Dom binding error,please check whether the document is loaded ready");var oInput=this.get(0);manager.clear(oInput,"vetech-jcfwzd");var bigVeTab=new BigVeTab(oInput,options,cbFn);return bigVeTab;}
$.fn.addBigVeTab.options={type:"1",typeValue:"",topTabTitle:[],hiddenName:"",yycj:null};function BigVeTab(elem,options,cbFn){this.id="vetech-jcfwzd-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.addBigVeTab.options,options);this.cbFn=(cbFn&&Object.prototype.toString.call(cbFn)==="[object Function]")?cbFn:function(){}
this.isNow=0;this.isShow=false;if(this.opts.yycj==0||this.opts.yycj==1){this.opts.topTabTitle=[];}
this.init();manager.manage(this);}
var fn=BigVeTab.prototype;fn.init=function(){this.$container=$('<div class="vetech-jcfwzd-container" style="width:'+this.opts.width+'px"></div>')
this.$topTab=$('<div class="topTab clearfix"></div>');this.$content=$('<div class="content"></div>');this.$container.append(this.$topTab).append(this.$content)
$(document.body).append(this.$container);this.renderData();}
fn.renderData=function(){if(this.opts.topTabTitle.length>0){var $ul=$("<ul class='clearfix'></ul>");for(var i=0;i<this.opts.topTabTitle.length;i++){$ul.append($('<li tab_index="'+i+'">'+this.opts.topTabTitle[i]+'</li>'));}
this.$close=$('<span class="close"><img src="'+BigVeTab.closeUrl+'"/></span>');this.$topTab.append($ul.append(this.$close));}
var yycj=this.opts.yycj;var _this=this;var timer=null;var count=0;if(0===yycj||yycj!==1){var $topTabPage=$('<div class="topTabPage" ttp_index="0"></div>');var options1=$.extend(true,{parentObj:this},this.opts.options1);options1.initContainerComplete=function(){this.$container.css("position","relative");this.$container.css("visibility","visible");if(yycj!==0){this.$tips.hide();if(this.$header.find('ul li').length==1){this.$header.hide();}}
this.$container.css("border","none");$topTabPage.append(this.$container);_this.$content.append($topTabPage);count++;}
var $pageContent1=this.$elem.addVeNTab(options1,this.cbFn);}
if(1===yycj||yycj!==0){var $topTabPage2=$('<div class="topTabPage" ttp_index="1"></div>');var options2=$.extend(true,{parentObj:this},this.opts.options2);options2.initContainerComplete=function(){this.$container.css("position","relative");if(yycj!==1){this.$tips.hide();if(this.$header.find('ul li').length==1){this.$header.hide();}}
this.$container.css("visibility","visible");this.$container.css("border","none");$topTabPage2.append(this.$container);_this.$content.append($topTabPage2);count++;}
var $pageContent2=this.$elem.addVeNTab(options2,this.cbFn);}
timer=setInterval(function(){if(((yycj==0||yycj==1)&&count===1)||count===2){_this.bindEvent();if(yycj===1){_this.isNow=1;}
_this.setActive(_this.isNow);clearInterval(timer);}},50);}
fn.bindEvent=function(){this.$topTab.find("ul li").on("click",$.proxy(this.topTabClickHandler,this));if(this.$close)
this.$close.on("click",$.proxy(this.closeHandler,this));$(document).on("click",$.proxy(this.closeHandler,this));this.$container.on("click",$.proxy(this.stopEvent,this));}
fn.topTabClickHandler=function(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var tab_index=$(target).attr("tab_index");this.setActive(tab_index);this.isNow=tab_index;}
fn.closeHandler=function(event){var target=event.target;if(this.elem!==target){this.hide();}
this.stopEvent(event);}
fn.setActive=function(index){this.$topTab.find("ul li[tab_index='"+this.isNow+"']").removeClass("active");this.$content.find("div.topTabPage[ttp_index='"+this.isNow+"']").removeClass("active");this.$topTab.find("ul li[tab_index='"+index+"']").addClass("active");this.$content.find("div.topTabPage[ttp_index='"+index+"']").addClass("active");}
fn.show=function(){if(this.isShow)return;this.setPos();this.$container.show();this.isShow=true;};fn.hide=function(){if(!this.isShow)return;this.$container.hide();this.isShow=false;};fn.destroy=function(){this.$container.remove();};fn.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+this.$elem.outerHeight()});};fn.stopEvent=function(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelbubble=true;}
BigVeTab.closeUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnElEQVQ4T6WTwQ2FMAxDzWSwCZ8NMopHgE0Y7StSgdDGPdBeqqLk1TjuhME1DfbjBpjZD8BMcutBzWwHcJL0/QXwDyuAXUFKs9ccJP3CB+CHUNBAsuYGoCCqOQXUkOKHy71lR4/kFMKtXp82SwWVCj9KY1MF8Z+LXDmdBpAZ1pvOC9BzW0FiEq8gScMySB3l5UqYirOM8tdHNfwa/yXyZBGng+hpAAAAAElFTkSuQmCC";})(jQuery,window,document);;(function($,w,d){$.fn.addBrandList=function(options){var bl=new BrandList(this.get(0),options);return bl;};$.fn.addBrandList.options={width:192,height:145,showNum:4,maxPage:5};function BrandList(elem,options){this.id="vetech-brandList-"+String(Math.random()).replace(/\D/g,"");this.$elem=$(elem);this.elem=elem;this.opts=$.extend({},$.fn.addBrandList.options,options);this.currPage=1;if(this.opts.paginationId){if($.type(this.opts.paginationId)!=="string")this.$paginationBox=this.opts.paginationId;else this.$paginationBox=$("#"+this.opts.paginationId);}
this.init();}
var fn=BrandList.prototype;fn.init=function(){this.$container=$('<div class="brandList-container"></div>');this.$elem.append(this.$container);this.loadData();};fn.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,data:this.opts.qDatas,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};fn.render=function(){if($.type(this.data)!=="array")throw new Error("数据格式错误");if(this.data.length===0){this.$container.remove();return;}
this.initPagination();this.renderData();this.bindEvent();};fn.initPagination=function(){if(!this.$paginationBox)return;var totalNum=Math.ceil(this.data.length/this.opts.showNum);totalNum=totalNum>this.opts.maxPage?this.opts.maxPage:totalNum;this.$pagationContainer=$('');for(var i=1;i<=totalNum;i++){var $a=$('<a href="javascript:void(0)">'+i+'</a>');this.$pagationContainer.append($a);}
this.$paginationBox.append(this.$pagationContainer);if(this.$paginationBox.css("position")==="static"){this.$paginationBox.css("position","relative");}
this.$paginationBox.css("minHeight",40);this.setActive();};fn.setActive=function(){this.$pagationContainer.find("a").removeClass("active").eq(this.currPage-1).addClass("active");}
fn.renderData=function(){this.$container.html("");var $ul=$('<ul class="list clearfix"></ul>');var startNum=(this.currPage-1)*this.opts.showNum;var endNum=this.currPage*this.opts.showNum;endNum=endNum>this.data.length?this.data.length:endNum;for(var i=startNum;i<endNum;i++){var item=this.data[i];var $li=$('<li></li>');var $a=$('<a target="_blank" href="'+item["href"]+'"><img src="'+item["imgUrl"]+'" /><p class="imgtitle" title="'+item["name"]+'">'+item["name"]+'</p></a>');var styleJson={"width":this.opts.width,"height":this.opts.height};$a.css(styleJson).find("img").css(styleJson);var $div=$('<div class="info" style="width:'+this.opts.width+'px"><p title="'+item["address"]+'">'+item["address"]+'</p><span>¥'+(item["price"]||0)+'<em>起</em></span></div>');$li.append($a).append($div);$ul.append($li);}
this.$container.append($ul);};fn.bindEvent=function(){var _this=this;this.$pagationContainer.on("click","a",function(){_this.currPage=parseInt($(this).html());_this.setActive();_this.renderData();});var widthNum=this.opts.width;this.$container.find("ul li").each(function(){var w=widthNum-$(this).find(".info").find("span").width()-2;$(this).find(".info").find("p").width(w);})};})(jQuery,window,document);;(function($,window,document){$.fn.addCalendar=function(options,cbFn){if(this.length===0)throw new Error("DOM绑定错误");var calendar=new DCalendar(this.get(0),options,cbFn);return calendar;};$.fn.addCalendar.options={tableWidth:520,num:2,type:"3",typeValue:"/component/data/calendar.data.js",addBtn:false,operatFn:function(){},priceFn:function(){},autoShowXsj:false,autoShowYws:true,autoShowHoliday:false,autoShowLayer:false,setShzt:{0:"正常",1:"在审",2:"停止",3:"退回"},startDate:null,endDate:null};function DCalendar(elem,options,cbFn){this.id="double-calendar-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.cbFn=cbFn;this.opts=$.extend({},$.fn.addCalendar.options,options);if($.type(this.opts.operatFn)!=="function"){this.opts.operatFn=null;}
if($.type(this.opts.priceFn)!=="function"){this.opts.priceFn=null;}
if(!(Calendar&&Object.prototype.toString.call(Calendar)))throw new Error("请加载Calendar.js文件");this.cal=new Calendar();this.data={};this.init();}
DCalendar.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};DCalendar.prototype.render=function(){if(this.opts.activeDate)this.writeValue();else{var $tables=this.$container.find("table");for(var i=0;i<this.opts.num;i++){var $table=$tables.eq(i);if(!$table.data("isRendered",true)){this._createContent($table);this._addDays($table,$table.data("date"));}
this.renderData($table);$table.data("isRendered",true);}}};DCalendar.prototype.renderData=function($table){var $tds=$table.find("td");for(var i=0,len=$tds.length;i<len;i++){var $content=$tds.eq(i).find(".contentarea"),dateStr=$content.attr("data-date"),value=this.data[dateStr];$content.data(value);if(value){var price=value.price||"",xsj=value.xsj||"",shzt=value.shzt||"",color="",text="",seatValue="",dataHtml="";if(price){$content.find(".price").html("¥"+price);}
if(this.opts.autoShowYws&&value.seat!=undefined){var seat=Number(value.seat);if(seat<1){seatValue="售罄";$content.addClass("empty-state");}else if(seat>0&&seat<10){seatValue="余"+seat+"位";}else{seatValue="充足";}
$content.find(".seat").html(seatValue);}
if(this.opts.autoShowXsj&&xsj){$content.find(".xsj").html("¥"+xsj);}
for(var prop in value["props"]){$content.attr(prop,value["props"][prop]);}
if($content.data("datebl")&&this.opts.addBtn){dataHtml='<a href="javascript:;" class="cal-pro cal-edit" data="edit">'+'<a href="javascript:;" class="cal-pro cal-del" data="del"></a>';if(shzt==this.opts.setShzt["0"]){text="";dataHtml="";}else{if(shzt==this.opts.setShzt["1"]){color="#088c08";text=this.opts.setShzt["1"];dataHtml="";}else if(shzt==this.opts.setShzt["2"]){color="#999";text=this.opts.setShzt["2"];}else if(shzt==this.opts.setShzt["3"]){color="red";text=this.opts.setShzt["3"];}}
$content.find(".holiday").html(dataHtml);$content.find(".cal-shzt").html(text).css("background",color);}}
if(this.opts.priceFn){this.opts.priceFn($content);}}};DCalendar.prototype.init=function(){this.$viewport=$("<div style='background:#ccc;'></div>");this.$container=$('<div class="custom-calendar-wrap"></div>');this.$viewport.append(this.$container);this.$elem.append(this.$viewport);if(!(this.opts.startDate&&Object.prototype.toString.call(this.opts.startDate)==="[object Date]"))throw new Error("开始时间配置错误");if(!(this.opts.endDate&&Object.prototype.toString.call(this.opts.endDate)==="[object Date]"))throw new Error("结束时间配置错误");var count=this._calcMonthNumber(this.opts.startDate,this.opts.endDate)+1;var tempDate=this.opts.startDate;if(this.opts.autoShowLayer){this.$layer=$("<div class='vetech-calendar-layer'></div>");$(document.body).append(this.$layer);}
for(var i=0;i<count;i++){var $table=this._createTable(new Date(tempDate.getFullYear(),tempDate.getMonth()+i),i);this.$container.append($table);if(i<this.opts.num){this._createContent($table);this._addDays($table,$table.data("date"));$table.data("isRendered",true);}}
this.setContainerWidth(count);this.setBtnState();this.bindEvent();this.loadData();};DCalendar.prototype.setBtnState=function(){var $tables=this.$container.find("table");if(this.opts.num===1){this.listenBtns($tables.eq(0));}else{for(var i=0;i<this.opts.num;i++){var $table=$tables.eq(i);if(i===0){$table.find(".leftBtn").show();$table.find(".rightBtn").hide();}else if(i===this.opts.num-1){$table.find(".leftBtn").hide();$table.find(".rightBtn").show();}else{$table.find(".leftBtn").hide();$table.find(".rightBtn").hide();}
this.listenBtns($table);}}};DCalendar.prototype.listenBtns=function($table){var $tables=this.$container.find("table");var dataIndex=$table.attr("data-index");if(dataIndex==0){$table.find(".leftBtn").find("img").attr("src",DCalendar.leftDisUrl).attr("data-state","disable");}else if(dataIndex==$tables.length-1){$table.find(".rightBtn").find("img").attr("src",DCalendar.rightDisUrl).attr("data-state","disable");}else{$table.find(".ve-btn").find("img").attr("data-state","enable");}};DCalendar.prototype._calcMonthNumber=function(date1,date2){var year1=date1.getFullYear(),year2=date2.getFullYear(),month1=date1.getMonth(),month2=date2.getMonth();return(year2-year1)*12+(month2-month1);};DCalendar.prototype.setContainerWidth=function(num){var $table=this.$container.find("table");var iHeight=$table.find("caption").get(0).offsetHeight+$table.find("thead").get(0).offsetHeight+$table.find("tbody").get(0).offsetHeight+2;this.$container.css({"width":($table.get(0).offsetWidth+5)*num,"height":iHeight});this.$viewport.css({"width":($table.get(0).offsetWidth+5)*this.opts.num,"height":iHeight,"overflow":"hidden"});};DCalendar.prototype._createTable=function(date,index){var $table=$('<table data-index="'+index+'"></table>');$table.css({"width":this.opts.tableWidth});$table.append(this._createCaption(date));$table.data("date",date);this._createTheadAndBody($table);return $table;};DCalendar.prototype._createCaption=function(date){var year=date.getFullYear(),month=date.getMonth()+1;var $caption=$('<caption>'+(year+"年 &nbsp;&nbsp; "+month+"月")+'</caption>');var $leftBtn=$('<span class="ve-btn leftBtn"><img data-state="enable" src="'+DCalendar.leftUrl+'" /></span>');var $rightBtn=$('<span class="ve-btn rightBtn"><img data-state="enable" src="'+DCalendar.rightUrl+'" /></span>');$caption.append($leftBtn).append($rightBtn);return $caption;};DCalendar.prototype._createTheadAndBody=function($table){var $thead=$('<thead></thead>');for(var i=0,len=DCalendar.week.length;i<len;i++){var $th=$('<th>'+DCalendar.week[i]+'</th>');if(i===0)$th.addClass("sunday");if(i===len-1)$th.addClass("saturday");$thead.append($th);}
$table.append($thead).append("<tbody></tbody>")};DCalendar.prototype._createContent=function($table){var $tbody=$table.find("tbody");for(var i=0;i<6;i++){var $tr=$('<tr></tr>');for(var j=0;j<7;j++){var $td=$("<td><div class='contentarea'></div></td>");$tr.append($td);}
$tbody.append($tr);}};DCalendar.prototype._addDays=function($table,date){var $tds=$table.find("td");var year=date.getFullYear(),month=date.getMonth();var weekNum=new Date(year,month,1).getDay();var dayNum=new Date(year,month+1,0).getDate();var dayIndex=1;for(var i=weekNum;i<weekNum+dayNum;i++){var $content=$tds.eq(i).find(".contentarea");$content.addClass("normal").attr("data-date",this.getDateStr(new Date(year,month,dayIndex)));var result="";var html='<span class="date">'+dayIndex+'</span><span class="seat"></span><span class="price"></span><div class="holiday"></div>';$content.append(html);if(this.opts.autoShowXsj){$content.find(".price").after("<span class='xsj'></span>");}
if(this.opts.autoShowHoliday){result=this.getHolidayByDate(new Date(year,month,dayIndex));}
var bl=this.compareValue($content);if(bl){if(this.opts.addBtn){result='<a class="cal-pro cal-add" data="add"></a>';$content.addClass("cal-operat");$content.data("datebl",bl);}}else{$content.addClass("onced");}
$content.find(".holiday").html(result).end().append("<div class='cal-shzt'></div>");if(this.opts.num>1&&$content.find(".cal-shzt").length>0){$content.find("span").css("height","14px");if($content.find(".cal-shzt").length>0){$content.find(".cal-shzt").css("height","16px");}}
dayIndex=dayIndex+1;}};DCalendar.prototype.getDateStr=function(date){var year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();month=month<10?"0"+month:month;day=day<10?"0"+day:day;return""+year+month+day;};DCalendar.prototype.getHolidayByDate=function(date){var result=this.cal.getsf(date);if(!result)result=this.cal.getlf(date);if(!result)result=this.cal.getst(date);if(!result){result=this.cal.getls(date);result=result[result.length-1];}else{result="<i style='color:#e02d2d;font-weight: normal;'>"+result+"</i>";}
return result;};DCalendar.prototype.bindEvent=function(){var _this=this;this.$container.on("click",function(event){var $target=$(event.target);if($target.is("img")){_this.btnClickHandler.call(_this,event,$target.parent());}});var $tables=this.$container.find("table");$tables.each(function(){$(this).find("tbody").on("click",deepBind(_this,_this.itemClickHandler,"click"));$(this).find("tbody").on("mousemove",function(event){var $target=$(event.target);if($target.hasClass("contentarea")||$target.parents(".contentarea")){_this.itemClickHandler.call(_this,event,"move");}});});if(this.opts.addBtn){this.$container.on("click",".cal-pro",function(event){var target=event.target;var $content=null;$content=$(target).parents(".contentarea");$content.data("lx",$(target).attr("data"));if(!$content)return;if($content.data("datebl")){if(_this.opts.operatFn){_this.opts.operatFn($content);}}})}
if(this.opts.autoShowLayer){this.$container.find("tbody").on("mouseenter","td",function(){var $content=null;if($(this).find(".contentarea").length>0){$content=$(this).find(".contentarea");}
if(!$content)return;if($content.find(".seat").html()||$content.find(".price").html()){var offset=$content.offset(),top=offset.top+$content.height(),left=offset.left+"px";_this.$layer.css({"left":left,"top":top}).show();_this.opts.showLayerFn($content,_this.$layer);}}).on("mouseleave","td",function(){_this.$layer.hide();});_this.$layer.on("mouseenter",function(){_this.$layer.show();}).on("mouseleave",function(){_this.$layer.hide();});}};DCalendar.prototype.itemClickHandler=function(ev,flag){var target=ev.target;var $content=null;if($(target).hasClass("contentarea")){$content=$(target);}else if($(target).parent().hasClass("contentarea")){$content=$(target).parent();}
if(!$content)return;this.setValue(flag,$content);};DCalendar.prototype.writeValue=function(){var $content=null,activeDate=this.opts.activeDate;if(activeDate instanceof Date){var y=activeDate.getFullYear(),m=activeDate.getMonth()+1,d=activeDate.getDate();m=(m<10)?"0"+m:m;activeDate=String(y)+m+d;}
$content=this.$container.find("div[data-date='"+activeDate+"']");if($content.length)this.setValue("click",$content);var $tables=this.$container.find("table");var num=this._calcMonthNumber(this.opts.startDate,new Date(activeDate.substring(0,4),activeDate.substring(4,6)-1));num=num<=0?0:num;var startRenderIndex=(num+this.opts.num)<=$tables.length?num:(num-this.opts.num+1);for(var i=startRenderIndex;i<(startRenderIndex+this.opts.num);i++){var $table=$tables.eq(i);if(!$table.length)continue;if(!$table.data("isRendered")){this._createContent($table);this._addDays($table,$table.data("date"));$table.data("isRendered",true);}
this.renderData($table);}
for(var i=0;i<num;i++){var $rightBtn=this.$container.find("table").eq(this.opts.num-1).find(".rightBtn");this.btnClickHandler(null,$rightBtn);}};DCalendar.prototype.setMoveStyle=function($content){if($content.hasClass("active"))return;this.removeAllClass("move");$content.addClass("move").children().addClass("move");};DCalendar.prototype.setActive=function($content){this.removeAllClass("active");$content.removeClass("move").children().removeClass("move");$content.addClass("active").children().addClass("active");};DCalendar.prototype.removeAllClass=function(clsName){this.$container.find(".contentarea").removeClass(clsName).children().removeClass(clsName);};DCalendar.prototype.setValue=function(flag,$content){if($content.find(".seat").html()||$content.find(".price").html()){if(this.opts.addBtn&&this.compareValue($content)||!this.opts.addBtn){$content.css("cursor","pointer");if(flag==="click"){this.setActive($content);if(this.cbFn&&Object.prototype.toString.call(this.cbFn)=="[object Function]"){this.cbFn($content);}}else{this.setMoveStyle($content);}}}else{$content.css("cursor","default");this.removeAllClass("move");}};DCalendar.prototype.compareValue=function($content){var date1=parseInt($.date2Str("YYYYMMdd",new Date()));if($content.data()){var date2=parseInt($content.data().date||0);if(date2>=date1){if(date2==date1){if(date2==date1){$content.find(".date").css("font-size","12px").html("今天");}}
return true}else{return false;}}};DCalendar.prototype.btnClickHandler=function(event,btn){if($(btn).find("img").attr("data-state")==="disable")return;var $table=$(btn).parents("table");var curTableIndex=$table.attr("data-index");var iSpeed=$(btn).hasClass("leftBtn")?-1:1;var $nextTable=this.$container.find("table[data-index='"+(parseInt(curTableIndex)+iSpeed)+"']");if(!$nextTable.data("isRendered")){this._createContent($nextTable);this._addDays($nextTable,$nextTable.data("date"));this.renderData($nextTable);$nextTable.data("isRendered",true);}
var $tables=this.$container.find("table");if($(btn).hasClass("leftBtn")){$tables.eq($tables.length-1).insertBefore($tables.eq(0));}else{this.$container.append($tables.eq(0));}
var resultArr=[];this.setBtnState();};function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}
function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}
DCalendar.week=["日","一","二","三","四","五","六"];DCalendar.leftUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAQCAYAAAAvf+5AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMzE2RjRGQzY0QjIxMUU4OUJCNEJBOUUyQ0RDMTcyNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMzE2RjRGRDY0QjIxMUU4OUJCNEJBOUUyQ0RDMTcyNSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAzMTZGNEZBNjRCMjExRTg5QkI0QkE5RTJDREMxNzI1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAzMTZGNEZCNjRCMjExRTg5QkI0QkE5RTJDREMxNzI1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+RKeTEAAAAMRJREFUeNpi+P//PwMe7ADE64DYBJ8iOyB+/h8CinEpcgPil1BFTUDMjk2RBxC/hyqqB2JGkDi6oiAkRRXIcsiKwoD4C1RRIbpNMEYcEH8H4t9AnIPN3SAiBoj/QBUl4woFJgYGhsdA/ASIWYBYGohBYpgAqkMHiK9D3deLy2oY1kZSPAUUdrgUgrAqEJ+FKp4FxGy4FIKwIhCfhipeAsTcuBSCsBwQH4UqXgbE4vgShRQQH4IqzmMgkMzkgbgUiMUAAgwAG7XmKssoKc0AAAAASUVORK5CYII=";DCalendar.leftDisUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAQCAYAAAAvf+5AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozOTU3REU1MDY0QjExMUU4QTY0QkE0RURBMTg5MDIzOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozOTU3REU1MTY0QjExMUU4QTY0QkE0RURBMTg5MDIzOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM5NTdERTRFNjRCMTExRThBNjRCQTRFREExODkwMjM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM5NTdERTRGNjRCMTExRThBNjRCQTRFREExODkwMjM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Sb9ZGAAAAMlJREFUeNqE0tEKAVEQxnFHkmJDpChR3Ehx6SmkhCcVrVwQpRSJR/AGLkXHf2q2tu3smvrV1vma5pwdY61NJVQbIxwyCaEWZijgGRfsYIo89ji7gl3tlMNOgzYa7GGioS2OwUE42NdQFj5O4Q5BcIgx0ljJTNF5JDjQTlJLXF23kw4vJd8ejCto9MFrWKCqs/lxwWhYZtzg4wpKVfQN67joxb6uoFQZczRw1wu+TcxSFLVzEw+Z2SRsj6dhWY61+bNmJf1jt58AAwBylzjV3+Hq9gAAAABJRU5ErkJggg==";DCalendar.rightUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAQCAYAAAAvf+5AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQjZENTM2RDY0QjIxMUU4OEZBRkMxM0FBRjZFODcwOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQjZENTM2RTY0QjIxMUU4OEZBRkMxM0FBRjZFODcwOSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBCNkQ1MzZCNjRCMjExRTg4RkFGQzEzQUFGNkU4NzA5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBCNkQ1MzZDNjRCMjExRTg4RkFGQzEzQUFGNkU4NzA5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+T66DsgAAALxJREFUeNpi+P//vwkQrwNiByBmwIVBRPF/CHgOxHb4FLIDcRNU8UsgdsOlEIQZgbgeqvg9EHvgUgjDFUiKg/ApBOFCqOIvQByGTyEI5wDxbyD+DsRx+BSCcDJU8R8gjmFiwA5A4tJAzALET4D4MS7TeqHuvA7EOtisBoXpFCRF2tg8wwbEs6CKzgKxKrbg4QbiJVBFp4FYEVuAiwPxMqiio0AshysK86CKDgGxFL5EIQbEpUAsjy+ZAQQYAH0V5ipoiznDAAAAAElFTkSuQmCC";DCalendar.rightDisUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAQCAYAAAAvf+5AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0MDk1NzVBNDY0QjExMUU4OTIwQ0EwRDRBMzVEOTk1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0MDk1NzVBNTY0QjExMUU4OTIwQ0EwRDRBMzVEOTk1NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQwOTU3NUEyNjRCMTExRTg5MjBDQTBENEEzNUQ5OTU3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQwOTU3NUEzNjRCMTExRTg5MjBDQTBENEEzNUQ5OTU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+2DZJgAAAANBJREFUeNp80k8LAUEYx/HB5oJydvIGOFAr/+Igi9y9RyTyShzkwkGKEsm/koP1HT1K24ynPjtT+2uaeWaU7/sp9JCGsgnxKSmlmrhhgLUylA46jFXUcMcIK1PwM0qwjgeGWJqC36qgIeEJFragriI8PCU8twV1uWjhhSlmtqCuHLoyH4ctIX24BPT/i2Zb0ZO9HtDHPhh0pPnubyh4mAg6yGMnvTwG2xOVjWexlas8BRselz1lsJGVzqYrLDC25THo0NXYB4IxlJH898zeAgwAd16Ktin4ri8AAAAASUVORK5CYII=";})(jQuery,window,document);;(function($,window,document){$.fn.showCalTime=function(options,cbfn){if(this.length==0)throw new Error("DOM绑定错误，请确认页面是否加载完毕");var oInput=this.get(0);var sct=new ShowCalTime(oInput,options,cbfn);sct.show();};$.fn.showCalTime.options={dateOpts:{doubleCalendar:false,dateFmt:'yyyy年MM月dd日',errDealMode:'2'},hiddenInput:"#hiddencaltime",setToday:true,calInputId:null};function ShowCalTime(elem,options,callbackfn){this.elem=elem;this.$elem=$(elem);this.callback=callbackfn||$.noop;this.opts=$.extend({},$.fn.showCalTime.options,options);this.fnName=this.opts.dateOpts.onpicked?this.opts.dateOpts.onpicked:$.noop;this.init();}
ShowCalTime.prototype.init=function(){this.$container=$('<div class="calender-time"></div>');this.$hidden=this.opts.hiddenInput?$(this.opts.hiddenInput):null;this.$elem.append(this.$container);this.renderData();};ShowCalTime.prototype.renderData=function(){this.$container.html("");var date=new Date();var toDay=date.getFullYear()+"-"+formatting(date.getMonth()+1)+"-"+formatting(date.getDate())+" "+formatting(date.getHours())+":"+formatting(date.getMinutes())+":"+formatting(date.getSeconds());toDay=this.opts.setToday?toDay:"";var dateTime=this.$hidden.val()?this.$hidden.val():toDay;var dateString=dateTime?dateTime.split(" ")[0].split("-")[0]+"年"+dateTime.split(" ")[0].split("-")[1]+"月"+dateTime.split(" ")[0].split("-")[2]+"日":"";var hours=dateTime?dateTime.split(" ")[1].split(":")[0]:"00";var minutes=dateTime?dateTime.split(" ")[1].split(":")[1]:"00";var seconds=dateTime?dateTime.split(" ")[1].split(":")[2]:"00";var calInputId=this.opts.calInputId?this.opts.calInputId:"";this.$calselect=$('<div class="calender-select">'+'<input id="'+calInputId+'" readonly="readonly" style="width:100px" value="'+dateString+'" placeholder="&nbsp;&nbsp;&nbsp;&nbsp;年&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;日">'+'<img src="'+ShowCalTime.imgUrl+'" height="16">'+'</div><span style="margin-left: 3px;">'+'<input type="num" class="hour" value="'+hours+'" placeholder="00" maxlength="2">时 '+'<input type="num" class="minute" value="'+minutes+'" placeholder="00" maxlength="2">分 '+'<input type="num" class="second" value="'+seconds+'" placeholder="00" maxlength="2">秒</span>');this.$container.append(this.$calselect);this.bindEvent();};ShowCalTime.prototype.bindEvent=function(){var _this=this;var calparam=_this.opts.dateOpts;_this.opts.dateOpts.onpicked=$.proxy(_this.pickedFunc,this);_this.opts.dateOpts.dateFmt='yyyy年MM月dd日';_this.opts.dateOpts.readOnly=true;_this.$container.find(".calender-select input").on("click",function(){WdatePicker(calparam);});_this.$container.find("input[type=num]").on("focus",function(){$(this).select();}).on("keyup",function(){var value=$(this).val();if(!ShowCalTime.isNumber(value)){$(this).val("00");}else{if($(this).attr("class")=="hour"){if(value>23)$(this).val(23);}else{if(value>59)$(this).val(59);}}}).on("blur",function(){_this.cfnDate();});};ShowCalTime.isNumber=function(value){return!isNaN(value);};ShowCalTime.prototype.pickedFunc=function(){this.cfnDate();this.fnName();};ShowCalTime.prototype.show=function(){if(this.isShow)return;this.$container.css("visibility","visible");this.isShow=true;};ShowCalTime.prototype.hide=function(){if(!this.isShow)return;this.$container.css({"visibility":"hidden"});this.isShow=false;};ShowCalTime.prototype.cfnDate=function(){var nyear="",nmonth="",nday="";var calendar=this.$container.find(".calender-select input").val();if(calendar){var array=this.$container.find(".calender-select input").val().split(/[年月日]/);nyear=parseInt(array[0],10);nmonth=formatting(parseInt(array[1],10));nday=formatting(parseInt(array[2],10));this.$container.find(".calender-select input").val(nyear+"年"+nmonth+"月"+nday+"日");}else{this.$container.find(".calender-select input").val("");}
var nhours=this.$container.find(".hour").val(),nminutes=this.$container.find(".minute").val(),nseconds=this.$container.find(".second").val();nhours=formatting(parseInt(nhours,10));nminutes=formatting(parseInt(nminutes,10));nseconds=formatting(parseInt(nseconds,10));if(calendar&&nhours&&nminutes&&nseconds){var string=nyear+"-"+nmonth+"-"+nday+" "+nhours+":"+nminutes+":"+nseconds;}else{var string="";}
this.$container.find(".hour").val(nhours);this.$container.find(".minute").val(nminutes);this.$container.find(".second").val(nseconds);this.$hidden.val(string);this.callback(string);};function formatting(t){return t<10?'0'+t:t;}
ShowCalTime.imgUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjg0QjNGQTQyMzQwMjExRThCNzk5QjBGNzdGMTA5MjJFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjg0QjNGQTQzMzQwMjExRThCNzk5QjBGNzdGMTA5MjJFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODRCM0ZBNDAzNDAyMTFFOEI3OTlCMEY3N0YxMDkyMkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODRCM0ZBNDEzNDAyMTFFOEI3OTlCMEY3N0YxMDkyMkUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4n8tusAAABQUlEQVR42pSTTytEURjGzzDyN8XCQmJEioVYmJUkC0WSIgufwEb5CBZ8AqVYsbHQRFkodkosJR+A1FhYaLBSwu+t59brdi556nff89xz5umcc9/JdZ4fBmkV+mEPLkNcczCleVsX8lCAGf14GU5hMiNgCRZhHxqgVMXjADahFr6gqBqjT0HtsAXbFtCml/VQDTUhW42qdaqteTc5DzfaWpZ6tWYweZEEvMEndMBL+F1dWpP3AZZ4H/6ncVjzR2iCBY2PVWdVS3ZemJDfTR/B1KxeMF253jCdQY/z0YAnNYrp0TVOMldxPsQC7ALvNB5WvVbthiE4ks/FAh6gxX2V4PwrlJ2P7sC660LjadUT1VEYgB35Qizg2V1SOXWJNnfr/I8dfMCYjlBJ3UHiiylvPTBizWcBG7Dyx38gpndY/xZgAF/fP2GL3ZpdAAAAAElFTkSuQmCC";})(jQuery,window,document);;(function($,window,document){$.extend({"cascadeFactory":cascadeFactory});function cascadeFactory(){var cascadePulldown=new CascadePulldown(arguments);}
function CascadePulldown(arr){this.pulldowns=[];for(var i=0,len=arr.length;i<len;i++){var arg=arr[i];this.creaetPulldown(arg,i);}}
CascadePulldown.prototype.creaetPulldown=function(arg,index){var originalCbFn=arg.cbFn||function(){};var that=this;arg.cbFn=function(data){var currDataIndex=this.$elem.data("data-index");if(that.pulldowns.length-1!==currDataIndex){var pulldown=that.pulldowns[parseInt(currDataIndex)+1];that.clearOtherInputs(currDataIndex+1);pulldown.setPid(data.id);pulldown.reloadData(true);}
originalCbFn.apply(null,arguments);}
$(arg["txt"]).data("data-index",index);this.pulldowns[index-1]&&$(arg["txt"]).data("prev-id",this.pulldowns[index-1].id);var pulldownObj=$(arg["txt"]).addPulldown("single",arg);this.pulldowns.push(pulldownObj);};CascadePulldown.prototype.clearOtherInputs=function(index){for(var i=index;i<this.pulldowns.length;i++){this.pulldowns[i].$elem.val("");}};})(jQuery,window,document);;(function($,window,document){$.fn.addVetechChoose=function(options,cbFn){if(!this.length)throw new Error("DOM绑定失败，请确认页面是否加载完毕！");var oInput=this.get(0);manager.clear(oInput);var vChoose=new VetechChoose(oInput,options,cbFn);if(!(options&&options.freeBinding)){$(oInput).on("click",inputClickHandler);manager.addEvent(vChoose.id,"click",inputClickHandler);}
return vChoose;};function inputClickHandler(ev){var ids=$(ev.target).attr("vetech-ids");var component=manager.getComponent(ids);component.show();}
$.fn.addVetechChoose.options={descInfo:'用鼠标双击即可移动选项，也可以拉蓝选择城市后点击"添加"即可',title1:"已选择的城市",title2:"未选择的城市",simpleData:{id:"id",name:"name"},freeBinding:false,usetype:"",renderFn1:null,renderFn2:null};function VetechChoose(elem,options,cbFn){this.id="vetech-choose-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.addVetechChoose.options,options);this.cbFn=cbFn||function(){};this.$hiddenInput=$("#"+this.opts.hiddenName);this.isShow=false;this.dataStore={};this.init();manager.manage(this);}
var fn=VetechChoose.prototype;fn.init=function(){this.$container=$('<div class="vetech-choose-container"></div>');this.$content=$('<div class="content clearfix"></div>');this.$toolbar=$('<div class="toolbar"></div>');this.$desc=$('<div class="desc"><strong>注</strong>:'+this.opts.descInfo+'</div>');this.$container.append(this.$content).append(this.$toolbar).append(this.$desc);var $chooseWrap=$('<div class="chooseWrap"></div>');$chooseWrap.append('<h3 class="title">'+this.opts.title1+'</h3>').append('<select multiple="multiple"></select>');var $operateWrap=$('<div class="operateWrap"></div>');$operateWrap.append('<input type="button" class="addBtn" value="添加" /><br />');$operateWrap.append('<input type="button" class="addAllBtn" value="全部添加" /><br />');$operateWrap.append('<input type="button" class="delBtn" value="删除" /><br />');$operateWrap.append('<input type="button" class="delAllBtn" value="全部删除" />');var $unChooseWrap=$('<div class="unChooseWrap"></div>');$unChooseWrap.append('<h3 class="title">'+this.opts.title2+'</h3>').append('<select multiple="multiple"></select>');this.$content.append($chooseWrap).append($operateWrap).append($unChooseWrap);this.$toolbar.append('<input type="button" value="确认选择" />').append('<input type="button" value="关闭窗口" />');$(document.body).append(this.$container);this.loadData();this.bindEvent();};fn.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"post",url:_this.opts.typeValue,dataType:"json",data:"hkgs="+this.opts.hkgs+"&cfcity="+this.opts.cfcity+"&hasChecked="+this.opts.hasChecked+"&type="+(this.opts.usetype?this.opts.usetype:""),success:function(data){_this.data=data;_this.render();}});}};fn.render=function(){if(this.data&&Object.prototype.toString.call(this.data["checkedData"])==="[object Array]"){var checkedData=this.data["checkedData"];for(var i=0,len=checkedData.length;i<len;i++){this.addItem(checkedData[i],"left");}}
if(this.data&&Object.prototype.toString.call(this.data["unCheckedData"])==="[object Array]"){var unCheckedData=this.data["unCheckedData"];for(var i=0,len=unCheckedData.length;i<len;i++){this.addItem(unCheckedData[i],"right");}}
this.sureHandler();if(this.opts.freeBinding)this.show();};fn.addItem=function(data,position){var $wrap=(position==="left")?this.$content.find(".chooseWrap"):this.$content.find(".unChooseWrap");var $select=$wrap.find("select");var renderFn=(position==="left")?this.opts.renderFn1:this.opts.renderFn2;var $option=renderFn?$(renderFn(data)):$('<option value="'+data[this.opts.simpleData.id]+'">'+data[this.opts.simpleData.name]+'('+data[this.opts.simpleData.id]+')</option>');$select.append($option);this.dataStore[data[this.opts.simpleData.id]]=data;};fn.bindEvent=function(){var _this=this;this.$container.on("click",stopEvent);this.$toolbar.find("input").first().on("click",$.proxy(this.sureHandler,this));this.$toolbar.find("input").last().on("click",$.proxy(this.hide,this));var $operateWrap=this.$content.find(".operateWrap");$operateWrap.find(".addBtn").on("click",$.proxy(this.addHandler,this,"add"));$operateWrap.find(".addAllBtn").on("click",$.proxy(this.addHandler,this,"addAll"));$operateWrap.find(".delBtn").on("click",$.proxy(this.delHandler,this,"del"));$operateWrap.find(".delAllBtn").on("click",$.proxy(this.delHandler,this,"delAll"));this.$content.find("select").on("dblclick",$.proxy(this.dbClickHandler,this));$(document).on("click",function(ev){var target=ev.target;if(target===_this.elem)return;_this.hide();});};fn.sureHandler=function(){var $wrap=this.$content.find(".chooseWrap");var $options=$wrap.find("select").find("option");var checkeds=[],values=[],ids=[];for(var i=0,len=$options.length;i<len;i++){var data=this.dataStore[$options.eq(i).val()];checkeds.push(data);values.push(data[this.opts.simpleData.name]);ids.push(data[this.opts.simpleData.id]);}
this.$elem.val(values.join(this.opts.splitStr));this.$hiddenInput.val(ids.join(this.opts.splitStr));this.cbFn(checkeds);this.hide();};fn.addHandler=function(flag){var $wrap=this.$content.find(".unChooseWrap");var $targetWrap=this.$content.find(".chooseWrap");var $addOptions=("add"===flag)?$wrap.find("select").find("option:selected"):$wrap.find("select").find("option");$targetWrap.find("select").append($addOptions.remove());}
fn.delHandler=function(flag){var $wrap=this.$content.find(".chooseWrap");var $targetWrap=this.$content.find(".unChooseWrap");var $delOptions=("del"===flag)?$wrap.find("select").find("option:selected"):$wrap.find("select").find("option");$targetWrap.find("select").append($delOptions.remove());};fn.dbClickHandler=function(ev){var $selectOption=$(ev.currentTarget).find("option:selected");var $targetWrap=$selectOption.parents("div").hasClass("unChooseWrap")?this.$content.find(".chooseWrap"):this.$content.find(".unChooseWrap");$targetWrap.find("select").append($selectOption.remove());};fn.show=function(){if(this.isShow)return;this.setPos();this.$container.show();this.isShow=true;};fn.hide=function(){if(!this.isShow)return;this.$container.hide();this.isShow=false;};fn.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+this.$elem.outerHeight()});};fn.destroy=function(){this.$container.remove();};function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}})(jQuery,window,document);;(function($,window,document){$.fn.addCityList=function(options,cbFn){if(this.length===0)throw new Error("DOM绑定错误");var oInput=this.get(0);manager.clear(oInput);var cityList=new CityList(oInput,options,cbFn);$(oInput).on("click",inputClickHandler);manager.addEvent(cityList.id,"click",inputClickHandler);};$.fn.addCityList.options={width:600,labelWidth:74,model:"radio",reload:null,splitStr:",",type:3,editable:true,typeValue:"/component/data/cityList.data.js"};function inputClickHandler(ev){var target=ev.target;var ids=target.getAttribute("vetech-ids");var component=manager.getComponent(ids);component.show();}
function CityList(elem,options,cbFn){this.id="cityList-"+new String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.data=[];this.dataBuffer={};this.cbFn=cbFn;this.opts=$.extend({},$.fn.addCityList.options,options);this.isShow=false;if(!this.opts.hiddenName){this.opts.hiddenName=this.elem.id+"- hiddenInput";this.$hiddenInput=$("<input type='hidden' id='"+this.opts.hiddenName+"' name='"+this.opts.hiddenName+"'/>")
this.$elem.parent().append(this.$hiddenInput);}else{this.$hiddenInput=$(document.body).find("#"+this.opts.hiddenName);}
if(this.$hiddenInput.length===0){throw new Error("隐藏域配置错误，页面中没有找到该隐藏域。");}
manager.manage(this);this.loadData();}
CityList.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};CityList.prototype.render=function(){if(!this.$container){this.$container=$('<div class="city-list"></div>');this.$container.css("width",this.opts.width);$(document.body).append(this.$container);}
if(this.opts.model==="checkbox"){this.$toolbar=$('<div class="city-toolbar"></div>');this.$toolbar.append("<label><input type='checkbox'>全选</label>");this.$toolbar.append('<a href="javascript:;">清空选择</a>');this.$container.append(this.$toolbar);}
var divideArray=this.divideGroups(JSON.parse(JSON.stringify(this.data)));this.renderData(divideArray);};CityList.prototype.divideGroups=function(dataList){var divideNum=0;if(dataList.length<20){divideNum=1;}else if(dataList.length<30){divideNum=2;}else if(dataList.length<40){divideNum=3;}else{divideNum=4;}
var showNum=Math.floor(dataList.length/divideNum);var diviedArray=[];for(var i=0;i<divideNum;i++){if(i==divideNum-1){diviedArray.push(dataList);}else{var tempArr=dataList.splice(0,showNum);var first=tempArr[tempArr.length-1]["first"];var sameNum=findSameFirst(first,dataList);if(sameNum>0)tempArr=tempArr.concat(dataList.splice(0,sameNum));diviedArray.push(tempArr);}}
function findSameFirst(first,dataList){var count=0;for(var i=0;i<dataList.length;i++){if(dataList[i]["first"]==first)
count++;else break;}
return count;}
return diviedArray;};CityList.prototype.renderData=function(dataGroups){this.dataBuffer=[];var ddWidth=this.opts.width-60;for(var i=0,len=dataGroups.length;i<len;i++){var $dl=$('<dl class="clearfix"></dl>');var $dt=$('<dt></dt>');var $dd=$('<dd></dd>');$dd.css("width",ddWidth)
var tempData=dataGroups[i],titleArr=[];for(var j=0,len2=tempData.length;j<len2;j++){if(j===0||j===len2-1){titleArr.push(tempData[j].first);}
var $label=$('<label></label>');$label.css("width",this.opts.labelWidth);var $input=$('<input data-id="'+tempData[j].id+'" type="'+this.opts.model+'"/>');var $span=$('<span title="'+tempData[j].name+'">'+tempData[j].name+'</span>');if(this.opts.model==="radio"){$input.attr("name",this.id);}
$label.append($input).append($span);$dd.append($label);this.dataBuffer[tempData[j].id]={"data":tempData[j],"$node":$label};}
$dt.append('<em>'+titleArr.join("-")+'</em>');$dl.append($dt).append($dd);this.$container.append($dl);}
this.bindEvent();this.writeValue();};CityList.prototype.bindEvent=function(){var eventType=("checkbox"===this.opts.model)?"change":"click";this.$container.find("input").on(eventType,deepBind(this,this.itemClickHandler));var _this=this;$(document).on("click",function(ev){if(ev.target!==_this.elem)_this.hide();});this.$container.on("click",deepBind(this,this.stopEvent));if(this.$toolbar){var $input=this.$toolbar.find("input"),$a=this.$toolbar.find("a");$input.on("change",deepBind(this,this.checkedAllHandler,$input.get(0)));$a.on("click",deepBind(this,this.clearCheckedHandler));}
if(!this.opts.editable){this.$elem.on("keydown",function(){return false;})}};CityList.prototype.clearCheckedHandler=function(){this.$container.find("input:checked").each(function(i,item){this.checked=false;});this.setValue("");};CityList.prototype.checkedAllHandler=function(event,checkbox){this.$container.find("input").each(function(){this.checked=checkbox.checked;});this.setValue("");};CityList.prototype.itemClickHandler=function(ev){var dataId="";if(this.opts.model==="radio"){var ev=ev||window.event;var target=ev.target;dataId=$(target).attr("data-id");}
this.setValue(dataId);};CityList.prototype.setValue=function(id){var dataArr=[],keys=[],values=[];if(id){var item=this.dataBuffer[id];dataArr.push(item);values.push(item.data.name);keys.push(item.data.id);setTimeout(deepBind(this,this.hide),200);}else{for(var key in this.dataBuffer){if(!this.dataBuffer.hasOwnProperty(key))continue;var item=this.dataBuffer[key];if(item["$node"].find("input").get(0).checked){dataArr.push(item);keys.push(item.data.id);values.push(item.data.name);}}}
this.$hiddenInput.val(keys.join(this.opts.splitStr));this.$elem.val(values.join(this.opts.splitStr));this.cbFn&&this.cbFn(dataArr);this.$elem.focus();};CityList.prototype.writeValue=function(){if(!this.$hiddenInput.val())return;var values=[],tempKeys=[],dataArr=[],keys=this.$hiddenInput.val().split(this.opts.splitStr);for(var i=0,len=keys.length;i<len;i++){var item=this.dataBuffer[keys[i]];if(!item)continue;dataArr.push(item);values.push(item.data.name);tempKeys.push(item.data.id);item["$node"].find("input").get(0).checked=true;if(this.opts.model==="radio")break;}
this.$elem.val(values.join(this.opts.splitStr));this.$hiddenInput.val(tempKeys.join(this.opts.splitStr));this.cbFn&&this.cbFn(dataArr);};CityList.prototype.show=function(){if(this.elem.readOnly)return;if(this.opts.reload&&Object.prototype.toString.call(this.opts.reload)==="[object Function]"){var result=this.opts.reload();if(result.init){this.reRender(result.data);}}
this.isShow=true;this.setPos();this.$container.css("visibility","visible");};CityList.prototype.hide=function(){this.$container.css({"visibility":"hidden","left":0,"top":0});this.isShow=false;};CityList.prototype.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iHeight=$(document).outerHeight(),iLeft=0,iTop=pointer.top+this.$elem.outerHeight();iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop});};CityList.prototype.reRender=function(data){this.data=data;this.$container.html("");this.render();};CityList.prototype.stopEvent=function(ev){var ev=ev||window.event;if(ev.stopPropagation){ev.stopPropagation();}else{ev.cancelBubble=true;}};function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(ev){fn.apply(object,[ev||window.event].concat(args));}}})(jQuery,window,document);$(function(){if(!window.clipboardData){var oHead=document.getElementsByTagName('HEAD').item(0);var oScript=document.createElement("script");oScript.type="text/javascript";oScript.src="/static/core/zeroclipboard/clipboard.min.js";oHead.appendChild(oScript);}
$(document).on("mouseenter",".copytext",function(){var text=$(this).attr("copytext");var showText=$(this).attr("showtext");var copyText=encodeURIComponent($.trim(text));var msgHtml='<a href="javascript:;" class="xubox_tipsMsg" style="cursor: pointer;color:#fff;white-space:nowrap;" onclick=copy("'+copyText+'")>复制 <span style="">'+(showText||text)+'</span></a>';layer.tips(msgHtml,this,{guide:1,tips:[1,'#1fc1ae']});});});function copy(text){text=decodeURIComponent(text);$(".xubox_layer").remove();if(window.clipboardData){window.clipboardData.setData("text",text);}else{var clipboard=new Clipboard('.xubox_tipsMsg',{text:function(){return text;}});clipboard.on('success',function(e){});clipboard.on('error',function(e){});}
layer.closeAll("tips");return false;};(function($,window,document){$.fn.colorPicker=function(options){if(!this.length)throw new Error("DOM绑定错误！");var oInput=this.get(0);manager.clear(oInput);var colorPikcer=new ColorPicker(oInput,options);$(oInput).on("click",inputItemClickHandler);manager.addEvent(colorPikcer.id,"click",inputItemClickHandler);}
function inputItemClickHandler(ev){var target=ev.target;var ids=target.getAttribute("vetech-ids");var component=manager.getComponent(ids);component.show();}
var defaultOptions={animationSpeed:50,animationEasing:'swing',change:null,changeDelay:0,control:'hue',defaultValue:'#fff',hide:null,hideSpeed:100,inline:false,letterCase:'lowercase',opacity:false,position:'bottom left',show:null,showSpeed:100,showSwatch:true,theme:'default'};function ColorPicker(dom,options){this.id="vetech-colorPicker-"+String(Math.random(2));this.elem=dom;this.$elem=$(dom);this.settings=$.extend({},defaultOptions,options);this.lastChange={};this.timer=null;manager.manage(this);this.init();}
ColorPicker.prototype.init=function(){this.$container=$('<div class="minicolors"></div>');this.$container.addClass('minicolors-theme-'+this.settings.theme).toggleClass('minicolors-with-opacity',this.settings.opacity);this.$elem.addClass("minicolors-input").prop('size',7);this.$colorPanel=$('<div class="minicolors-panel minicolors-slider-'+this.settings.control+'"></div>');this.$slider=$('<div class="minicolors-slider"><div class="minicolors-picker"></div></div>');this.$opacitySlider=$('<div class="minicolors-opacity-slider"><div class="minicolors-picker"></div></div>');this.$picker=$('<div class="minicolors-grid"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div>');this.$container.find(".minicolors-panel").append(this.$picker);this.$container.append(this.$colorPanel.append(this.$slider).append(this.$opacitySlider).append(this.$picker));if(this.settings.showSwatch){this.$swatch=$('<span class="minicolors-swatch"><span class="minicolors-swatch-color"></span></span>');this.elemOffset();$(document.body).append(this.$swatch);}
this.bindEvent();$(document.body).append(this.$container);this.updateFromInput(false);};ColorPicker.prototype.elemOffset=function(){var pointer=this.$elem.offset();var iWidth=this.elem.clientHeight-2;this.$swatch.css({"left":pointer.left+2,"top":pointer.top+2,"width":iWidth,"height":iWidth});this.$elem.css("padding-left",iWidth+5);};ColorPicker.prototype.updateFromInput=function(preserveInputValue){var hex,hsb,opacity,x,y,r,phi,input,minicolors=this.$container,settings=this.settings;swatch=this.$swatch;input=this.$elem;grid=minicolors.find('.minicolors-grid'),slider=minicolors.find('.minicolors-slider'),opacitySlider=minicolors.find('.minicolors-opacity-slider'),gridPicker=grid.find('[class$=-picker]'),sliderPicker=slider.find('[class$=-picker]'),opacityPicker=opacitySlider.find('[class$=-picker]');hex=convertCase(parseHex(input.val(),true),settings.letterCase);if(!hex){hex=convertCase(parseHex(settings.defaultValue,true),settings.letterCase);}
hsb=hex2hsb(hex);if(!preserveInputValue)input.val(hex);if(settings.opacity){opacity=input.attr('data-opacity')===''?1:keepWithin(parseFloat(input.attr('data-opacity')).toFixed(2),0,1);if(isNaN(opacity))opacity=1;input.attr('data-opacity',opacity);swatch.find('SPAN').css('opacity',opacity);y=keepWithin(opacitySlider.height()-(opacitySlider.height()*opacity),0,opacitySlider.height());opacityPicker.css('top',y+'px');}
swatch.find('SPAN').css('backgroundColor',hex);switch(settings.control){case'wheel':r=keepWithin(Math.ceil(hsb.s*0.75),0,grid.height()/2);phi=hsb.h*Math.PI/180;x=keepWithin(75-Math.cos(phi)*r,0,grid.width());y=keepWithin(75-Math.sin(phi)*r,0,grid.height());gridPicker.css({top:y+'px',left:x+'px'});y=150-(hsb.b/(100/grid.height()));if(hex==='')y=0;sliderPicker.css('top',y+'px');slider.css('backgroundColor',hsb2hex({h:hsb.h,s:hsb.s,b:100}));break;case'saturation':x=keepWithin((5*hsb.h)/12,0,150);y=keepWithin(grid.height()-Math.ceil(hsb.b/(100/grid.height())),0,grid.height());gridPicker.css({top:y+'px',left:x+'px'});y=keepWithin(slider.height()-(hsb.s*(slider.height()/100)),0,slider.height());sliderPicker.css('top',y+'px');slider.css('backgroundColor',hsb2hex({h:hsb.h,s:100,b:hsb.b}));minicolors.find('.minicolors-grid-inner').css('opacity',hsb.s/100);break;case'brightness':x=keepWithin((5*hsb.h)/12,0,150);y=keepWithin(grid.height()-Math.ceil(hsb.s/(100/grid.height())),0,grid.height());gridPicker.css({top:y+'px',left:x+'px'});y=keepWithin(slider.height()-(hsb.b*(slider.height()/100)),0,slider.height());sliderPicker.css('top',y+'px');slider.css('backgroundColor',hsb2hex({h:hsb.h,s:hsb.s,b:100}));minicolors.find('.minicolors-grid-inner').css('opacity',1-(hsb.b/100));break;default:x=keepWithin(Math.ceil(hsb.s/(100/grid.width())),0,grid.width());y=keepWithin(grid.height()-Math.ceil(hsb.b/(100/grid.height())),0,grid.height());gridPicker.css({top:y+'px',left:x+'px'});y=keepWithin(slider.height()-(hsb.h/(360/slider.height())),0,slider.height());sliderPicker.css('top',y+'px');grid.css('backgroundColor',hsb2hex({h:hsb.h,s:100,b:100}));break;}
this.doChange(hex,opacity);};ColorPicker.prototype.doChange=function(hex,opacity){if(!this.lastChange||this.lastChange.hex!==hex||this.lastChange.opacity!==opacity){this.lastChange={hex:hex,opacity:opacity};if(this.settings.change){if(this.settings.changeDelay){if(this.timer)window.clearTimeout(this.timer);var _this=this;this.timer=window.setTimeout(function(){_this.settings.change.call(this.elem,hex,opacity);},this.settings.changeDelay);}else{this.settings.change.call(this.elem,hex,opacity);}}
this.$elem.trigger('change').trigger('input');}};ColorPicker.prototype.updateFromControl=function(input,target){function getCoords(picker,container){var left,top;if(!picker.length||!container)return null;left=picker.offset().left;top=picker.offset().top;return{x:left-container.offset().left+(picker.outerWidth()/2),y:top-container.offset().top+(picker.outerHeight()/2)};}
var hue,saturation,brightness,x,y,r,phi,hex=this.$elem.val(),opacity=this.$elem.attr('data-opacity'),minicolors=this.$container,settings=this.settings,swatch=minicolors.find('.minicolors-swatch'),grid=this.$picker,slider=this.$slider,opacitySlider=this.$opacitySlider,gridPicker=grid.find('[class$=-picker]'),sliderPicker=slider.find('[class$=-picker]'),opacityPicker=opacitySlider.find('[class$=-picker]'),gridPos=getCoords(gridPicker,grid),sliderPos=getCoords(sliderPicker,slider),opacityPos=getCoords(opacityPicker,opacitySlider);if(target.is('.minicolors-grid, .minicolors-slider')){switch(settings.control){case'wheel':x=(grid.width()/2)-gridPos.x;y=(grid.height()/2)-gridPos.y;r=Math.sqrt(x*x+y*y);phi=Math.atan2(y,x);if(phi<0)phi+=Math.PI*2;if(r>75){r=75;gridPos.x=69-(75*Math.cos(phi));gridPos.y=69-(75*Math.sin(phi));}
saturation=keepWithin(r/0.75,0,100);hue=keepWithin(phi*180/Math.PI,0,360);brightness=keepWithin(100-Math.floor(sliderPos.y*(100/slider.height())),0,100);hex=hsb2hex({h:hue,s:saturation,b:brightness});slider.css('backgroundColor',hsb2hex({h:hue,s:saturation,b:100}));break;case'saturation':hue=keepWithin(parseInt(gridPos.x*(360/grid.width()),10),0,360);saturation=keepWithin(100-Math.floor(sliderPos.y*(100/slider.height())),0,100);brightness=keepWithin(100-Math.floor(gridPos.y*(100/grid.height())),0,100);hex=hsb2hex({h:hue,s:saturation,b:brightness});slider.css('backgroundColor',hsb2hex({h:hue,s:100,b:brightness}));minicolors.find('.minicolors-grid-inner').css('opacity',saturation/100);break;case'brightness':hue=keepWithin(parseInt(gridPos.x*(360/grid.width()),10),0,360);saturation=keepWithin(100-Math.floor(gridPos.y*(100/grid.height())),0,100);brightness=keepWithin(100-Math.floor(sliderPos.y*(100/slider.height())),0,100);hex=hsb2hex({h:hue,s:saturation,b:brightness});slider.css('backgroundColor',hsb2hex({h:hue,s:saturation,b:100}));minicolors.find('.minicolors-grid-inner').css('opacity',1-(brightness/100));break;default:hue=keepWithin(360-parseInt(sliderPos.y*(360/slider.height()),10),0,360);saturation=keepWithin(Math.floor(gridPos.x*(100/grid.width())),0,100);brightness=keepWithin(100-Math.floor(gridPos.y*(100/grid.height())),0,100);hex=hsb2hex({h:hue,s:saturation,b:brightness});grid.css('backgroundColor',hsb2hex({h:hue,s:100,b:100}));break;}
this.$elem.val(convertCase(hex,settings.letterCase));}
if(target.is('.minicolors-opacity-slider')){if(settings.opacity){opacity=parseFloat(1-(opacityPos.y/opacitySlider.height())).toFixed(2);}else{opacity=1;}
if(settings.opacity)input.attr('data-opacity',opacity);}
if(this.settings.showSwatch){this.$swatch.find('SPAN').css({backgroundColor:hex,opacity:opacity});}
this.doChange(hex,opacity);};ColorPicker.prototype.move=function(target,event,animate){var input=this.$elem,settings=this.settings,picker=target.find('[class$=-picker]'),offsetX=target.offset().left,offsetY=target.offset().top,x=Math.round(event.pageX-offsetX),y=Math.round(event.pageY-offsetY),duration=animate?this.settings.animationSpeed:0,wx,wy,r,phi;if(x<0)x=0;if(y<0)y=0;if(x>target.width())x=target.width();if(y>target.height())y=target.height();if(target.parent().is('.minicolors-slider-wheel')&&picker.parent().is('.minicolors-grid')){wx=75-x;wy=75-y;r=Math.sqrt(wx*wx+wy*wy);phi=Math.atan2(wy,wx);if(phi<0)phi+=Math.PI*2;if(r>75){r=75;x=75-(75*Math.cos(phi));y=75-(75*Math.sin(phi));}
x=Math.round(x);y=Math.round(y);}
if(target.is('.minicolors-grid')){picker.stop(true).animate({top:y+'px',left:x+'px'},duration,this.settings.animationEasing,oneBind(this,this.updateFromControl,input,target));}else{picker.stop(true).animate({top:y+'px'},duration,this.settings.animationEasing,oneBind(this,this.updateFromControl,input,target));}};ColorPicker.prototype.hide=function(){if(!this.isShow)return;if(this.settings.inline)return;this.isShow=false;this.$container.css({"visibility":"hidden","left":0,"top":0});if(this.settings.hide)this.settings.hide.call(this.elem);};ColorPicker.prototype.show=function(){if(this.isShow)return;var comps=manager.componentCollection;for(var key in comps){var comp=manager.getComponent(key);comp.hide();}
this.isShow=true;this.setPos();this.$container.css("visibility","visible");if(this.settings.show)this.settings.show.call(this.elem);};ColorPicker.prototype.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+this.elem.offsetHeight});};ColorPicker.prototype.destroy=function(){this.$container.remove();this.$elem.removeProp("size").removeClass("minicolors-input");};ColorPicker.prototype.bindEvent=function(){var _this=this;if(this.$swatch){this.$swatch.on("click",function(event){var event=event||window.event;event.preventDefault();_this.$elem.focus();return false;});}
this.$container.find(".minicolors-panel").on("selectstart",function(){return false}).end();$(document).on('mousedown',function(event){event=event||window.event;var target=event.target||event.srcElement;if(target!==_this.elem){if(!$(target).parents().add(target).hasClass('minicolors'))_this.hide();}});this.$container.on('mousedown.minicolors','.minicolors-grid, .minicolors-slider, .minicolors-opacity-slider',function(event){var target=$(this);event.preventDefault();$(document).data('minicolors-target',target);_this.move(target,event,true);})
$(document).on('mouseup.minicolors',function(){$(this).removeData('minicolors-target');})
this.$container.on('mousemove.minicolors',function(event){var target=$(document).data('minicolors-target');if(target)_this.move(target,event);});this.$elem.on("keydown",function(event){var input=$(this);switch(event.keyCode){case 9:_this.hide();break;case 13:case 27:_this.hide();input.blur();break;}});this.$elem.on("keyup",function(){var input=$(this);if(_this.settings.letterCase==="uppercase"){var value=input.val();input.val((value||"").toUpperCase());}
_this.updateFromInput(input,true);})
this.$elem.on("paste",function(){var input=$(this);setTimeout(function(){_this.updateFromInput(input,true);},1);});};function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}
function rgbObject(input){var hex=parseHex($(input).val(),true),rgb=hex2rgb(hex),opacity=$(input).attr('data-opacity');if(!rgb)return null;if(opacity!==undefined)$.extend(rgb,{a:parseFloat(opacity)});return rgb;}
function rgbString(input,alpha){var hex=parseHex($(input).val(),true),rgb=hex2rgb(hex),opacity=$(input).attr('data-opacity');if(!rgb)return null;if(opacity===undefined)opacity=1;if(alpha){return'rgba('+rgb.r+', '+rgb.g+', '+rgb.b+', '+parseFloat(opacity)+')';}else{return'rgb('+rgb.r+', '+rgb.g+', '+rgb.b+')';}}
function convertCase(string,letterCase){return letterCase==='uppercase'?string.toUpperCase():string.toLowerCase();}
function parseHex(string,expand){string=string.replace(/[^A-F0-9]/ig,'');if(string.length!==3&&string.length!==6)return'';if(string.length===3&&expand){string=string[0]+string[0]+string[1]+string[1]+string[2]+string[2];}
return'#'+string;}
function hex2hsb(hex){var hsb=rgb2hsb(hex2rgb(hex));if(hsb.s===0)hsb.h=360;return hsb;}
function keepWithin(value,min,max){if(value<min)value=min;if(value>max)value=max;return value;}
function hsb2rgb(hsb){var rgb={};var h=Math.round(hsb.h);var s=Math.round(hsb.s*255/100);var v=Math.round(hsb.b*255/100);if(s===0){rgb.r=rgb.g=rgb.b=v;}else{var t1=v;var t2=(255-s)*v/255;var t3=(t1-t2)*(h%60)/60;if(h===360)h=0;if(h<60){rgb.r=t1;rgb.b=t2;rgb.g=t2+t3;}
else if(h<120){rgb.g=t1;rgb.b=t2;rgb.r=t1-t3;}
else if(h<180){rgb.g=t1;rgb.r=t2;rgb.b=t2+t3;}
else if(h<240){rgb.b=t1;rgb.r=t2;rgb.g=t1-t3;}
else if(h<300){rgb.b=t1;rgb.g=t2;rgb.r=t2+t3;}
else if(h<360){rgb.r=t1;rgb.g=t2;rgb.b=t1-t3;}
else{rgb.r=0;rgb.g=0;rgb.b=0;}}
return{r:Math.round(rgb.r),g:Math.round(rgb.g),b:Math.round(rgb.b)};}
function rgb2hex(rgb){var hex=[rgb.r.toString(16),rgb.g.toString(16),rgb.b.toString(16)];$.each(hex,function(nr,val){if(val.length===1)hex[nr]='0'+val;});return'#'+hex.join('');}
function hsb2hex(hsb){return rgb2hex(hsb2rgb(hsb));}
function rgb2hsb(rgb){var hsb={h:0,s:0,b:0};var min=Math.min(rgb.r,rgb.g,rgb.b);var max=Math.max(rgb.r,rgb.g,rgb.b);var delta=max-min;hsb.b=max;hsb.s=max!==0?255*delta/max:0;if(hsb.s!==0){if(rgb.r===max){hsb.h=(rgb.g-rgb.b)/delta;}else if(rgb.g===max){hsb.h=2+(rgb.b-rgb.r)/delta;}else{hsb.h=4+(rgb.r-rgb.g)/delta;}}else{hsb.h=-1;}
hsb.h*=60;if(hsb.h<0){hsb.h+=360;}
hsb.s*=100/255;hsb.b*=100/255;return hsb;}
function hex2rgb(hex){hex=parseInt(((hex.indexOf('#')>-1)?hex.substring(1):hex),16);return{r:hex>>16,g:(hex&0x00FF00)>>8,b:(hex&0x0000FF)};}
function oneBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(){fn.apply(object,args);}}})(jQuery,window,document);;(function($,window,document){$.fn.addTabPulldownComposite=function(args1,args2){if(this.length==0)throw new Error("DOM绑定错误【请查看页面是否渲染完毕，或者是否存在该DOM对象】");var oInput=this.get(0);manager.clear(oInput);var _this=this;try{var opts1=$.extend({},{usetype:"composite"},args1.options);args2.options=$.extend({},{usetype:"composite","touchBlur":false},args2.options);var tabObj=_this.addVeNTab(opts1,args1.cbFn);var orgCbFn=args2.cbFn;args2.cbFn=mycallBack;var tempArgs2=$.extend(true,{},args2);if(args2.options.type=="2"){tempArgs2.options.typeValue+="&iscity="+(args2.options.iscity||"");}
var pulldown=_this.addPulldown2(tempArgs2);$(oInput).on("click",oInputClickHander);$(oInput).on("keyup",oInputKeyUpHander);manager.addEvent(tabObj.id,"click",oInputClickHander);manager.addEvent(pulldown.id,"keyup",oInputKeyUpHander);function oInputClickHander(ev){if(opts1.needStopPagation==true){ev.stopPropagation();}
if((tabObj&&tabObj.isShow)||(pulldown&&pulldown.isShow))return;pulldown.hide();tabObj.show();}
function oInputKeyUpHander(event){var hiddenname=args1.options.hiddenName||tabObj.opts.hiddenName;$('#'+hiddenname).val("");tabObj.clearClickedItems();if(args1.options.clearFn&&typeof args1.options.clearFn==="function"){args1.options.clearFn();}
if($(_this).val()){if(args2.options.type=="2"){pulldown.opts.typeValue=args2.options.typeValue+"&iscity=";}
pulldown&&pulldown.elemKeyUpHandler(event,true);tabObj.hide();}else{pulldown.hide();tabObj.show();}
$(oInput).focus();}
function mycallBack(data){if(tabObj.opts.loadStaticHtml===true){tabObj.$hiddenInput.val(data[pulldown.opts.simpleData['id']]);tabObj.loadStaticHtmlHX.call(tabObj,true);}
if(orgCbFn)orgCbFn(data,"isPulldown");}
return{tabObj:tabObj,pulldown:pulldown};}catch(e){LogInfo(e);}}
$.fn.addDdJcTabPulldownComposite=function(args1,args2){if(this.length==0)throw new Error("DOM绑定错误【请查看页面是否渲染完毕，或者是否存在该DOM对象】");var oInput=this.get(0);manager.clear(oInput);var _this=this;try{var opts1=$.extend({},{usetype:"composite"},args1.options);args2.options=$.extend({},{usetype:"composite","touchBlur":false},args2.options);var tabObj=_this.addVeNTab(opts1,args1.cbFn);if(opts1.first_type==2){tabObj.lastCfcity=opts1.cfcityValue;}
var orgCbFn=args2.cbFn;args2.cbFn=mycallBack;var tempArgs2=$.extend(true,{},args2);if(args2.options.type=="2"){tempArgs2.options.typeValue+="&iscity="+(args2.options.iscity||"");}
var pulldown=_this.addPulldown2(tempArgs2);$(oInput).on("click",oInputClickHandler);$(oInput).on("keyup",oInputKeyUpHandler);manager.addEvent(tabObj.id,"click",oInputClickHandler);manager.addEvent(pulldown.id,"keyup",oInputKeyUpHandler);function oInputClickHandler(event){if((tabObj&&tabObj.isShow)||(pulldown&&pulldown.isShow))return;pulldown.hide();var cfcity=$(document.body).find("#"+opts1.cfcity).val();if(!$.isBlank(cfcity)&&tabObj.lastCfcity!=cfcity){$.ajax({type:"get",url:opts1.first_data+"?cfcity="+cfcity,dataType:"json",success:function(data){var $firstLi=tabObj.$header.find(".tab li").eq(0).show();var $firstPage=tabObj.$content.find('.tab-page[page-index="0"]');var firstPageUl=$firstPage.find('ul');firstPageUl.html("");if($.type(data)=='array'&&data.length>0){$firstLi.css("display","");$firstPage.css("display","");$.each(data,function(i,item){firstPageUl.append('<li data-id="'+item["id"]+'" data-data=\'{"id":"'+item["id"]+'","name":"'+item["name"]+'","csbh":"'+item["csbh"]+'","jcmc":"'+item["jcmc"]+'","jcbh":"'+item["jcbh"]+'"}\'><a href="javascript:void(0);" title="'+item["name"]+'">'+item["name"]+'</a></li>');});if(tabObj.$content.find(".tab-page li.active").length==0){tabObj.setActive(0);}}else{$firstLi.hide();$firstPage.hide();if(tabObj.isNow==0){tabObj.setActive(1);}}},complete:function(){tabObj.lastCfcity=cfcity;}});}
tabObj.show();}
function oInputKeyUpHandler(event){var hiddenname=args1.options.hiddenName||tabObj.opts.hiddenName;$('#'+hiddenname).val("");tabObj.checkedData.length=0;if(args1.options.clearFn&&typeof args1.options.clearFn==="function"){args1.options.clearFn();}
if($(_this).val()){if(args2.options.type=="2"){pulldown.opts.typeValue=args2.options.typeValue+"&iscity=";}
pulldown&&pulldown.elemKeyUpHandler(event,true);tabObj.hide();}else{pulldown.hide();tabObj.show();}}
function mycallBack(data){if(tabObj.opts.loadStaticHtml===true){tabObj.$hiddenInput.val(data[pulldown.opts.simpleData['id']]);tabObj.loadStaticHtmlHX.call(tabObj,true);}
if(orgCbFn)orgCbFn(data,"isPulldown");}
return{tabObj:tabObj,pulldown:pulldown};}catch(e){LogInfo(e);}}
$.fn.addJcfwzdPulldownComposite=function(args1,args2){if(this.length==0)throw new Error("DOM绑定错误【请查看页面是否渲染完毕，或者是否存在该DOM对象】");var oInput=this.get(0);manager.clear(oInput);var _this=this;try{var opts1=$.extend(true,{usetype:"composite",topTabTitle:["机场","火车站"],width:args1.options.tabWidth||"760"},args1.options);args2.options=$.extend({},{usetype:"composite","touchBlur":false},args2.options);opts1.options1={width:opts1.width,typeValue:opts1.typeValue["jcCityData"],hiddenName:opts1.hiddenName,usetype:"composite",loadStaticHtml:true,itemClickFn:opts1.itemClickFn,expandBindEvent:opts1.expandBindEvent,writeValueFn:opts1.writeValueFn};opts1.options2={width:opts1.width,hiddenName:opts1.hiddenName,tabTitls:[],first_title:"热门火车站",first_data:opts1.typeValue["trainHotData"],usetype:"composite",cells:1,scell:6};var tabObj=_this.addBigVeTab(opts1,args1.cbFn);var pulldown=_this.addPulldown2(args2);$(oInput).on("click",oInputClickHandler);$(oInput).on("keyup",oInputKeyUpHandler);manager.addEvent(tabObj.id,"click",oInputClickHandler);manager.addEvent(pulldown.id,"keyup",oInputKeyUpHandler);function oInputClickHandler(event){if((tabObj&&tabObj.isShow)||(pulldown&&pulldown.isShow))return;pulldown.hide();tabObj.show();}
function oInputKeyUpHandler(event){var hiddenname=args1.options.hiddenName||tabObj.opts.hiddenName;$('#'+hiddenname).val("");if(args1.options.clearFn&&typeof args1.options.clearFn==="function"){args1.options.clearFn();}
if($(_this).val()){pulldown&&pulldown.elemKeyUpHandler(event,true);tabObj.hide();}else{pulldown.hide();tabObj.show();}}}catch(e){LogInfo(e);}}
$.fn.addTabHotelDestComposite=function(args1,args2,cbFn){if(this.length==0)throw new Error("DOM绑定错误【请查看页面是否渲染完毕，或者是否存在该DOM对象】");var oInput=this.get(0);manager.clear(oInput);var _this=this;try{requireJs("/static/fl/hotel/jquery.dest_search.js");var opts1=$.extend({},{usetype:"composite"},args1);var opts2=$.extend({},{usetype:"composite"},args2);var tabObj=_this.addVeNTab(opts1,cbFn);var pulldown=_this.addHotelDestPullDown(opts2,cbFn);$(oInput).on("click",function(){if((tabObj&&tabObj.isShow)||(pulldown&&pulldown.isShow))return;pulldown.hide();tabObj.show();});var timer=null;$(oInput).on("keyup",function(event){if(timer){window.clearTimeout(timer);}
timer=setTimeout(keyupHandler,500);});function keyupHandler(){if(args1.hiddenName){$('#'+args1.hiddenName).val("");}
$(oInput).focus();if($(_this).val()){pulldown&&pulldown.elemKeyUpHandler(event,true);tabObj.hide();}else{pulldown.hide();tabObj.show();}
timer=null;}}
catch(e){LogInfo(e);}}
$.fn.addHotelDestKeywordComposite=function(args1,args2,cbFn){if(this.length==0)throw new Error("DOM绑定错误【请查看页面是否渲染完毕，或者是否存在该DOM对象】");var oInput=this.get(0);manager.clear(oInput);var _this=this;try{requireJs("/static/fl/hotel/jquery.keyword.js");requireJs("/static/fl/hotel/jquery.dest_search.js");var pulldown=null,keywordObj=null;var opts=$.extend({},{usetype:"composite",hasPage:false},args1);$(oInput).on("click",function(){if((keywordObj&&keywordObj.isShow)||(pulldown&&pulldown.isShow))return;pulldown=_this.addHotelDestPullDown(opts,cbFn);keywordObj=_this.addKeyWord(args2,cbFn);pulldown.hide();keywordObj.show();});var timer=null;$(oInput).on("keyup",function(){if(timer){window.clearTimeout(timer);}
timer=setTimeout(keyupHandler,500);});function keyupHandler(event){if(args1.hiddenName){$('#'+args1.hiddenName).val("");}
$(oInput).focus();if($(_this).val()){pulldown&&pulldown.elemKeyUpHandler(event,true);keywordObj.hide();}else{pulldown.hide();keywordObj.show();}
timer=null;}}
catch(e){LogInfo(e);}}})(jQuery,window,document);if(!Object.create){Object.create=(function(){function F(){}
return function(o){if(arguments.length!=1){throw new Error('Object.create 方法只接收一个参数');}
F.prototype=o;F.prototype.constructor=F;return new F()}})()};;(function($,window,document){var CountryTab={init:function(elem,options,cbFn){this.id="vetech-country-"+new String(Math.random()).substring(2);this.options=$.extend({},$.fn.addCountryComp.options,options);this.elem=elem;this.$elem=$(elem);this.data=null;this.tabs=[],this.iNow=0;this.dataMap=new Object();this.cbFn=cbFn;this.isShow=false;if(!this.options.hiddenName){this.options.hiddenName=this.elem.id+"- hiddenInput";this.$hiddenInput=$("<input type='hidden' id='"+this.options.hiddenName+"' name='"+this.options.hiddenName+"' />");this.$elem.parent().append(this.$hiddenInput);}else{this.$hiddenInput=$(document).find("#"+this.options.hiddenName);}
this.loadData();manager.manage(this);},loadData:function(){var loadType=this.options.type,typeValue=this.options.typeValue;if("1"==loadType){this.data=$.map(this.options.typeValue,function(obj){return $.extend(true,{},obj);});if(this.data){for(var k=0;k<this.data.length;k++){this.data[k].hotctrs=this.data[k].hotctrs||[];};};this.render();}else{var self=this;var url="2"==loadType?self.options.typeValue:"/component/data/country.data.js";$.ajax({type:"get",url:url,dataType:"json",success:function(data){self.data=data;self.render();}});}},render:function(){this.renderContainer().renderContent().setPos().renderData().bindEvent();},renderContainer:function(){this.$element=$("<div class='country-wrap'></div>");this.$container=$("<div class='country-container'></div>");if(this.options.width)
this.$element.css({width:this.options.width});this.$element.append(this.$container);return this;},renderContent:function(){if(this.data.length==0)return;var $ul=$("<ul class='tab-nav clearfix'></ul>");var templateFn=null;if(this.options.fn1)templateFn=this.options.fn1;for(var i=0,len=this.data.length;i<len;i++){var item=this.data[i];var $li=$("<li tab-index='"+i+"'><a href='javascript:void(0)' ctr-id='"+item.id+"'>"+(templateFn?templateFn(item):item.name)+"</a></li>");if(i==0)$li.addClass("active");this.tabs.push($li);this.tabs[i].item=item;$ul.append($li);}
this.$container.append($ul);for(var i=0,len=this.data.length;i<len;i++){var $div=$("<div content-index='"+i+"' class='tab-content'></div>");if(i==0)$div.addClass("active");var $contentUl=$("<ul class='hot-country clearfix'></ul>");var $span=$("<span>热门：</span>");$contentUl.append($span);var $list=$("<div class='list'></div>");$contentUl.append($list);$div.append($contentUl);var $details=$("<div class='details'></div>");$div.append($details);this.$container.append($div);}
$("body").append(this.$element);this.w=this.$element.width();this.$element.css("width",this.w+50);return this;},renderData:function(){for(var i=0,len=this.tabs.length;i<len;i++){var hotctrsData=this.tabs[i].item["hotctrs"];var ctrsData=this.tabs[i].item["ctrs"];this.addHotCtrs(i,hotctrsData);this.addCtrs(i,ctrsData);}
if(this.options.freeBinding){this.show();}
return this;},addCtrs:function(index,data){if(Object.prototype.toString.call(data)!=="[object Array]")
throw TypeError("热门国家数据结构错误，需要[object Array]");var $tabContent=this.$element.find(".tab-content").eq(index);var divideArray=$.fn.addCountryComp.divideGroups(data);for(var i=0;i<divideArray.length;i++){var $dl=$("<dl class='clearfix'></dl>");var $ul=$("<ul class='clearfix'></ul>");var $dd=$("<dd></dd>");$dd.css("width",this.w-60);var titleArr=[];for(var j=0;j<divideArray[i].length;j++){var item=divideArray[i][j];if(j==0||j==divideArray[i].length-1)
titleArr.push(item["first"]);var $li=$("<li class='country' title='"+item.name+"'><a href='javascript:void(0);' ctr-id='"+item.id+"'>"+item.name+"</a></li>");this.dataMap[item.id]=item;$ul.append($li);this.writeValue(item);}
$dd.append($ul);var $dt=$("<dt>"+titleArr.join('-')+"</dt>");$dl.append($dt).append($dd);$tabContent.find(".details").append($dl);}
return this;},addHotCtrs:function(index,data){if(Object.prototype.toString.call(data)!=="[object Array]")
throw TypeError("热门国家数据结构错误，需要[object Array]");var $tabContent=this.$container.find(".tab-content").eq(index);$tabContent.find(".hot-country").find(".list").css("width",this.w-60);for(var i=0;i<data.length;i++){var $li=$("<li class='country'><a href='javascript:void(0);' ctr-id='"+data[i].id+"'>"+data[i].name+"</a></li>");this.dataMap[data[i].id]=data[i];$tabContent.find(".hot-country").find(".list").append($li);this.writeValue(data[i]);}
return this;},show:function(){if(this.elem.readOnly)return;this.setPos();this.$element.css("visibility","visible");this.isShow=true;return this;},setPos:function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iHeight=$(document).outerHeight(),iLeft=0,iTop=pointer.top+this.$elem.outerHeight();iLeft=pointer.left+this.$element.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$element.outerWidth():pointer.left;this.$element.css({"left":iLeft,"top":iTop});return this;},hide:function(){this.$element.css({"visibility":"hidden","left":0,"top":0});this.isHide=true;return this;},destroy:function(){this.$element.remove();},setValue:function(data){this.$elem.removeClass("placeholder").val(data[this.options.simpleData.name]);this.$hiddenInput.val(data[this.options.simpleData.id]);if(this.cbFn&&Object.prototype.toString.call(this.cbFn)==="[object Function]")this.cbFn.call(null,data);var self=this;setTimeout(function(){self.hide();},100);},writeValue:function(data){var value=this.$hiddenInput.val();if(value&&value.length&&data[this.options.simpleData.id]===value)this.$elem.val(data[this.options.simpleData.name]||"");},bindEvent:function(){var self=this;$(this.tabs).each(function(i,$li){$li.on("click",function(ev){if(self.iNow===i)return;self.tabs[self.iNow].removeClass("active");self.$container.find("div[content-index='"+self.iNow+"']").removeClass("active");$(this).addClass("active");self.$container.find("div[content-index='"+i+"']").addClass("active");self.iNow=i;self.stopEvent(ev);});});this.$container.find(".country").each(function(){$(this).on("click",function(ev){var id=$(this).find("a").attr("ctr-id");self.setValue(self.dataMap[id]);self.stopEvent(ev);});});$(document).on("click",function(ev){var target=ev.target;if(target!==self.elem)self.hide();});this.$element.on("click",function(ev){self.stopEvent(ev);});if(!this.options.editable){this.$elem.on("keydown",function(ev){if(ev.keyCode===8){self.$hiddenInput.val("");}else{return false;}});}
this.$elem.on("click",function(){if($(this).val())$(this).select();});},stopEvent:function(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}};$.fn.addCountryComp=function(options,cbFn){if(this.length==0)throw new Error("DOM绑定错误，页面不存在该元素");var oInput=this.get(0);manager.clear(oInput);var countryTab=Object.create(CountryTab);countryTab.init(oInput,options,cbFn);if(options.freeBinding!==true){$(oInput).on("click",elemClickHandler);manager.addEvent(countryTab.id,"click",elemClickHandler);}
return countryTab;};function elemClickHandler(ev){var dom=ev.target;var component=manager.getComponent(dom.getAttribute("vetech-ids"));component.show();}
$.fn.addCountryComp.options={width:null,type:3,typeValue:null,hiddenName:null,showOnlyOne:true,editable:false,freeBinding:false,simpleData:{id:"id",name:"name"},fn1:null,fn2:null,fn3:null};$.fn.addCountryComp.divideGroups=function(dataList){var divideNum=dataList.length<10?1:(new String(dataList.length).substring(0,1));divideNum=divideNum>=5?4:divideNum;var showNum=Math.floor(dataList.length/divideNum);var diviedArray=[];for(var i=0;i<divideNum;i++){if(i==divideNum-1){diviedArray.push(dataList);}else{var tempArr=dataList.splice(0,showNum);var first=tempArr[tempArr.length-1]["first"];var sameNum=findSameFirst(first,dataList);if(sameNum>0)tempArr=tempArr.concat(dataList.splice(0,sameNum));diviedArray.push(tempArr);}}
function findSameFirst(first,dataList){var count=0;for(var i=0;i<dataList.length;i++){if(dataList[i]["first"]==first)
count++;else break;}
return count;}
return diviedArray;};})(jQuery,window,document);;(function($,w,d){$.addCplxAndDdlx=function(options){return new CplxAndDdlx(options);};function CplxAndDdlx(options){this.id="CplxAndDdlx"+String(Math.random()).replace(/\D/g,"");this.opts=$.extend(true,{showDefault:true,showDefaultContent:"==请选择==",cplxVal:"",ddlxVal:"",filterCplxFn:$.noop,cplxCallback:$.noop,ddlxCallback:$.noop},options);if($.type(this.opts.cplxSelect)==="string")this.$cplxSelect=$("#"+this.opts.cplxSelect);else this.$cplxSelect=this.opts.cplxSelect;this.initSelect(this.$cplxSelect);if($.type(this.opts.ddlxSelect)==="string")this.$ddlxSelect=$("#"+this.opts.ddlxSelect);else this.$ddlxSelect=this.opts.ddlxSelect;this.initSelect(this.$ddlxSelect);this.data=[];this.loadData();this.rendercplxSelect();this.writeValue();this.renderddlxSelect();this.bindEvent();}
CplxAndDdlx.prototype={constructor:CplxAndDdlx,loadData:function(){var _this=this;$.ajax({type:"get",url:"/webcomponent/kjcommdata/getCplxAndDdlx",async:false,data:this.opts.qDatas,success:function(data){_this.data=data;}});},getcplxData:function(){return this.data["cplxData"]||[];},initSelect:function($select){if(!this.opts.showDefault)return;var $firstOption=$('<option value="">'+this.opts.showDefaultContent+'</option>');$select.append($firstOption);},getddlxDataByCpbh:function(cpbh){var cpbh2=null;if(cpbh==="01000200"){cpbh="0100";cpbh2="0200";}
var ddlxData=this.data["ddlxData"]||[];var resultArr=[];for(var i=0,len=ddlxData.length;i<len;i++){var tempItem=ddlxData[i];if(tempItem["CPBH"]===cpbh||tempItem["CPBH"]===cpbh2)resultArr.push(tempItem);}
return resultArr;},rendercplxSelect:function(){var cplxData=this.getcplxData(this.data);for(var i=0,len=cplxData.length;i<len;i++){var tempData=cplxData[i];var result=this.opts.filterCplxFn(tempData);if(result===-1)continue;var $option=$('<option value="'+tempData["CPBH"]+'">'+tempData["CPMC"]+'</option>');this.$cplxSelect.append($option);$option.data("data",tempData);}},renderddlxSelect:function(){this.$ddlxSelect.html("");this.initSelect(this.$ddlxSelect);var data=this.getddlxDataByCpbh(this.$cplxSelect.val());for(var i=0,len=data.length;i<len;i++){var item=data[i];var $option=$('<option value="'+item["DDLX"]+'">'+item["DDLXMC"]+'</option>');this.$ddlxSelect.append($option);$option.data("data",item);}},writeValue:function(){if(this.opts.cplxVal)this.$cplxSelect.val(this.opts.cplxVal);this.renderddlxSelect();var _this=this;window.setTimeout(function(){if(_this.opts.ddlxVal)_this.$ddlxSelect.val(_this.opts.ddlxVal);},1);},bindEvent:function(){var _this=this;this.$cplxSelect.on("change",function(){_this.opts.cplxCallback.call(this,$(this).find("option:selected").data("data"));_this.renderddlxSelect.call(_this);});this.$ddlxSelect.on("change",function(){_this.opts.ddlxCallback.call(this,$(this).find("option:selected").data("data"));});}};})(jQuery,window,document);(function($,window,document){var $dzmContainer=null,triggerDom,isComming=false,allData=[],clearTime=null,opts={};var defaultOptions={simpleData:{id:"TKNO",name:"TKNO"},autoClose:false,writeValue:[],renderFn:null,"queryUrl":"/webcomponent/mp/mp_web/queryMpTknoList","cpid":"","cyrq":"","width":200,"height":220,"maxNum":20};$.fn.showMpdzm=function(options){if($dzmContainer!=null)return;triggerDom=this;opts=$.extend(true,{},defaultOptions,options);isComming=false;loadTmpl();};function loadTmpl(){var data='<div class="vetech-mdd-container vetech-dzm-container" style="min-width: 200px">'+'<div class="search-container">'+'<div>'+'<em class="em-none" style="position: absolute;top: 6px;left: 10px;line-height: 25px;font-style: normal;color: #666666;">多选，支持中文/简拼输入</em>'+'<input type="text" class="searchTxt" />'+'</div>'+'<a href="javascript:void(0);" class="sureBtn">确认</a>'+'</div>'+'<ul class="list-container list-dzm-nav"></ul>'+'</div>';init(data);}
function init(data){$dzmContainer=$($.trim(data));loadValue();writeValue();bindEvent();}
function loadValue(){$.ajax({type:"get",url:opts.queryUrl,data:{"cpid":opts.cpid,"cyrq":opts.cyrq},dataType:"json",success:function(data){allData=data;renderList(data);show();}});}
function writeValue(){var result=opts.writeValue;if(result&&result.length>0){$dzmContainer.find(".em-none").hide();for(var i=0,len=result.length;i<len;i++){addSpan(result[i]);}}}
function show(){setPos();$(document.body).append($dzmContainer);$dzmContainer.show();setWidth();}
function setPos(){var pointer=$(triggerDom).offset(),iWidth=$(document).outerWidth(),iTop=pointer.top+$(triggerDom).outerHeight();var iLeft=pointer.left+opts.width>iWidth?(pointer.left+$(triggerDom).outerWidth())-opts.width:pointer.left;$dzmContainer.css({"left":iLeft,"top":iTop});return this;}
function setWidth(){var iWidth=opts.width;$dzmContainer.find(".search-container div").width(iWidth-78);$dzmContainer.find(".list-container").width(iWidth-7).css("maxHeight",opts.height);$dzmContainer.width(iWidth);}
function bindEvent(){$dzmContainer.on("keyup.dzmComponent",".searchTxt",searchHandler);$dzmContainer.on("click.dzmComponent",".list-container li",addCityHandler);$dzmContainer.on("click.dzmComponent",".choosedCity",choosedCityClickHandler);$dzmContainer.on("keyup.dzmComponent",".focusInput",choosedCityKeyHandler);$dzmContainer.on("click.dzmComponent",".sureBtn",sureHandler);$dzmContainer.on("click.dzmComponent",".search-container div",setFocus);$(document).on("mousedown.dzmComponent",closeHandler);$dzmContainer.on("mousedown.dzmComponent",function(){return false;});if(opts.autoClose){$dzmContainer.on("mouseleave",function(ev){isComming=false;closeHandler.call(this,ev);});}
$dzmContainer.on("mouseenter",function(){isComming=true;});}
function addCityHandler(){setFocus();var data=$(this).data("data"),$searchTxt=$dzmContainer.find(".searchTxt"),id=data[opts.simpleData.id];if(!$dzmContainer.find(".search-container").find("#"+id).length){warnMaxNum();if($dzmContainer.find(".search-container").find("span").length<opts.maxNum){addSpan(data);}}else{$dzmContainer.find(".search-container .searchTxt").val("").focus();}
renderList(allData);$searchTxt.css("width",20);}
function choosedCityClickHandler(){$(this).parent().find("span").removeClass("active").end().end().addClass("active");$(this).find("input").focus();return false;}
function closeHandler(ev){setTimeout(function(){if(isComming&&opts.autoClose)return;var target=ev.target;if(triggerDom.get(0)!==target&&$.inArray(target,triggerDom.find("*"))==-1)destroy();},100);}
function searchHandler(ev){var value=$(".searchTxt").val();var keyCode=ev.keyCode;var $container=$dzmContainer.find(".list-container");if(keyCode===8&&!value){if($(this).data("isNull")){$(this).parents(".search-container").find(".choosedCity").last().remove();warnMaxNum();}else{$(this).data("isNull",true);}}else if(keyCode===13){addCityHandler.call($container.find(".active"));}else{$(this).data("isNull",false);}
var iWidth=calcInputWdith(value);$(this).css("width",iWidth+20);var tempArr=[];for(var i=0,len=allData.length;i<len;i++){var item=allData[i];var result=filterFn(item,value);if(result===-1)continue;tempArr.push(item);}
renderList(tempArr);}
function filterFn(data,value){var tkno=(data.TKNO).toString().toUpperCase();var yxq=(data.YXQ).toString().toUpperCase();value=value.toUpperCase();if(value==tkno){return 0.2;}
if(value==yxq){return 0.1;}
var indx=$.strLikeIndex(tkno,value);if(indx>-1)return indx+1;indx=$.strLikeIndex(yxq,value);if(indx>-1)return indx+1;return-1;}
function renderList(data){var $frag=$(document.createDocumentFragment());var keyWord=$.trim($(".searchTxt").val());if(data.length==0){var $p=$("<p style='padding: 5px 10px;color: #f00;'>当前没有有效票号，请检查库存</p>");$frag.append($p);}else{for(var i=0,len=data.length;i<len;i++){var $li=$("<li><span class='labelw60' title='"+data[i][opts.simpleData.name]+"'>"+markKeyword(data[i][opts.simpleData.name])+"</span><span class='labelw40' title='"+data[i].YXQ+"'>"+data[i].YXQ+"</span></li>");if(opts.renderFn){$li=opts.renderFn(data[i],keyWord);}
$li.data("data",data[i]);$frag.append($li);}}
$dzmContainer.find(".list-container").html("").append($frag);}
function markKeyword(name){var keyWord=$.trim($(".searchTxt").val()).toUpperCase();var raRegExp=new RegExp(keyWord,"g");return name.replace(raRegExp,"<i style='color:red;font-style: normal;'>"+keyWord+"</i>");}
function calcInputWdith(value){var $span=$("<span style='left:-1000px;position:absolute'>"+value+"</span>");$(document.body).append($span);var iWidth=$span.width();$span.remove();return iWidth;}
function warnMaxNum(){if($dzmContainer.find(".search-container").find("span").length<opts.maxNum){$dzmContainer.find(".search-container div").css("border","1px solid #76b5f4").find("p").remove();}else{if(clearTime){clearTimeout(clearTime);}
$dzmContainer.find(".search-container .searchTxt").val("");$dzmContainer.find(".search-container div").css("border","1px solid red");if($dzmContainer.find("#choose-warn").length==0){$dzmContainer.find(".search-container div").append("<p style='color:red' id='choose-warn'>您最多能选择"+opts.maxNum+"个电子码</p>")}
clearTime=setTimeout(function(){$dzmContainer.find(".search-container div").css("border","1px solid #76b5f4").find("p").remove();},2000)}}
function formatData(data){var result=[];for(var i=0;i<data.length;i++){var newData={};newData[opts.simpleData.id]=data[i]["BH"];newData[opts.simpleData.name]=data[i]["MC"];$.extend(true,newData,data[i]);result.push(newData);}
return result;}
function addSpan(data){var $input=$dzmContainer.find(".search-container .searchTxt");var $span=$("<span id='"+(data[opts.simpleData.name])+"' class='choosedCity'>"+(data[opts.simpleData.name])+";<input class='focusInput'/></span>");$span.data("data",data);$span.insertBefore($input);$input.val("").focus();}
function itemClickHandler(){try{var data=$(this).data("data");var id=data[opts.simpleData.id];if(!$dzmContainer.find(".search-container").find("#"+id).length){warnMaxNum();if($dzmContainer.find(".search-container").find("span").length<opts.maxNum){addSpan(data);}}
$dzmContainer.find(".em-none").hide();}catch(e){throw new Error("数据格式错误"+e);}}
function sureHandler(){var result=[];$dzmContainer.find(".choosedCity").each(function(){var tempData=$(this).data("data");result.push(tempData);});if(opts.callback)opts.callback(result);destroy();}
function setFocus(){$dzmContainer.find(".em-none").hide();$(this).find("input").focus();}
function choosedCityKeyHandler(ev){if(ev.keyCode===8){$(this).parent().remove();$dzmContainer.find(".searchTxt").focus();warnMaxNum();}}
function destroy(){if($dzmContainer){$dzmContainer.off(".dzmComponent");$(document).off(".dzmComponent");$dzmContainer.remove();$dzmContainer=null;opts={};}}})(jQuery,window,document);;(function($,window,document){$.fn.addEmail=function(options,cbFn){if(!this.length)throw new Error("DOM绑定错误，请确认页面是否加载完毕。");var emailSuffix=new EmailSuffix(this.get(0),options,cbFn);};$.fn.addEmail.options={};function EmailSuffix(elem,options,cbFn){this.id="vetech-email-suffix-"+String(Math.random()).substring(2);this.$elem=$(elem);this.elem=elem;this.isShow=false;this.iNow=-1;this.opts=$.extend({},$.fn.addEmail.options,options);this.data=this.opts.data||[];this.cbFn=cbFn;if(!this.data)throw new Error("邮件后缀枚举数据加载失败，请确认数据是否正确加载！");this.init();}
EmailSuffix.prototype.init=function(){this.$container=$('<div class="vetech-email"></div>');this.$container.css("min-width",this.elem.offsetWidth-2);this.$container.append("<ul></ul>");$(document.body).append(this.$container);this.bindEvent();};EmailSuffix.prototype.show=function(){if(this.isShow)return;this.isShow=true;this.setPos();this.$container.show();};EmailSuffix.prototype.hide=function(){if(!this.isShow)return;this.isShow=false;this.$container.hide();if(this.cbFn)this.cbFn(val);this.$elem.blur();};EmailSuffix.prototype.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+this.elem.offsetHeight});};EmailSuffix.prototype.bindEvent=function(){var _this=this;this.$elem.on("keyup",function(ev){var index=0;if(ev.keyCode===40){index=1;}else if(ev.keyCode===38){index=-1;}else if(ev.keyCode===13){_this.hide();}else{var searchIndex=_this.$elem.val().indexOf("@");if(searchIndex>-1&&searchIndex!==0)_this.renderData();else _this.hide();}
if(index!==0){_this.$container.find("li").eq(_this.iNow).removeClass("active");var $curLi=_this.$container.find("li").eq(_this.iNow+index);$curLi.addClass("active");_this.iNow=_this.iNow+index;_this.setValue($curLi);}}).on("click",function(ev){stopEvent(ev);if(_this.$elem.val().indexOf("@")>-1)_this.renderData();});$(document).on("click",function(ev){_this.hide();});this.$container.on("click","li",function(ev){_this.$container.find("li").removeClass("acitive");$(this).addClass("active");_this.setValue($(this));_this.hide();stopEvent(ev);});};EmailSuffix.prototype.setValue=function($li){var val=getValue($li);this.$elem.val(val).focus();};EmailSuffix.prototype.renderData=function(){this.iNow=-1;var data=this.filterData();this.$container.find("ul").html("");if(data&&data.length>0){var prefixVal=this.$elem.val().substring(0,this.$elem.val().indexOf("@"));for(var i=0,len=data.length;i<len;i++){var $li=$('<li><span class="prefix">'+prefixVal+'</span><span class="suffix">'+data[i].name+'</span></li>');this.$container.find("ul").append($li);}
this.show();}else{this.hide();}};EmailSuffix.prototype.filterData=function(){var sameData=[],likeData=[],inputVal=this.$elem.val(),searchVal=inputVal.substring(inputVal.indexOf("@"));if(!searchVal)return this.data;for(var i=0,len=this.data.length;i<len;i++){var tempData=this.data[i];var result=this.filterFn(searchVal,tempData);if(result===1)sameData.push(tempData);else if(result===0)likeData.push(tempData);else continue;}
return sameData.concat(likeData);};EmailSuffix.prototype.filterFn=function(searchValue,data){if(data.name===searchValue)return 1;else if(data.name.indexOf(searchValue)>-1)return 0;else return-1;};function getValue($li){return $li.find(".prefix").text()+$li.find(".suffix").text();}
function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}})(jQuery,window,document);;(function($,window,document){$.fn.showFwbzInfo=function(options){if(this.length<1)throw new Error("DOM绑定错误，请确认页面是否加载完毕");var oInput=this.get(0);var fwbz=new FwbzInfo(oInput,options);return fwbz;};var defaultOpts={width:350,type:"2",imgwidth:20,typeVaule:""};function FwbzInfo(elem,options){this.id="vetech-fwbzinfo-"+String(Math.random()).replace(/\D/g,"");this.elem=elem;this.$elem=$(elem);this.opts=$.extend(true,{},defaultOpts,options);this.isShow=false;this.init();}
var fn=FwbzInfo.prototype;fn.init=function(){this.$img=$('<div class="fwbz-img"></div>');this.$container=$('<div class="fwbz-content"></div>');this.$container.css("width",this.opts.width);this.$elem.addClass("vetech-fwbz").append(this.$img).append(this.$container);this.loadData();this.bindEvent();};fn.loadData=function(){var _this=this;if(this.opts.type=='1'){this.data=this.opts.typeVaule;this.renderData();}else{$.ajax({url:_this.opts.typeVaule,dataType:"json",success:function(data){_this.data=data;_this.renderData();}})}};fn.show=function(){if(this.isShow)return;this.setPos();this.$container.css("visibility","visible");this.isShow=true;};fn.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iHeight=$(document).outerHeight(),iTop=this.$img.outerHeight(),iLeft=0;if(pointer.top+this.$container.outerHeight()>iHeight){iTop=-(this.$container.outerHeight()+this.$img.outerHeight());this.$container.addClass("fwbz-bottom");}
if(pointer.left+this.$container.outerWidth()>iWidth){iLeft=-this.$container.outerWidth()+this.$img.outerWidth();this.$container.addClass("fwbz-right");}
this.$container.css({"left":iLeft,"top":iTop});};fn.hide=function(){if(!this.isShow)return;this.$container.css({"visibility":"hidden"});this.isShow=false;};fn.renderData=function(){if(!$.isEmptyObject(this.data)){var item=this.data;var img=$('<img src="'+item.BY1+'"  border="0" width="'+this.opts.imgwidth+'"/>');this.$img.append(img);var $content=$("<p><b>保障级编号：</b>"+(item.DH||"")+"</p>"+"<p><b>保障级名称：</b>"+(item.YWMC||"")+"</p> "+"<p><b>保障级内容：</b>"+(item.BY2||"")+"</p>");this.$container.append($content);}};fn.bindEvent=function(){var _this=this;this.$elem.on("mouseout",function(){_this.hide();}).on("mouseover",function(){_this.show();});};})(jQuery,window,document);;(function($,window,document){var manager=new ComponentManager();$.fn.addGJZ=function(options,cbFn){if(this.length===0)throw new Error("DOM绑定错误");var oInput=this.get(0);manager.clear(oInput);var gjz=new GJZ(oInput,options,cbFn);$(oInput).on("click",itemClickHandler);manager.addEvent(gjz.id,"click",itemClickHandler);};function itemClickHandler(event){event=event||window.event;var target=event.currentTarget||event.srcElement;var ids=target.getAttribute("vetech-ids");if(!ids)return;var component=manager.getComponent(ids);if(component.isShow)component.hideContainer();else component.showContainer();}
$.fn.addGJZ.options={width:158,level:4,type:"3",splitStr:"/",filterIds:null,rootId:"---",pid:"0",typeValue:"/component/data/gjz.data.js",fn1:null};function GJZ(elem,options,cbFn){this.id="GJZ-"+new String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.$listContainers=[];this.opts=$.extend({},$.fn.addGJZ.options,options);this.data=[];this.dataStore={};this.activeItems={};this.checked={"keys":[],"values":[],"ezms":[]};this.tempChecked=[];this.cbFn=cbFn;this.isShow=false;this.$hiddenInput=$(document.body).find("#"+this.opts.hiddenName);this.$hiddenInput2=$(document.body).find("#"+this.opts.hiddenName2);this.$container=$('<div class="vetech-gjz-container" style="display: none"></div>');$(document.body).append(this.$container);try{this.checked.keys=this.$hiddenInput.val().split(this.opts.splitStr);}catch(e){this.checked.keys=[];}
this.loadData();manager.manage(this);}
GJZ.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=$.map(this.opts.typeValue,function(obj){return $.extend(true,{},obj);});_this.formatData();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.formatData();}});}};GJZ.prototype.formatData=function(){var checkedCountrys=[],state=false;if(this.$hiddenInput2&&this.$hiddenInput2.val()){if(this.$hiddenInput2.val()===this.opts.rootId){state=true;}else{checkedCountrys=this.$hiddenInput2.val().split(this.opts.splitStr);}}
var tempArr=this.opts.filterIds?this.opts.filterIds.split(this.opts.splitStr):[];for(var i=0,len=this.data.length;i<len;i++){var dataItem=this.data[i];if($.inArray(dataItem.id,tempArr)>-1)continue;if(this.checked.keys._contains(dataItem.id)){this.checked.values.push(dataItem.name);}
dataItem["_dataIndex"]=i;if(state||$.inArray(dataItem.by3,checkedCountrys)>-1){dataItem["_state"]=true;}else{dataItem["_state"]=false;}
if(!this.dataStore[dataItem.level])this.dataStore[dataItem.level]=[];this.dataStore[dataItem.level].push(dataItem);}
this.render();this.writeValue();};GJZ.prototype.writeValue=function(){if(this.checked.keys._contains(this.opts.rootId)){this.$elem.val("全球");this.$hiddenInput.val(this.getRootId());}
else this.$elem.val(this.checked.values.join(this.opts.splitStr));};GJZ.prototype.getRootId=function(){for(var i=0;i<this.data.length;i++){if(this.data[i].parid===this.opts.pid)return this.data[i].id;}};GJZ.prototype.render=function(){for(var i=0;i<this.opts.level;i++){var $list=$('<div class="vetech-gjz-list" style="max-height:160px;overflow-y:auto; " level-index="'+(i+1)+'"></div>');$list.css("width",this.opts.width);this.$listContainers.push($list);this.$container.append($list);}
this.createList(0,this.opts.pid,false).bindEvent(0).setPos(this.$elem,0);};GJZ.prototype.destroy=function(){if(this.$listContainers.length==0)return;for(var i=0;i<this.$listContainers.length;i++){this.$listContainers[i].remove();}};GJZ.prototype.setValue=function(){this.checked.keys.length=0;this.checked.values.length=0;this.checked.ezms.length=0;this.checkedOpts=[];var _this=this;searchCheckedData(this,0,this.opts.pid,function(){var result="";if(_this.checked.values.length==1&&_this.checked.values._contains("全球")){_this.checked.ezms=[_this.opts.rootId];}
_this.$elem.val(_this.checked.values.join(_this.opts.splitStr));_this.$hiddenInput.val(_this.checked.keys.join(_this.opts.splitStr));_this.$hiddenInput2.val(_this.checked.ezms.join(_this.opts.splitStr));if(_this.cbFn)_this.cbFn(_this.data,this.checkedOpts);});function searchCheckedData(_this,level,pid,cbFn){var data=_this.getNextLevelDate(level,pid);for(var i=0;i<data.length;i++){if(data[i]["_state"]){_this.checked.keys.push(data[i].id);_this.checked.values.push(data[i].name);_this.checkedOpts.push(data[i]);if(data[i].isleaf==="1")_this.checked.ezms.push(data[i]["by3"]);else findEzmData(_this,data[i].level+1,data[i].id);}else{var nextLevel=level+1;if(nextLevel<_this.opts.level)searchCheckedData(_this,nextLevel,data[i].id);}}
if(cbFn)cbFn();}
function findEzmData(_this,level,pid){var data=_this.getNextLevelDate(level,pid);for(var i=0;i<data.length;i++){if(data[i]["_state"]&&data[i].isleaf==="1"){_this.checked.ezms.push(data[i]["by3"]);_this.checkedOpts.push(data[i]);}
var nextLevel=level+1;if(nextLevel<_this.opts.level)findEzmData(_this,nextLevel,data[i].id);}}};GJZ.prototype.setPos=function(dependDom,levelIndex){var pointer=$(dependDom).offset();if(dependDom===this.$elem){this.$listContainers[levelIndex].css({"left":pointer.left,"top":(pointer.top+dependDom.get(0).offsetHeight)});}else{this.$listContainers[levelIndex].css({"left":(pointer.left+dependDom.get(0).offsetWidth),"top":pointer.top});}
return this;}
GJZ.prototype.createList=function(levelIndex,pid,state){var $list=this.$listContainers[levelIndex],data=this.getNextLevelDate(levelIndex,pid);var keys=this.checked.keys;$list["data"]=data;var $ul=$('<ul></ul>');for(var i=0,len=data.length;i<len;i++){var $li=$('<li title="'+data[i].name+'" data-index="'+data[i]["_dataIndex"]+'" style="overflow: hidden;white-space: nowrap;text-overflow: ellipsis;"></li>');var $label=$('<label></label>');$li.append($label);var $checkbox=$('<input type="checkbox"/>');var $span=$('<span>'+data[i].name+'</span>');var $checkboxImg=$('<img class="box" disabled="disabled" src="'+GJZ.uncheckedUrl+'" />');$label.append($checkbox).append($span).append($checkbox).append($checkboxImg);if(data[i].isleaf==="0"&&parseInt(levelIndex)!==this.opts.level-1){var $nextImg=$('<img class="arrow" src="'+GJZ.arrawUrl+'" />');$label.append($nextImg);}
var tempState=(keys._contains(data[i].id))?true:state;setCheckboxState($checkbox.get(0),tempState);this.changeImgUrl($checkbox);$ul.append($li);}
$list.html("").append($ul);return this;};GJZ.prototype.bindEvent=function(levelIndex){var $list=this.$listContainers[levelIndex];var _this=this;$list.find("li").each(function(){var $checkbox=$(this).find("input");$checkbox.on("change",deepBind(_this,_this.itemClickHandler,levelIndex,$checkbox));$(this).on("mouseover",deepBind(_this,_this.itemActiveHandler,levelIndex,this));});this.$elem.on("keydown",function(){return false;});$(document.body).on("click",function(ev){var target=ev.target;if(!(ev.target==_this.elem||$(target).parents("div").hasClass("vetech-gjz-list"))){_this.hideContainer();}});return this;};GJZ.prototype.itemClickHandler=function(event,levelIndex,$checkbox){this.changeImgUrl($checkbox);var nextIndex=parseInt(levelIndex)+1;var currData=this.data[$checkbox.parents("li").attr("data-index")];var state=$checkbox.get(0).checked;if(nextIndex<this.opts.level&&currData.isleaf=="0"){this.updateNextList(nextIndex,state);this.updateAllChildrensState(nextIndex,currData.id,state);}
this.updatePNodeState(levelIndex,state);};GJZ.prototype.changeImgUrl=function($checkbox){var dataIndex=$checkbox.parents("li").attr("data-index");this.data[dataIndex]["_state"]=$checkbox.get(0).checked;var boxUrl=$checkbox.get(0).checked?GJZ.checkedUrl:GJZ.uncheckedUrl;$checkbox.parent().find(".box").attr("src",boxUrl);};GJZ.prototype.updateNextList=function(levelIndex,state){var $list=this.$listContainers[levelIndex];var _this=this;$list.find("input").each(function(){setCheckboxState(this,state);_this.changeImgUrl($(this));});};GJZ.prototype.updateAllChildrensState=function(levelIndex,pid,state){function update(_this,level,pid,state){var data=_this.getNextLevelDate(level,pid);for(var i=0;i<data.length;i++){data[i]["_state"]=state;var nextLevel=level+1;if(nextLevel<_this.opts.level)update(_this,nextLevel,data[i].id,state);}}
update(this,levelIndex,pid,state);};GJZ.prototype.updatePNodeState=function(levelIndex,state){if(levelIndex!=0){if(!state){for(var i=0;i<levelIndex;i++){var $checkbox=$(this.activeItems[i]).find("input");setCheckboxState($checkbox.get(0),state);this.changeImgUrl($checkbox);}}else{var $checkboxs=this.$listContainers[levelIndex].find("input").not("input:checked");if($checkboxs.length===0){var prevIndex=levelIndex-1;var $checkbox=$(this.activeItems[prevIndex]).find("input");setCheckboxState($checkbox.get(0),state);this.changeImgUrl($checkbox);this.updatePNodeState(prevIndex,state)}}}
this.setValue();};GJZ.prototype.stopEvent=function(event){event=event||window.event;if(event.stopPropagation)event.stopPropagation();else event.cancelBubble=true;};GJZ.prototype.itemActiveHandler=function(event,levelIndex,li){this.stopEvent(event);levelIndex=parseInt(levelIndex);this.closeNextLists(levelIndex);var currData=this.data[$(li).attr("data-index")];this.$listContainers[levelIndex].find("li").removeClass("active");$(li).addClass("active");this.activeItems[levelIndex]=li;if(levelIndex<this.opts.level-1&&currData["isleaf"]!=="1"){var nexeIndex=levelIndex+1;var pid=currData["id"];var state=$(li).find("input").get(0).checked;this.createList(nexeIndex,pid,state).bindEvent(nexeIndex).setPos($(li),nexeIndex).show(nexeIndex);}};GJZ.prototype.closeNextLists=function(levelIndex){for(var i=levelIndex+1;i<this.opts.level;i++){this.hide(i);}};GJZ.prototype.show=function(levelIndex){this.$listContainers[levelIndex].css("visibility","visible");this.isShow=true;};GJZ.prototype.hide=function(levelIndex){this.$listContainers[levelIndex]&&this.$listContainers[levelIndex].css("visibility","hidden");};GJZ.prototype.hideContainer=function(){this.$container.hide();for(var i=0;i<this.$listContainers.length;i++){if(i>0){this.$listContainers[i].css("visibility","hidden");}}
this.isShow=false;};GJZ.prototype.showContainer=function(){this.$container.show();this.$listContainers[0].show();this.isShow=false;};GJZ.prototype.getNextLevelDate=function(levelIndex,pid){var data=this.dataStore[levelIndex];if(!data)return[];var newData=[];for(var i=0,len=data.length;i<len;i++){if(data[i].parid===pid)newData[newData.length]=data[i];}
return newData;};Array.prototype._contains=function(value){for(var i=0;i<this.length;i++){if(value===this[i])return true;}
return false;};function setCheckboxState(box,state){if(box&&box.type==="checkbox"){box.checked=state;}}
function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}
GJZ.checkedUrl="/static/core/component/css/imgs/checked.png";GJZ.uncheckedUrl="/static/core/component/css/imgs/un-check.png";GJZ.arrawUrl="/static/core/component/css/imgs/arrow-right.png";})(jQuery,window,document);;(function($,window,document){$.fn.addGroupSelect=function(options,cbFn){if(!this.length)throw new Error("DOM绑定错误");var oInput=this.get(0);manager.clear(oInput);var gSelect=new GroupSelect(oInput,options,cbFn);$(oInput).on("click",inputClickHandler);manager.addEvent(gSelect.id,"click",inputClickHandler);return gSelect;};function inputClickHandler(ev){var $target=$(ev.target);var ids=$target.attr("vetech-ids");var component=manager.getComponent(ids);component.show();}
$.fn.addGroupSelect.options={usetype:"mult",defaultValues:null,splitStr:",",height:200,simpleData:{id:"id",name:"name"}};function GroupSelect(elem,options,cbFn){this.id="vetech-group-select-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.cbFn=cbFn||function(){};this.isShow=false;this.opts=$.extend({},$.fn.addGroupSelect.options,options);this.$hiddenInput=$("#"+this.opts.hiddenName);this.initIdArr=this.$hiddenInput.length?(this.$hiddenInput.val()||"").split(this.opts.splitStr):[];this.initNameArr=[];this.init();manager.manage(this);}
var fn=GroupSelect.prototype;fn.init=function(){this.$container=$('<div class="vetech-groupSelect"></div>');var iWidth=(this.opts.width||this.$elem.width());this.$container.css({"width":iWidth,"height":this.opts.height});if(this.opts.usetype==="radio"&&this.opts.defaultValues){this.$firstLabel=$('<label class="empty">'+(this.opts.defaultValues.name||"")+'</label>');this.$container.append(this.$firstLabel);}
$(document.body).append(this.$container);this.loadData();this.bindEvent();};fn.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};fn.render=function(){if(!(this.data&&this.data.length&&Object.prototype.toString.call(this.data)==="[object Array]"))return;for(var i=0,len=this.data.length;i<len;i++){var gName=this.data[i]["groupName"];this.addTitle(gName);var childs=this.data[i]["childs"];for(var j=0,len2=childs.length;j<len2;j++){this.addItem(childs[j]);}}
this.writeValue();};fn.addTitle=function(gName){var $title=$('<span></span><h3>'+gName+'</h3>');this.$container.append($title);};fn.addItem=function(data){if(this.opts.filterFn&&!this.opts.filterFn(data))return;var tempState=false;var $label=null;if($.inArray(data[this.opts.simpleData.id],this.initIdArr)>-1){this.initNameArr.push(data[this.opts.simpleData.name]);tempState=true;}
if(this.opts.usetype==="radio"){$label=$('<label class="radio" id="'+data[this.opts.simpleData.id]+'">'+data[this.opts.simpleData.name]+'</label>');}else{$label=$('<label id="'+data[this.opts.simpleData.id]+'" ><input type="checkbox" />'+data[this.opts.simpleData.name]+'</label>');if(tempState)$label.find("input").get(0).checked=true;}
$label.data("data",data);this.$container.append($label);};fn.show=function(){if(this.isShow)return;this.setPos();this.$container.show();this.isShow=true;};fn.hide=function(){if(!this.isShow)return;this.$container.hide();this.isShow=false;};fn.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"display":"block","left":pointer.left,"top":pointer.top+this.$elem.outerHeight()});};fn.destroy=function(){};fn.bindEvent=function(){var _this=this;if(this.opts.usetype==="radio"){this.$container.on("click","label",function(){_this.setValue.call(_this,$(this));});}else{this.$container.on("change","input",function(){_this.setValue.call(_this);});}
this.$container.on("click",$.proxy(stopEvent));$(document.body).on("click",function(ev){var target=ev.target;if(target!==_this.elem)_this.hide();});};fn.setValue=function($label){var tempArr=[],tempIds=[],tempNames=[];if(this.opts.usetype==="radio"){var tempData=$label.data("data")||this.opts.defaultValues;tempArr.push(tempData);tempIds.push(tempData[this.opts.simpleData.id]||tempData.id);tempNames.push(tempData[this.opts.simpleData.name]||tempData.name);this.hide();}else{var _this=this;this.$container.find("input[type='checkbox']").each(function(){var checkbox=$(this).get(0);var tempData=$(this).parent().data("data");if(checkbox.checked){tempArr.push(tempData);tempIds.push(tempData[_this.opts.simpleData.id]);tempNames.push(tempData[_this.opts.simpleData.name]);}});}
this.$hiddenInput.val(tempIds.join(this.opts.splitStr));this.$elem.val(tempNames.join(this.opts.splitStr));this.cbFn(tempArr);};fn.writeValue=function(){if(this.initNameArr)this.$elem.val(this.initNameArr.join(this.opts.splitStr));};function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}})(jQuery,window,document);;(function($,window,document){$.fn.addInfo=function(options,cbFn){if(!this.length)throw new Error("DOM绑定错误，请确认页面是否加载完毕！");var oElem=$(this).get(0);var infoObj=new VetechInfo(oElem,options,cbFn);return infoObj;};$.fn.addInfo.options={};function VetechInfo(elem,options,cbFn){this.id="vetech-gysinfo-"+String(Math.random(2)).substring(2);this.opts=$.extend({},$.fn.addInfo.options,options);this.elem=elem;this.$elem=$(elem);this.init();}
var fn=VetechInfo.prototype;fn.init=function(){this.$container=$('<div class="vetech-gys-info"></div>');this.$container.append('<img class="arraw" src="'+dataUrl+'" />');this.$shortName=$('<p class="shortName"></p>');this.$fullName=$('<p class="full-name"><i class="name">供应商全程：</i><i class="info"></i></p>');this.$list=$('<ul></ul>');this.$container.append(this.$shortName).append(this.$fullName).append(this.$list);$(document.body).append(this.$container);this.loadData();this.bindEvent();};fn.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};fn.render=function(){if(!(this.data&&this.data.length&&Object.prototype.toString.call("[object Array]")))return;for(var i=0,len=this.data.length;i<len;i++){var tempData=this.data[i];if(i===0){this.$shortName.html(tempData["JC"]||"");this.$fullName.find(".info").html(tempData["MC"]||"").attr("title",(tempData["MC"]||""));}
if(i>2)break;this.addItem(tempData);}};fn.addItem=function(data){var $li=$('<li></li>');$li.append('<span><img class="user" src="'+userUrl+'"/>'+(data["LXR"]||"")+'</span>');$li.append('<span><img class="phone" src="'+phoneUrl+'"/>'+(data["SJ"]||"&nbsp;")+'</span>');this.$list.append($li);};fn.show=function(){if(this.isShow)return;this.setPos();this.$container.show();this.isShow=true;};fn.hide=function(){if(!this.isShow)return;this.$container.hide();this.isShow=false;};fn.setPos=function(){var pointer=this.$elem.offset();var iLeft=pointer.left-10;iLeft=iLeft<0?0:iLeft;this.$container.css({"left":iLeft,"top":pointer.top+this.$elem.outerHeight()+8});};fn.destroy=function(){this.$container.remove();};fn.bindEvent=function(){var _this=this;this.$elem.on("mouseenter",function(){_this.show();});this.$container.on("mousemove",$.proxy(stopEvent));$(document.body).on("mousemove",function(ev){var target=ev.target;if(target===_this.elem)return;_this.hide();});};function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}
var dataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAQCAYAAAD0xERiAAAATElEQVR42mNgIAKcP3/+PwM1AMig58+f/6fYQJhBP3/+pMxAZINgmCwDsRlEloH4DCLJQGIMIspAUgzCayA5BmE1kBKDKIrlUTDIAQChUXqIUUWc4AAAAABJRU5ErkJggg==";var userUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABCElEQVQ4T72SwU3DQBBF/7cQXNduAEVifYUOMB3QAcmR9QHRAVRALjFHkg7oANMBXG2kpAJ7r0hRBtkEZFuLshJS9jp/3szO/8Q/H1396mGpeLR+InDZ1AV4ls+Dib0d2aHeCYiyYg7wqi+WRWXisRcgzMqcwHlXLMBrbXSyH0CUlTKcJAJbpzrczwbqsUwCwUt32oa4sNc699qgEYVZ8UbwdGuj84BN7e8cHK6XJNQ3QFa1iUeuzPQAalaMg4DHIkgI9CwTICeRb4Qra04WP7AWMEzeznSLzKs0nvx+IZp9TEG52dnYT9Z9leq7dgOX7z6wymi2gO7FfRq3h32vTXzmdMEX0ui+ABJZZBG/fZzYAAAAAElFTkSuQmCC";var phoneUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABn0lEQVQ4T42SwXHUQBBFX2uRtDdEBAwReB2B0cFSccKOAIeAI1gTAcoAEQHmRK04rELYDJgMEDevzLpdo9WohCwK5iRNz7z5/X8L/7HayqzCA428sXZ6XPyGfjOmXbBGSeLcXo4P7jemRHgnShFGfJDUNr7eAdrKXCl8BBL3HwhpeG7rCeRChULgZxSSekgH2FfGEZ8PF5TPcW6vRvCzKOSaO5J2wU6gjDL73tXnAdDEmX3RA1aquBZeRgdOfz/DPCjb6MAr58kRsDG3CG/nFPi9u8rUojRxbi/2G7PTgHJ5bl1Lgwef3Lcne7DCSfxA2gasEL7EmRVnqgiNa6MD9An86F5TLuPc3o69ETgVIXHSHaCtTKGKcWqGGH0bCvUys6kH3y9Ioszu9hvTpbDMrOnbqePc3gyA++/mtXthGqNuTTLOvW+tDAJKF/UAcIWODGfALhCuD8paYOXcn5vCIcbJNB69GK1xW9PaHwp6eTcI6+nBuel8osBfejIXx3S+Otf/qaA7uzVJ21IjnAC/UIooopia+VcFgyczCUwVPAJu8MsR0CEHGAAAAABJRU5ErkJggg==";})(jQuery,window,document);;(function($,w,d){$(d).ready(function(){});function addEvent(){$(d.body).on("contextmenu",function(ev){var $target=$(ev.toElement||ev.target);var gnbh=$target.attr("gnbh")||"";var mkbh=$("#_gnmks").html();openHelpCentr(gnbh,mkbh);if(document.all)window.event.returnValue=false;ev.preventDefault();});}
function openHelpCentr(mkbh,gnbh){}})(jQuery,window,document);;(function($,window,document){var $xzqSqAddressContainer=null,triggerDom=null,opts={},pulldown=null;var defaultOptions={tplUrl:'/webcomponent/hotel/kjcommhotel/getHotelAddress?notitle=1',pt:'asms',pulldown:true,csbh:null,callBack:null};$.fn.showXzqSqAddress=function(options,cbFn){if(this.length==0)throw new Error("DOM绑定错误【请查看页面是否渲染完毕，或者是否存在该DOM对象】");triggerDom=this.get(0);opts=$.extend({},defaultOptions,options);$(triggerDom).on('click',function(){if(pulldown!=null)pulldown.hide();if($xzqSqAddressContainer!=null)return;loadTplContainer();});createPulldownContainer();$(triggerDom).on('keyup',function(event){if($.isBlank($(this).val())){pulldown.hide();$(this).click();window.clearTimeout(pulldown.timer);}else{destroy();var csbh=$("#"+opts.csbh).val();pulldown.opts.typeValue='/webcomponent/poi_kj/getPoi?city_id='+(csbh||"")+"&yycj=jd";pulldown.elemKeyUpHandler(event);}
if(typeof opts.callBack=='function'){opts.callBack(null,$(triggerDom));}});}
function loadTplContainer(){var csbh=$("#"+opts.csbh).val();$.ajax({type:"get",url:opts.tplUrl,data:{"pt":opts.pt,"csid":csbh,"hyid":opts.hyid||""},success:function(data){init(data);}});}
function init(data){destroy();$xzqSqAddressContainer=$($.trim(data));var $headli=$xzqSqAddressContainer.find(".header li").eq(0);$headli.addClass("active");var $con=$xzqSqAddressContainer.find(".content .tab-page").eq($headli.data("index"));$con.addClass("active").find(".ve_second_tab li").eq(0).addClass("active");bindEvent();show();}
function createPulldownContainer(){var csbh=$("#"+opts.csbh).val();var opts2=$.extend({type:2,width:380,typeValue:'/webcomponent/poi_kj/getPoi?city_id='+(csbh||""),dataType:"dynamic",openLastKey:true,_hasPage_:false,defer:500,height:470,title:"可输入地址名称、简拼、全拼",autoSetValue:false,autoClear:false,fn1:function(data){var keyword=$.trim($(triggerDom).val());var dzlx=data.dzlx||"";var poi_addr=data.poi_addr?data.poi_addr:'';var $dz=poi_addr?"<p title='"+data.poi_addr+"' class='hotel-opi-p'>"+poi_addr+"</p>":"";var cityName='';if(data.city_name&&data.szq){cityName="<span style='width:30%;' title='"+data.city_name+data.szq+"'>"+data.city_name+','+data.szq+"</span>";}else if(data.city_name&&!data.szq){cityName="<span style='width:30%;' title='"+data.city_name+data.szq+"'>"+data.city_name+"</span>";}else if(!data.city_name&&data.szq){cityName="<span style='width:30%;' title='"+data.city_name+data.szq+"'>"+data.szq+"</span>";}
var $div="<span style='width:55%;' title='"+data.name+"'>"+markKeyword(keyword,data.name)+"</span>"+
cityName+"<span style='width:15%;text-align:right;' title='"+dzlx+"'>"+dzlx+"</span>"+
$dz;return $div;}},opts);var parmaJson={"options":opts2,"filterFn":function(data,value){return 1},cbFn:function(data){data['bdjd']=data['lon'];data['bdwd']=data['lat'];opts.callBack(data,$(triggerDom));}};pulldown=$(triggerDom).addPulldown(null,parmaJson);}
function markKeyword(keyWord,name){var raRegExp=new RegExp(keyWord,"g");return name.replace(raRegExp,"<i style='color:red;font-style: normal;'>"+keyWord+"</i>");}
function show(){setPos();$(document.body).append($xzqSqAddressContainer);$xzqSqAddressContainer.css("visibility","visible");}
function setPos(){var point=$(triggerDom).offset();$xzqSqAddressContainer.css({"left":point.left,"top":point.top+$(triggerDom).outerHeight()});}
function bindEvent(){$xzqSqAddressContainer.on('click.xzqSqAddressComponent','.header li',switchTabHandler);$xzqSqAddressContainer.on('click.xzqSqAddressComponent','.ve_second_tab li',switchSecondTabHandler);$xzqSqAddressContainer.on('click.xzqSqAddressComponent','.content ul:not(.ve_second_tab) li',itemClickHandler);$xzqSqAddressContainer.on('click.xzqSqAddressComponent','.header .close',closeHandler);$(document).on("mousedown.xzqSqAddressComponent",closeHandler);$xzqSqAddressContainer.on("mousedown.xzqSqAddressComponent",function(){return false;});}
function switchTabHandler(){var index=$(this).data("index");$(this).parent().find("li").removeClass("active").end().end().addClass("active");$xzqSqAddressContainer.find(".content .tab-page").removeClass("active").eq(index).addClass("active");}
function switchSecondTabHandler(){var index=$(this).data("index");$(this).parent().find("li").removeClass("active").end().end().addClass("active");var $page=$(this).parent().parent();$page.find("ul:gt(0)").hide().eq(index).show();var $dom=$page.find("ul:gt(0)").eq(index).find("li:first");$dom.addClass('active');if(typeof opts.callBack=='function'){opts.callBack($dom.data("data"),$(triggerDom));}}
function itemClickHandler(){try{var data=$(this).data("data");if(typeof opts.callBack=='function'){opts.callBack(data,$(triggerDom));}
destroy();}catch(e){throw new Error("数据格式错误"+e);}}
function destroy(){if($xzqSqAddressContainer){$xzqSqAddressContainer.off(".xzqSqAddressComponent");$(document).off(".xzqSqAddressComponent");$xzqSqAddressContainer.remove();$xzqSqAddressContainer=null;}}
function closeHandler(ev){var target=ev.target;if(triggerDom!==target){try{var page=$xzqSqAddressContainer.find('.content .tab-page.active');var index=page.find('.ve_second_tab li.active').data('index');var data=page.find('ul').eq(index+1).find("li.active").data("data");if(typeof opts.callBack=='function'){opts.callBack(data,$(triggerDom));}}catch(e){}
destroy();}}})(jQuery,window,document);;(function($,window,document){$.addJdCalendar=function(options,cbFn){var jdCalendar=new JdCalendar(options,cbFn);return jdCalendar;};$.addJdCalendar.options={splitStr:"-",todayDate:new Date(),tipsFn:null,maxDay:180,minDate:"",maxDate:""};function JdCalendar(options,cbFn){this.id="vetech-jdCalendar-"+String(Math.random()).substring(2);this.opts=$.extend({},$.addJdCalendar.options,options);if(!Calendar)throw new Error("请加载Calendar.js文件");this.cal=new Calendar();this.$startInput=$("#"+this.opts.startInput);this.startInput=this.$startInput.get(0);this.$endInput=$("#"+this.opts.endInput);this.endInput=this.$endInput.get(0);this.getStartAndEndValue();this.cbFn=cbFn||function(){};this.activeFlag="start";this.activeDate=this.startDate;var currDate=new Date();this.minDate=this.str2Date(this.opts.minDate||"");this.maxDate=this.str2Date(this.opts.maxDate||"");this.maxDate=this.opts.maxDate?this.maxDate:new Date(currDate.getFullYear(),currDate.getMonth(),currDate.getDate()+this.opts.maxDay-1);this.startMaxDate=this.opts.maxDate?this.maxDate:new Date(currDate.getFullYear(),currDate.getMonth(),currDate.getDate()+this.opts.maxDay-2);this.init();}
var fn=JdCalendar.prototype;fn.init=function(){this.$container=$('<div class="vetech-jd-calendar"></div>');this.$leftCalendar=$('<div class="calendar"></div>');var $leftHeader=$('<div class="header"><b>2017年5月</b><a href="javascript:;" class="ve-btn leftBtn"><i class="iconvet icon-angle-left"></i></a></div>');this.$leftCalendar.append($leftHeader);this.$rightCalendar=$('<div class="calendar"></div>');var $rightHeader=$('<div class="header"><b>2017年6月</b><a href="javascript:;" class="ve-btn rightBtn"><i class="iconvet icon-angle-right"></i></a></div>');this.$rightCalendar.append($rightHeader);this.$tag=$('<div class="tag"><b></b></div>');this.$container.append(this.$leftCalendar).append(this.$rightCalendar);$(document.body).append(this.$container);this.bindEvent();this.render();};fn.getStartAndEndValue=function(){this.startDate=this.str2Date(this.$startInput.val());if(typeof this.startDate==="string"||this.startDate==="")this.startDate=new Date();this.endDate=this.str2Date(this.$endInput.val());if(typeof this.endDate==="string"||this.endDate==="")this.endDate=new Date();}
fn.loadData=function(){};fn.render=function(){this.$leftCalendar.append(this.createTable());this.$rightCalendar.append(this.createTable());this.renderData(this.$leftCalendar,this.activeDate);this.renderData(this.$rightCalendar,addMonth(this.activeDate,1));};fn.renderData=function($calendar,date){var _this=this;$calendar.find("tbody").find("td").removeClass("disable").removeClass("selected").removeClass("active").removeClass("start").removeClass("end");var year=date.getFullYear();var month=date.getMonth();$calendar.find(".header").find("b").html(year+"年"+(month+1)+"月");var firtDayWeek=getWeekByDate(new Date(year,month,1));firtDayWeek=firtDayWeek===0?7:firtDayWeek;var maxDays=new Date(year,month+1,0).getDate();var count=1;var todayDate=this.opts.todayDate;if(this.minDate){if(c2d(todayDate,this.minDate)!==1){todayDate=todayDate;}else{todayDate=this.minDate;}}
var currDate=this.activeFlag==="start"?todayDate:this.startDate;var tempMaxDate=this.activeFlag==="start"?this.startMaxDate:this.maxDate;$calendar.find("tbody").find("td").each(function(i,item){if(i>=(firtDayWeek-1)&&count<=maxDays){var tempDate=new Date(year,month,count);if(c2d(tempDate,currDate)===1||c2d(tempDate,tempMaxDate)===-1){$(this).addClass("disable");}else if(c2d(_this.startDate,tempDate)===0){$(this).addClass("active").addClass("start");}else if(c2d(_this.endDate,tempDate)===0){$(this).addClass("active").addClass("end");}else if(c2d(_this.startDate,tempDate)===1&&c2d(_this.endDate,tempDate)===-1){$(this).addClass("selected");}
var jrStr=_this.getHolidayByDate(tempDate);if(c2d(tempDate,new Date())===0){$(this).html(jrStr?jrStr:"今天").addClass("today");}else{$(this).html(jrStr?jrStr:count);}
$(this).attr("data-date",year+_this.opts.splitStr+month+_this.opts.splitStr+count);count++;}else{$(this).html("");}});};fn.getHolidayByDate=function(date){var result=this.cal.getsf(date);if(!result)result=this.cal.getlf(date);return result;};fn.showTag=function(){this.$container.find(".tag").remove();var $endTd=this.$container.find("td.end");if(!$endTd.length)return;var $startTd=this.$container.find("td.start");var date1=this.activeFlag==="start"?this.td2Date($startTd):this.startDate;var date2=this.td2Date($endTd);var value=Math.ceil(Math.abs(date2-date1)/(1000*60*60*24))+"晚";var $tempTag=this.$tag.clone();$tempTag.find("b").html(value);$endTd.append($tempTag);$tempTag.show();};fn.createTable=function(){var $table=$('<table></table>');$table.append('<thead><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th class="week">六</th><th class="week">日</th></thead>');var $tbody=$('<tbody></tbody>');$table.append($tbody);var count=0;for(var i=0;i<6;i++){var $tr=$('<tr></tr>');for(var j=1;j<8;j++){var $td=$('<td></td>');if(j%6===0||j%7===0)$td.addClass("week");$tr.append($td);this.tdCount++;}
$tbody.append($tr);}
return $table;};fn.bindEvent=function(){var _this=this;this.$leftCalendar.find(".leftBtn").on("click",$.proxy(this.leftBtnHandler,this));this.$rightCalendar.find(".rightBtn").on("click",$.proxy(this.rightBtnHandler,this));this.$container.on("click","td",$.proxy(this.tdClickHandler,this));this.$container.on("mouseover","td",$.proxy(this.tdMouseOverHandler,this));this.$startInput.on("click",function(ev){var $target=$(ev.target);_this.inputClickHandler.call(_this,$target,"start");});this.$endInput.on("click",function(ev){var $target=$(ev.target);_this.inputClickHandler.call(_this,$target,"end");});this.$container.on("click",$.proxy(stopEvent));var flag;$(document.body).on("click",function(ev){var target=ev.target;if(target===_this.startInput||target===_this.endInput)return;if(_this.$container.css("display")=="block"&&flag!=_this.$endInput.val()){_this.cbFn(_this.$startInput.val(),_this.$endInput.val(),_this.$container.find(".tag").find("b").text()||0);flag=_this.$endInput.val();}
_this.hide();});};fn.inputClickHandler=function($target,flag){this.setPos($target);this.getStartAndEndValue();this.activeFlag=flag;var date1=copyDate(this.startDate);date1.setDate(1);var date2=copyDate(this.endDate);date2.setDate(1);if(flag==="start"||date1>=date2){this.activeDate=this.startDate;this.renderData(this.$leftCalendar,this.activeDate);this.renderData(this.$rightCalendar,addMonth(this.activeDate,1));}else{this.activeDate=this.endDate;this.renderData(this.$leftCalendar,addMonth(this.activeDate,-1));this.renderData(this.$rightCalendar,this.activeDate);}
this.show();this.showTag();};fn.leftBtnHandler=function(){var tempDate=addMonth(this.activeDate,-2);this.renderData(this.$leftCalendar,tempDate);this.renderData(this.$rightCalendar,addMonth(this.activeDate,-1));this.activeDate=tempDate;this.showTag();};fn.rightBtnHandler=function(){var tempDate=addMonth(this.activeDate,2);this.renderData(this.$leftCalendar,tempDate);this.renderData(this.$rightCalendar,addMonth(this.activeDate,3));this.activeDate=tempDate;this.showTag();};fn.tdClickHandler=function(ev){stopEvent(ev);var $target=$(ev.target);if($target.hasClass("disable")||!$target.is("td"))return;if(!$target.attr("data-date"))return;var strDate=this.date2Str(this.td2Date($target));var arrs=strDate.split(this.opts.splitStr);if(arrs[1]<10)arrs[1]="0"+arrs[1];if(arrs[2]<10)arrs[2]="0"+arrs[2];if(this.activeFlag==="start"){this.$startInput.val(arrs.join(this.opts.splitStr));var nextData=this.td2Date($target);this.endDate=new Date((nextData/1000+86400)*1000);var strDate2=this.date2Str(this.endDate);var arrs2=strDate2.split(this.opts.splitStr);if(arrs2[1]<10)arrs2[1]="0"+arrs2[1];if(arrs2[2]<10)arrs2[2]="0"+arrs2[2];this.$endInput.val(arrs2.join(this.opts.splitStr));this.inputClickHandler(this.$endInput,"end");}else{if(this.$startInput.val()===arrs.join(this.opts.splitStr))return;this.$endInput.val(arrs.join(this.opts.splitStr));this.cbFn(this.$startInput.val(),this.$endInput.val(),this.$container.find(".tag").find("b").text()||0);this.hide();}};fn.tdMouseOverHandler=function(ev){var $target=$(ev.target);if($target.is("td")&&$target.hasClass("disable")&&this.opts.tipsFn){this.opts.tipsFn.call($target,this.td2Date($target));}else{if($target.hasClass("disable")||$target.html()===""||!$target.is("td"))return;this.clearAllSelected();this.setSelected($target);}};fn.clearAllSelected=function(){this.$container.find("td").removeClass("selected").removeClass("active").removeClass("end").removeClass("start");};fn.setSelected=function($target){var _this=this;var currDate=this.td2Date($target);if(this.activeFlag==="start"){if(c2d(this.endDate,currDate)!==-1){this.$tag.hide();$target.addClass("active");this.showTag();return;}
this.$container.find("tbody").find("td").each(function(i){if($(this).hasClass("disable")||$(this).html()==="")return;var tempDate=_this.td2Date($(this));if(c2d(_this.endDate,tempDate)===-1&&c2d(currDate,tempDate)===1){$(this).addClass("selected");}
if(c2d(_this.endDate,tempDate)===0)$(this).addClass("active").addClass("end");});$target.addClass("active").addClass("start");}else{this.$container.find("tbody").find("td").each(function(i){if($(this).hasClass("disable")||$(this).html()==="")return;var tempDate=_this.td2Date($(this));if(c2d(tempDate,currDate)===1&&c2d(_this.startDate,tempDate)===1){$(this).addClass("selected");}
if(c2d(_this.startDate,tempDate)===0)$(this).addClass("active").addClass("start");});$target.addClass("active").addClass("end");}
this.showTag();};fn.show=function(){this.$container.show();};fn.hide=function(){this.$container.hide();};fn.setPos=function($elem){var pointer=$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+$elem.outerHeight()});};fn.td2Date=function($td){if(!($td&&$td.length))return new Date();var arr1=$td.attr("data-date").split(this.opts.splitStr);var tempDate=new Date(arr1[0],arr1[1],arr1[2]);return tempDate;};fn.date2Str=function(date){var arr=[date.getFullYear(),date.getMonth()+1,date.getDate()];return arr.join(this.opts.splitStr);};fn.str2Date=function(strDate){if(!(strDate&&typeof strDate==="string"))return"";var arr=strDate.split(this.opts.splitStr);return new Date(arr[0],arr[1]-1,arr[2]);};function c2d(date1,date2){var tempDate1=new Date(date1.getFullYear(),date1.getMonth(),date1.getDate());var tempDate2=new Date(date2.getFullYear(),date2.getMonth(),date2.getDate());if(tempDate2-tempDate1>0)return 1;if(tempDate2-tempDate1==0)return 0;if(tempDate2-tempDate1<0)return-1;}
function copyDate(date){var date=new Date(date.getFullYear(),date.getMonth(),date.getDate());return date;}
function addMonth(date,num){var year=date.getFullYear();var month=date.getMonth();var day=1;return new Date(year,month+num,day);}
function getWeekByDate(date){return date.getDay();}
function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}})(jQuery,window,document);;(function($,window,document){$.fn.addJspHtmlContainer=function(options,cbFn){if(this.length=0)throw new Error("please make sure the dom have already bound!");var oInput=this.get(0);manager.clear(oInput);var obj=new JspHtmlContainer(oInput,options,cbFn);return obj;}
$.fn.addJspHtmlContainer.options={width:650,height:313,min_height:100,url:"",qdata:{},bindEvent:null,immediate:true,simpleData:{qstr:"lkxm"},beforeRenderFn:null,defer:300}
function JspHtmlContainer(oInput,options,cbFn){this.id="vetech-jsphtmlcon-"+new String(Math.random()).substring("2");this.elem=oInput;this.$elem=$(oInput);this.opts=$.extend({},$.fn.addJspHtmlContainer.options,options);this.cbFn=cbFn;this.isShow=false;this.qdata=$.extend({},{targetDivId:this.id},this.opts.qdata);this.timer=null;this.init();manager.manage(this);}
var fn=JspHtmlContainer.prototype;fn.init=function(){this.createContainer();this.bindEvent();}
fn.createContainer=function(){this.$container=$("<div style='display:none;position:absolute;background-color:white;border:1px solid lightgray;padding:10px;' id='"+this.id+"'></div>");this.$container.css("width",this.opts.width);this.$container.css("max-height",this.opts.height);this.$container.css("min-height",this.opts.min_height);this.$closeIcon=$('<img src='+JspHtmlContainer.closeIcon+' style="width:25px;height:25px;position: absolute;right:-10px;top:-10px;cursor: pointer;">')
this.$tabList=$("<div></div>")
this.$container.append(this.$tabList)
this.$container.append(this.$closeIcon);$(document.body).append(this.$container);}
fn.renderData=function(qstr,immediate){var _this=this;if(this.opts.beforeRenderFn)this.opts.beforeRenderFn.call(this);this.qdata[this.opts.simpleData.qstr]=qstr;this.$tabList.load(this.opts.url,this.qdata,function(response,status){if(immediate){_this.show();}});}
fn.bindEvent=function(){var _this=this;if(this.opts.bindEvent)this.opts.bindEvent.call(this);this.$elem.on("keyup",$.proxy(this.keyUpEventHandler,this));this.$elem.on("click",$.proxy(this.clickEventHandler,this));this.$closeIcon.on("click",deepBind(this,this.closeHandler));this.$container.on("click",'table#vc tr',$.proxy(this.trClickEventHandler,this));manager.addEvent(this.id,"click",$.proxy(this.clickEventHandler,this));manager.addEvent(this.id,"keyup",$.proxy(this.keyUpEventHandler,this));$(document).on("click",deepBind(this,this.closeHandler));this.$container.on("mousedown",function(ev){ev.preventDefault();ev.stopPropagation();if(document.all&&!document.addEventListener){_this.$container[0].setCapture&&_this.$container[0].setCapture();}
return false;}).on("mouseup",function(){_this.$container[0].releaseCapture&&_this.$container[0].releaseCapture();}).on("click",deepBind(this,this.stopEvent));}
function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}
fn.closeHandler=function(event){this.hide();this.stopEvent(event);}
fn.keyUpEventHandler=function(){var _this=this;if(this.timer){window.clearTimeout(this.timer)}
this.timer=window.setTimeout(function(){var qstr=_this.$elem.val();_this.renderData(qstr,true);},this.opts.defer)}
fn.clickEventHandler=function(){var qstr=this.$elem.val();if(!$.isBlank(qstr)){this.renderData(qstr,true);}}
fn.trClickEventHandler=function(event){var target=event.currentTarget;var data=$(target).find("td.data_row input").eq(0).val();if(this.cbFn)eval(this.cbFn)(this.$elem,$.parseJSON(data));this.closeHandler(event);}
fn.show=function(){if(this.isShow)return;this.setPos();this.$container.show();this.isShow=true;};fn.hide=function(){if(!this.isShow)return;this.$container.hide();this.isShow=false;};fn.destroy=function(){this.$container.remove();};fn.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+this.$elem.outerHeight()});};fn.stopEvent=function(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelbubble=true;}
JspHtmlContainer.closeIcon='data:image/png;base64,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'})(jQuery,window,document);;(function($,window,document){$.fn.addSearch=function(options,callback){if(!this.length)throw new Error("DOM绑定错误，请确认页面是否加载完毕.");var search=new KeyWordSearch(this.get(0),options,callback);return search;};var defaultOptions={width:null,maxNum:10,defer:300,renderFn:null};function KeyWordSearch(elem,options,callback){this.id="vetech-keyword-search-"+String(Math.random()).replace(/\D/g,"");this.elem=elem;this.$elem=$(elem);this.opts=$.extend(true,{},defaultOptions,options);this.cbFn=callback||$.noop();this.isShow=false;this.timer=null;this.activeIndex=-1;this.init();}
var fn=KeyWordSearch.prototype;fn.init=function(){this.$container=$('<ul class="vetech-search-list"></ul>');var iWidth=this.opts.width||this.$elem.width();this.$container.css("width",iWidth);$(document.body).append(this.$container);this.bindEvent();};fn.loadData=function(){var _this=this;_this.data=[];if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{var value=$.trim(this.$elem.val());if(!value){this.$container.html("");this.hide();return;}
var qDatas={keyWord:value,count:this.opts.maxNum};$.ajax({type:"get",url:_this.opts.typeValue,data:qDatas,dataType:"json",success:function(data){if(data.status==="1"){_this.data=data.data;_this.data[0]["rmjq"]="1";_this.render();}}});}};fn.render=function(){this.$container.html("");this.activeIndex=-1;if(!this.data.length){this.$container.remove();return;}
for(var i=0,len=this.data.length;i<len;i++){var $strHtml=$(this.opts.renderFn?this.opts.renderFn(this.data[i]):this.createLi(this.data[i]));$strHtml.data("data",this.data[i]).data("index",i);this.$container.append($strHtml);}
this.show();};fn.createLi=function(tempData){var $li=$('<li></li>'),$leftSpan=$('<span class="left"></span>'),$rightSpan=$('<span class="right"><i class="provice">'+(tempData["sssfmc"]||"")+'</i><i class="area">'+(tempData['sscsmc']||"")+'</i></span>');$li.append($leftSpan).append($rightSpan);var content=(tempData["jqmc"]||"");if(this.$elem.val()){content=content.replace(new RegExp(this.$elem.val(),"g"),"<i class='keyword'>"+this.$elem.val()+"</i>");$leftSpan.html(content);}else{$leftSpan.html(content);}
if(tempData["rmjq"]==="1"){$leftSpan.append('<b class="hot"></b>');}
return $li;};fn.show=function(){if(this.isShow)return;this.setPos();this.$container.show();this.isShow=true;};fn.hide=function(){if(!this.isShow)return;this.$container.hide();this.isShow=false;};fn.setPos=function(){var point=this.$elem.offset();this.$container.css({"left":point.left,"top":point.top+this.$elem.outerHeight(true)});};fn.setValue=function(data){var value=data["jqmc"];this.$elem.val(value);this.hide();this.$elem.blur();this.cbFn(data);};fn.bindEvent=function(){var _this=this;this.$elem.on("focus",function(){$.trim(_this.$elem.val())&&_this.loadData.call(_this);}).on("blur",function(){setTimeout(function(){_this.hide.call(_this);},100);}).on("keyup",function(ev){var keyCode=ev.keyCode,$lis=_this.$container.find("li");if(keyCode===40||keyCode===38){var preIndex=_this.activeIndex;_this.activeIndex+=keyCode-39;if(_this.activeIndex<0)_this.activeIndex=0;if(_this.activeIndex>$lis.length-1)_this.activeIndex=$lis.length-1;$lis.eq(preIndex).removeClass("active").end().eq(_this.activeIndex).addClass("active");}else if(keyCode===13){var data=$lis.eq(_this.activeIndex).data("data");_this.setValue.call(_this,data);}else{if(_this.timer)clearTimeout(_this.timer);_this.timer=setTimeout($.proxy(_this.loadData,_this),_this.opts.defer);}});this.$container.on("click","li",function(){var data=$(this).data("data");_this.setValue.call(_this,data);}).on("mouseenter","li",function(){var currIndex=$(this).data("index");_this.$container.find("li").eq(_this.activeIndex).removeClass("active").end().eq(currIndex).addClass("active");_this.activeIndex=currIndex;});};})(jQuery,window,document);(function($,window,document){var $mddContainer=null,triggerDom,isComming=false,loadShow=null,opts={};var defaultOptions={simpleData:{id:"id",name:"name"},autoClose:false,writeValue:[],renderFn:null,isAuto:false,tplUrl:"/webcomponent/travel/kjcommtravel/getMultiHotData?notitle=1","pt":"ASMS","csbh":"","queryUrl":"/webcomponent/travel/kjcommtravel/searchTravelCity","maxNum":20,"size":10};$.fn.showClmdd=function(options){if($mddContainer!=null)return;triggerDom=this;opts=$.extend(true,{},defaultOptions,options);isComming=false;loadTmpl();};function loadTmpl(){$.ajax({type:"get",url:opts.tplUrl,beforeSend:function(){var pointer=$(triggerDom).offset();var l=pointer.left,t=pointer.top;loadShow=layer.load(2,{offset:[t,l]},{time:5*1000});},data:{"pt":opts.pt,"csbh":opts.csbh},success:function(data){layer.close(loadShow);init(data);}});}
function init(data){$mddContainer=$($.trim(data));if(opts.isAuto){$mddContainer.find("dd li").addClass("auto").find("a").addClass("auto");}
writeValue();bindEvent();show();}
function writeValue(){var result=opts.writeValue;if(result&&result.length>0){$mddContainer.find(".em-none").hide();for(var i=0,len=result.length;i<len;i++){addSpan(result[i]);}}}
function show(){setPos();$(document.body).append($mddContainer);$mddContainer.show();setWidth();}
function setPos(){var point=$(triggerDom).offset();$mddContainer.css({"left":point.left,"top":point.top+$(triggerDom).outerHeight()});}
function setWidth(){var iWidth=$mddContainer.find(".header li").length*60+50;$mddContainer.find(".search-container div").width(iWidth-85);$mddContainer.find(".list-container").width(iWidth-85);$mddContainer.width(iWidth);}
function bindEvent(){$mddContainer.on("keyup.mddComponent",".searchTxt",searchHandler);$mddContainer.on("click.mddComponent",".header li",switchTabHandler);$mddContainer.on("click.mddComponent",".list-container li",addCityHandler);$mddContainer.on("click.mddComponent",".content li",itemClickHandler);$mddContainer.on("click.mddComponent",".choosedCity",choosedCityClickHandler);$mddContainer.on("keyup.mddComponent",".focusInput",choosedCityKeyHandler);$mddContainer.on("click.mddComponent",".sureBtn",sureHandler);$mddContainer.on("click.mddComponent",".search-container div",setFocus);$(document).on("mousedown.mddComponent",closeHandler);$mddContainer.on("mousedown.mddComponent",function(){return false;});if(opts.autoClose){$mddContainer.on("mouseleave",function(ev){isComming=false;closeHandler.call(this,ev);});}
$mddContainer.on("mouseenter",function(){isComming=true;});}
function closeHandler(ev){setTimeout(function(){if(isComming&&opts.autoClose)return;var target=ev.target;if(triggerDom.get(0)!==target&&$.inArray(target,triggerDom.find("*"))==-1)destroy();},100);}
function searchHandler(ev){var value=$(".searchTxt").val();var keyCode=ev.keyCode;var $container=$mddContainer.find(".list-container");var $currLi=$container.find(".active");if(keyCode===8&&!value){if($(this).data("isNull")){$(this).parents(".search-container").find(".choosedCity").last().remove();warnMaxNum();}else{$mddContainer.find(".tab-container").show().end().find(".list-container").hide();$(this).data("isNull",true);}}else if(keyCode===38){if($currLi.length){if(!$currLi.prev("li").length)return;$currLi.prev("li").addClass("active");$currLi.removeClass("active");}}else if(keyCode===40){if(!$currLi.length){$container.find("li").eq(0).addClass("active");}else{if(!$currLi.next("li").length)return;$currLi.next("li").addClass("active");$currLi.removeClass("active");}}else if(keyCode===13){addCityHandler.call($container.find(".active"));}else{var iWidth=calcInputWdith(value);$(this).css("width",iWidth+20);$mddContainer.find(".tab-container").hide().end().find(".list-container").show();$(this).data("isNull",false);$.ajax({type:"get",url:opts.queryUrl,data:{"pt":opts.pt,"size":opts.size,"qStr":value},dataType:"json",success:function(data){if(opts.type=="cfd"){data=data.data||[];}else{data=formatData(data);}
renderList(data);}});}}
function renderList(data){var $frag=$(document.createDocumentFragment());var keyWord=$.trim($(".searchTxt").val());for(var i=0,len=data.length;i<len;i++){var $li=$("<li>"+markKeyword(data[i][opts.simpleData.name])+"</li>");if(opts.renderFn){$li=opts.renderFn(data[i],keyWord);}
$li.data("data",data[i]);$frag.append($li);}
$mddContainer.find(".list-container").html("").append($frag);}
function markKeyword(name){var keyWord=$.trim($(".searchTxt").val());var raRegExp=new RegExp(keyWord,"g");return name.replace(raRegExp,"<i style='color:red;font-style: normal;'>"+keyWord+"</i>");}
function calcInputWdith(value){var $span=$("<span style='left:-1000px;position:absolute'>"+value+"</span>");$(document.body).append($span);var iWidth=$span.width();$span.remove();return iWidth;}
function switchTabHandler(){var index=$(this).data("index");$(this).parent().find("li").removeClass("active").end().end().addClass("active");$mddContainer.find(".content div").removeClass("active").eq(index).addClass("active");}
function addCityHandler(){$mddContainer.find(".tab-container").show().end().find(".list-container").hide();var data=$(this).data("data"),$searchTxt=$mddContainer.find(".searchTxt"),id=data[opts.simpleData.id];if(!$mddContainer.find(".search-container").find("#"+id).length){warnMaxNum();if($mddContainer.find(".search-container").find("span").length<opts.maxNum){addSpan(data);}}else{$searchTxt.val("").focus();}
$searchTxt.css("width",20);}
function warnMaxNum(){if($mddContainer.find(".search-container").find("span").length<opts.maxNum){$mddContainer.find(".search-container div").css("border","1px solid #76b5f4").find("p").remove();}else{$mddContainer.find(".search-container .searchTxt").val("");$mddContainer.find(".search-container div").css("border","1px solid red");if($mddContainer.find("#choose-warn").length==0){$mddContainer.find(".search-container div").append("<p style='color:red' id='choose-warn'>您最多能选择"+opts.maxNum+"个地方</p>")}
setTimeout(function(){$mddContainer.find(".search-container div").css("border","1px solid #76b5f4").find("p").remove();},2000)}}
function formatData(data){var result=[];for(var i=0;i<data.length;i++){var newData={};newData[opts.simpleData.id]=data[i]["BH"];newData[opts.simpleData.name]=data[i]["MC"];$.extend(true,newData,data[i]);result.push(newData);}
return result;}
function addSpan(data){var $input=$mddContainer.find(".search-container .searchTxt");var $span=$("<span id='"+(data[opts.simpleData.id])+"' class='choosedCity'>"+(data[opts.simpleData.name])+";<input class='focusInput'/></span>");$span.data("data",data);$span.insertBefore($input);$input.val("").focus();}
function itemClickHandler(){try{var data=$(this).data("data");var id=data[opts.simpleData.id];if(!$mddContainer.find(".search-container").find("#"+id).length){warnMaxNum();if($mddContainer.find(".search-container").find("span").length<opts.maxNum){addSpan(data);}}
$mddContainer.find(".em-none").hide();}catch(e){throw new Error("数据格式错误"+e);}}
function sureHandler(){var result=[];$mddContainer.find(".choosedCity").each(function(){var tempData=$(this).data("data");result.push(tempData);});if(opts.callback)opts.callback(result);destroy();}
function setFocus(){$mddContainer.find(".em-none").hide();$(this).find("input").focus();}
function choosedCityClickHandler(){$(this).parent().find("span").removeClass("active").end().end().addClass("active");$(this).find("input").focus();return false;}
function choosedCityKeyHandler(ev){if(ev.keyCode===8){$(this).parent().remove();$mddContainer.find(".searchTxt").focus();warnMaxNum();}}
function destroy(){if($mddContainer){$mddContainer.off(".mddComponent");$(document).off(".mddComponent");$mddContainer.remove();$mddContainer=null;opts={};}}})(jQuery,window,document);;(function($,window,document){window.$$vetechGlobalParams=window.$$vetechGlobalParams||{};window.$$vetechGlobalParams["menu"]=window.$$vetechGlobalParams["menu"]||[];$.fn.createMenu=function(nodes,cbFn,options){if(this.length===0)throw new Error("DOM绑定错误");this.each(function(i,item){if(options&&options.triggerType==="click"){$(item).on("click",function(ev){var menu=new VMenu(this,nodes,cbFn,options);menu.show();VMenu.stopEvent(ev);});}else{var menu=null;$(item).on("mouseenter",function(){menu=new VMenu(this,nodes,cbFn,options);menu.show();}).on("mouseleave",function(){window.clearTimeout(menu.timer);if(menu.isShow){menu.timer=window.setTimeout(function(){menu.hide();},100);}});$(item).on("click",function(ev){VMenu.stopEvent(ev);});}});};$.fn.createMenu.options={width:100,model:1,type:"1",typeValue:""};function VMenu(elem,nodes,cbFn,options){for(var i=0;i<window.$$vetechGlobalParams.menu.length;i++){window.$$vetechGlobalParams.menu[i].hide();}
this.id="vetech-menu"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.createMenu.options,options);this.cbFn=cbFn;if(!(this.cbFn&&Object.prototype.toString.call(cbFn)==="[object Function]"))this.cbFn=null;this.data=nodes;this.$menus=[];this.iNow=-1;this.timer=null;window.$$vetechGlobalParams.menu.push(this);this.init();}
VMenu.prototype.init=function(){this.$container=$("<div class='vetech-menu-container'></div>");var $ul=$("<ul></ul>");this.$container.append($ul);for(var i=0;i<this.data.length;i++){var $li=$("<li class='menu-item'></li>");this.addExtendProps($li,this.data[i]);this.$menus.push($li);if(this.data[i].icon){var $img=$("<img src='"+this.data[i].icon+"'/>");$li.append($img);}
var $span=$("<span>"+(this.data[i].text||"")+"</span>");$li.append($span);if(i===this.data.length-1)$li.css("border-bottom","none");if(this.data[i].gnbh){if(!$.qx2(this.data[i].gnbh)){this.setItemHide($li);}}
if(this.opts&&this.opts["beforeInit"]){var result=this.opts["beforeInit"](this.$elem,$li,this.opts.model,this.data[i]);if(false===result){if(this.opts.model===1){this.setItemHide($li);}else if(this.opts.model===2){this.setDisabled($li);}}}
$ul.append($li);}
if(this.data.length&&this.$container.find("li").length){var allHiddened=true;this.$container.find("li").each(function(){if($(this).css("display")!=="none"){allHiddened=false;return false;}});if(allHiddened)return;$(document.body).append(this.$container);if(this.opts&&this.opts["afterInit"]){this.opts["afterInit"]($ul.find("li"));}
this.bindEvent();}};VMenu.prototype.addExtendProps=function($li,node){for(var key in node){if(node.hasOwnProperty(key)&&key!=="text"&&key!=="icon"){$li.attr(key,node[key]);}}};VMenu.prototype.setDisabled=function($li){$li.css({"background":"#FCFCFC","color":"#ddd","cursor":"not-allowed"});$li.find("span").css("cursor","not-allowed");$li.attr("isDisabled",true);};VMenu.prototype.setItemHide=function($li){$li.hide();};VMenu.prototype.bindEvent=function(){_this=this;this.$container.on("mousedown",function(event){event=event||window.event;VMenu.stopEvent(event);if(event.button===2)return false;});this.$container.on("contextmenu",function(event){event=event||window.event;if(document.all)window.event.returnValue=false;event.preventDefault();});for(var i=0;i<this.$menus.length;i++){this.$menus[i].on("click",deepBind(this,_this.menuItemClickHandler,this.$menus[i],i));this.$menus[i].on("mouseenter",deepBind(this,this.mouseOverHandler,this.$menus[i],i));}
this.$container.on("click",deepBind(this,VMenu.stopEvent));this.$container.on("mouseleave",function(){_this.hide();}).on("mouseenter",function(){window.clearTimeout(_this.timer);});};VMenu.prototype.show=function(){if(this.isShow)return;this.setPos();this.$container.css("visibility","visible");this.isShow=true;};VMenu.prototype.hide=function(){if(!this.isShow)return;this.$container.remove();this.isShow=false;};VMenu.prototype.setPos=function(){var pointer=this.$elem.offset();var iWidth=$(document).width();var iHeight=$(document).height();if(iWidth-pointer.left-this.elem.offsetWidth<this.$container[0].offsetWidth){this.$container.css("left",pointer.left-this.$container[0].offsetWidth);}else{this.$container.css("left",pointer.left+this.elem.offsetWidth);}
if((pointer.top+this.elem.offsetHeight/2<iHeight/2)||(iHeight-pointer.top-this.elem.offsetHeight>this.$container[0].offsetHeight)){this.$container.css("top",pointer.top);if(iHeight-pointer.top<this.$container[0].offsetHeight){this.$container.css({"height":iHeight-pointer.top-10,"overflow":"auto"});}}else{var iBottom=pointer.top+this.elem.offsetHeight-this.$container.get(0).offsetHeight;if(iBottom<0)iBottom=0;this.$container.css("top",iBottom);if(pointer.top+this.elem.offsetHeight<this.$container[0].offsetHeight){this.$container.css({"height":pointer.top+this.elem.offsetHeight-10,"overflow":"auto"});}}};VMenu.prototype.mouseOverHandler=function(event,$li,index){if($li.attr("isdisabled")=="true")return;if(this.iNow!=-1){this.$menus[this.iNow].css("background","#fff");}
$li.css("background","#DDDDDD");this.iNow=index;this.show();};VMenu.prototype.menuItemClickHandler=function(event,$li,index){VMenu.stopEvent(event);if($li.attr("isDisabled"))return;this.hide();this.cbFn&&this.cbFn(this.$elem,this.data[index]);};VMenu.stopEvent=function(event){event=event||window.event;if(event.stopPropagation)event.stopPropagation();else event.cancelBubble=true;};function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}})(jQuery,window,document);;(function($,window,document){$.fn.multselect=function(options,cbFn){var trigger=options.trigger||"click";if(this.length==0)throw new Error("DOM绑定错误");var oInput=this.get(0);manager.clear(oInput);var multselect=new Multselect(oInput,options,cbFn);if(!options.freeBinding){$(oInput).on(trigger,multselect,inputClickHandler);manager.addEvent(multselect.id,trigger,inputClickHandler);if(!options.editable){$(oInput).on("keydown",function(){return false;});}}
return multselect;};function inputClickHandler(e){var se=e.data;if(se.isShow){se.hide();}else{se.show();}}
$.fn.multselect.options={width:160,height:200,type:"3",simpleData:{"id":"id","name":"name","title":null},typeValue:"/component/data/multselect.data.js",hiddenName:"",splitStr:",",hasAllChecked:false,showArrow:false,showArea:null,usetype:"mult",editable:false,freeBinding:false,beforeRender:function(){},fn1:null,chekOneData:false,};function Multselect(elem,options,cbFn){this.id="Multselect-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.multselect.options,options);this.data=[];this.dataBuffer=[];this.isShow=false;this.cbFn=cbFn;if(!(this.cbFn&&$.type(this.cbFn)==="function")){this.cbFn=$.noop;}
this.iNow=0;if(this.opts.showArea){this.$showArea=$(this.opts.showArea);if(!this.$showArea)throw new Error("显示区域选择器配置错误，请确认！");if(!this.$showArea.hasClass("vetech-show-area")){var $ul=$('<ul class="clearfix"></ul>');this.$showArea.append($ul);this.$showArea.addClass("vetech-show-area");}}
if(!(this.opts.fn1&&Object.prototype.toString.call(this.opts.fn1)==="[object Function]"))this.opts.fn1=null;if(!this.opts.hiddenName)this.opts.hiddenName=this.elem.id+"- hiddenInput";this.$hiddenInput=$(document.body).find("#"+this.opts.hiddenName);if(this.opts.showArrow)this.addArrow();manager.manage(this);this.$container=$('<div class="mult-select"></div>');this.loadData();}
Multselect.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.opts.beforeRender.call(_this);this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.opts.beforeRender.call(_this);_this.render();}});}};Multselect.prototype.render=function(){if(this.opts.chekOneData){if(Object.prototype.toString.call(this.cbFn)==="[object Function]"){this.cbFn(this.data[0])
this.$elem.val(this.data[0][this.opts.simpleData.name]);if(this.opts.hiddenName)$("#"+this.opts.hiddenName).val(this.data[0][this.opts.simpleData.id]);}}
if(this.data&&this.data.length==0)return;this.$container.css({"padding":0,"margin":0,"border":"1px solid #ccc","font-size":"12px","font-family":"arial","position":"absolute","background":"#fff","z-index":1000,"max-height":this.opts.height+"px","overflow-y":"auto","overflow-x":"hidden"});this.$container.css({"width":this.opts.width,"left":0,"top":0,"visibility":"hidden","min-width":this.elem.offsetWidth-2});if(this.opts.usetype==="mult"&&this.opts.hasAllChecked){this.$AllCheckedLabel=$("<label title='全选' class='all-check'>全选</label>");this.$AllCheckedLabel.css({"text-indent":"20px","width":this.opts.width,"min-width":this.elem.offsetWidth-2});var $checkbox=$('<input type="checkbox" />');this.$AllCheckedLabel.append($checkbox);this.$container.append(this.$AllCheckedLabel);}else if(this.opts.usetype==="radio"&&this.opts.defaultValues){var value=this.opts.defaultValues[this.opts.simpleData.name]||"";var key=this.opts.defaultValues[this.opts.simpleData.id]||"";var titleVal=this.opts.simpleData.title?(this.opts.defaultValues[this.opts.simpleData.title]||""):value;var $firstLabel=$("<label title='"+titleVal+"' class='first-item'>"+value+"</label>");this.$container.append($firstLabel);this.dataBuffer.push({"data":this.opts.defaultValues,"$node":$firstLabel});}
for(var i=0;i<this.data.length;i++){var value=this.opts.fn1?this.opts.fn1(this.data[i]):this.data[i][this.opts.simpleData.name];var titleVal=this.opts.simpleData.title?(this.data[i][this.opts.simpleData.title]||""):value;var $label=$("<label title='"+titleVal+"'>"+value+"</label>");if(this.opts.usetype==="mult"){$label.css({"text-indent":"20px","width":this.opts.width,"min-width":this.elem.offsetWidth-2});var $checkbox=$('<input type="checkbox" value="'+(this.data[i].id||this.data[i][this.opts.simpleData.id])+'" />');$label.append($checkbox);}else{$label.css({"text-indent":"5px","width":this.opts.width,"min-width":this.elem.offsetWidth-2});}
this.dataBuffer.push({"data":this.data[i],"$node":$label});this.$container.append($label);}
$(document.body).append(this.$container);this.bindEvent();this.writeValue();if(this.opts.freeBinding){this.show();}};Multselect.prototype.show=function(){this.isShow=true;this.setPos();this.$container.css("visibility","visible");};Multselect.prototype.addArrow=function(){this.$elem.attr("readonly","readonly");var pointer=this.$elem.offset();this.$arrow=$('<img src="'+imgUrl+'"/>');var iWidth=this.elem.offsetHeight<16?this.elem.offsetHeight:16;this.$arrow.css({left:pointer.left+this.elem.offsetWidth-iWidth-5,top:pointer.top+(this.elem.offsetHeight-iWidth)/2,width:iWidth,position:"absolute"});$(document.body).append(this.$arrow);};Multselect.prototype.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+this.elem.offsetHeight});};Multselect.prototype.hide=function(){if(!this.isShow)return;this.isShow=false;this.$container.css({"visibility":"hidden","left":0,"top":0});this.$elem.blur();};Multselect.prototype.destroy=function(){this.$container.remove();if(this.$showArea)this.$showArea.html("");};Multselect.prototype.bindEvent=function(){var _this=this;for(var i=0,len=this.dataBuffer.length;i<len;i++){var dataItem=this.dataBuffer[i];dataItem["$node"].on("mouseenter",deepBind(this,this.itemHoverHandler,dataItem["$node"],i));dataItem["$node"].find("input").on("change",deepBind(this,this.setValue,dataItem["$node"].find("input")));dataItem["$node"].on("click",deepBind(this,this.itemClickHandler,dataItem));}
$(document).on("click",function(ev){if(ev.target!==_this.elem)_this.hide();});if(this.$showArea)this.$showArea.on("click",".close-btn",function(ev){_this.stopEvent(ev);for(var i=0,len=_this.dataBuffer.length;i<len;i++){var item=_this.dataBuffer[i];if(item.data===$(this).parent().data("data")){item.$node.find("input").get(0).checked=false;_this.setValue(ev);}}});if(this.opts.trigger==="mouseenter"){this.$container.on("mouseleave",deepBind(this,this.hide)).on("mouseenter",deepBind(this,this.show));this.$elem.on("mouseleave",deepBind(this,this.hide));this.$arrow&&this.$arrow.on("mouseenter",deepBind(this,this.show));}
if(this.$AllCheckedLabel){this.$AllCheckedLabel.find("input").on("change",function(ev){_this.stopEvent(ev);for(var i=0,len=_this.dataBuffer.length;i<len;i++){var dataItem=_this.dataBuffer[i];dataItem["$node"].find("input").get(0).checked=this.checked;}
_this.setValue(ev);});this.$AllCheckedLabel.on("click",deepBind(this,this.stopEvent));}
if(this.opts.editable){this.$elem.on("keyup",function(){if(_this.checkedData&&_this.checkedData.values&&_this.$elem.val()===_this.checkedData.values.join(_this.opts.splitStr))return;_this.$hiddenInput.val("");});}};Multselect.prototype.itemHoverHandler=function(event,$label,index){this.dataBuffer[this.iNow]["$node"].css({"background":"#fff","color":"#000"});$label.addClass("active").siblings().removeClass("active");this.iNow=index;};Multselect.prototype.itemClickHandler=function(event,dataItem){if(this.opts.usetype==="radio"){this.$elem.val(dataItem.data[this.opts.simpleData["name"]]);this.$hiddenInput.val(dataItem.data[this.opts.simpleData["id"]]);if(this.cbFn)this.cbFn(dataItem.data);this.hide();}
this.stopEvent(event);};Multselect.prototype.setValue=function(ev,$obj){this.checkedData={"keys":[],"values":[],"datas":[]};for(var i=0,len=this.dataBuffer.length;i<len;i++){var dataItem=this.dataBuffer[i];var isExist=this.findNodeByData(dataItem.data);if(dataItem["$node"].find("input").get(0).checked){this.checkedData.keys.push(dataItem.data[this.opts.simpleData.id]);this.checkedData.values.push(dataItem.data[this.opts.simpleData.name]);this.checkedData.datas.push(dataItem.data);if(!isExist)this.operateSelectedNode("add",dataItem.data);}else{if(isExist)this.operateSelectedNode("remove",dataItem.data);}}
!this.opts.showArrow&&this.$elem.val(this.checkedData.values.join(this.opts.splitStr));this.$hiddenInput.val(this.checkedData.keys.join(this.opts.splitStr));if(this.cbFn)this.cbFn(this.checkedData.datas,this.dataBuffer,$obj);ev&&this.stopEvent(ev);};Multselect.prototype.findNodeByData=function(data){if(!this.$showArea)return;var $lis=this.$showArea.find("li");for(var i=0,len=$lis.length;i<len;i++){if($lis.eq(i).data("data")===data)return true;}
return false;};Multselect.prototype.operateSelectedNode=function(opState,data){if(!this.$showArea)return;if(opState==="add"){var $li=$("<li>"+data.name+"<span class='close-btn'></span></li>");$li.data("data",data);this.$showArea.find("ul").append($li);}else{this.$showArea.find("li").each(function(){if(data===$(this).data("data"))$(this).remove();});}
this.setPos();}
Multselect.prototype.writeValue=function(){if(this.opts.usetype==="mult"){var keys=this.$hiddenInput.val();if(keys)keys=keys.split(this.opts.splitStr);if(keys&&keys.length>0){for(var i=0,len=this.dataBuffer.length;i<len;i++){var dataItem=this.dataBuffer[i];if(keys._contains(dataItem.data[this.opts.simpleData.id])){dataItem["$node"].find("input").get(0).checked=true;}}
this.setValue();}}else if(this.opts.usetype==="radio"){var keys=this.$hiddenInput.val();for(var i=0,len=this.dataBuffer.length;i<len;i++){var dataItem=this.dataBuffer[i];if(dataItem.data[this.opts.simpleData.id]===keys){this.$elem.val(dataItem.data[this.opts.simpleData.name]);this.cbFn(dataItem.data);}}}else{throw new Error("参数配置错误:usetype取值范围mult/raido");}};Multselect.prototype.stopEvent=function(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation(ev);else ev.cancelBubble=true;};function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}
Array.prototype._contains=function(value){for(var i=0;i<this.length;i++){if(this[i]===value)return true;}
return false;};var imgUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAyElEQVQ4T6WSYQ3CMBCF360CwMJyFYADJgEJTAFBAg5wsEkZDhBwSS2AgZZ0oaSUbilp//bed+/eHaHyUaUe9QBjzNZae2Lmyz9uROSglJpIRCYi2gMYmbkvgYjIkYgG59yNjDE7a+0EYFMCCWIAz6ZpujmDBHJm5mvOSSpu2/b+CTGGOOd6rfUYQ3Ji//+1hSXIkvgHkI7jncxFREOY2duOnWXvIMnE18+BpeKsg0CPIFgSrwLe43QAHrnOoVH9KZdc3lpNtYMXLeh23zYi4+AAAAAASUVORK5CYII=";})(jQuery,window,document);;(function($,window,document){$.fn.timeList=function(options,cbfn){if(this.length<0)throw new Error("DOM绑定错误，请确认页面是否加载完毕");var oInput=this.get(0);manager.clear(oInput);var tl,value
if(options.inputId){value=$("#"+options.inputId).val();var date=new Date();var mon=date.getMonth()+1;var day=date.getDate();var nowDay=date.getFullYear()+"-"+(mon<10?"0"+mon:mon)+"-"+(day<10?"0"+day:day);options.compareDate=options.compareDate?options.compareDate:nowDay;var time=TimeList.getTime();var nowTime=time.h+$.fn.timeList.options.setsymbol+time.m;if(value>options.compareDate){options.startTime='00:00';}else if(value<options.compareDate){$(oInput).val("");options.startTime='00:00';options.endTime='00:00';}else{$(oInput).val("");options.startTime=nowTime;}}
if(options.startTime||options.endTime){options.autoSetOver=true;}
tl=new TimeList(oInput,options,cbfn);$(this).on('click',openTime)
manager.addEvent(tl.id,'click',openTime);function openTime(){if(tl.isShow){tl.hide();tl.isShow=false;}else{if(tl.opts.inputId){value=$("#"+tl.opts.inputId).val();if(value>tl.opts.compareDate){tl.opts.startTime="00:00";tl.opts.endTime="24:00";tl=new TimeList(tl.elem,tl.opts,cbfn);}else if(value<tl.opts.compareDate){tl.$elem.val("");tl.opts.startTime="00:00";tl.opts.endTime="00:00";tl=new TimeList(tl.elem,tl.opts,cbfn);}else{tl.$elem.val("");tl.opts.startTime=nowTime;tl.opts.endTime="24:00";tl=new TimeList(tl.elem,tl.opts,cbfn);}}
tl.show();tl.isShow=true;}}};$.fn.timeList.options={autoSetOver:true,setsymbol:":",compareValue:"",endValue:""};function TimeList(elem,options,callbackfn){this.id="vetech-spdh-"+String(Math.random()).replace(/\D/g,"");this.elem=elem;this.$elem=$(elem);var time=TimeList.getTime();var nowTime=time.h+$.fn.timeList.options.setsymbol+time.m;var opt=$.extend(true,{},options);$.fn.timeList.options.compareValue=opt.compareValue?opt.compareValue:nowTime;if(!opt.startTime&&!opt.endTime){opt.startTime='00:00';opt.endTime='24:00';if(opt.autoSetOver){if(opt.compareValue<nowTime)opt.compareValue=nowTime;}}else if(opt.startTime&&!opt.endTime){if(opt.startTime>$.fn.timeList.options.compareValue)opt.compareValue=opt.startTime;opt.endTime='24:00';}else if(!opt.startTime&&opt.endTime){if($.fn.timeList.options.compareValue>opt.endTime)opt.compareValue='00:00';opt.startTime='00:00'}else{if(opt.startTime>opt.endTime){opt.startTime='00:00',opt.endTime='24:00'}
if($.fn.timeList.options.compareValue<opt.startTime||$.fn.timeList.options.compareValue>opt.endTime)opt.compareValue=opt.startTime;}
this.callback=callbackfn||$.noop;this.opts=$.extend(true,{},$.fn.timeList.options,opt);this.isShow=false;this.hoursData1=["00","01","02","03","04","05","06","07","08","09","10","11"];this.hoursData2=["12","13","14","15","16","17","18","19","20","21","22","23"];this.minutesData=["00","10","20","30","40","50"];this.hh=null;this.mm=null;this.totimehh=null;this.totimemm=null;this.comparehh=this.opts.autoSetOver?this.opts.compareValue.split(this.opts.setsymbol)[0]:null;this.comparemm=this.opts.autoSetOver?this.opts.compareValue.split(this.opts.setsymbol)[1]:null;this.starthh=this.opts.startTime?this.opts.startTime.split(this.opts.setsymbol)[0]:null;this.startmm=this.opts.startTime?this.opts.startTime.split(this.opts.setsymbol)[1]:null;this.endhh=this.opts.endTime?this.opts.endTime.split(this.opts.setsymbol)[0]:null;this.endmm=this.opts.endTime?this.opts.endTime.split(this.opts.setsymbol)[1]:null;manager.manage(this);this.init();}
TimeList.prototype.init=function(){this.$container=$('<div class="vet-newver-container"></div>');$(document.body).append(this.$container);this.renderData();this.compareHours();this.bindEvent();};TimeList.prototype.stopEvent=function(ev){var event=ev||window.event;if(event.stopPropagation)event.stopPropagation();else event.cancelBubble=true;};TimeList.prototype.renderData=function(){this.$container.html("");this.$newvercaltime1=$('<div class="newver-cal-time"></div>');this.$newvercaltime2=$('<div style="clear: both"></div>'+'<div class="newver-cal-time" style="margin-top:0px;">'+'<div class="setting-time">'+'<span style="color:#4b9df4">时间：</span>'+'<input type="num" value="" maxlength="2">:<input type="num" value="" maxlength="2">'+'</div>'+'<div class="btn-control">'+'<button class="bcButton" id="dpClearInput">清空</button>'+'<button class="bcButton" id="dpTodayInput">现在</button>'+'<button class="bcButton" id="dpOkInput">确定</button>'+'</div></div>');this.$conhours=$('<div class="nct-hours"><div class="title">小时</div></div>');this.$conminutes=$('<div class="nct-minute"><div class="title">分钟</div></div>');this.$conhoursgroup1=$('<div class="hours-group"><div class="hg-o">AM</div></div>');this.$conhoursgroup2=$('<div class="hours-group"><div class="hg-o">PM</div></div>');this.$newvercaltime1.append(this.$conhours.append(renderUlNav(this.hoursData1,this.$conhoursgroup1)));this.$newvercaltime1.append(this.$conhours.append(renderUlNav(this.hoursData2,this.$conhoursgroup2)));this.$newvercaltime1.append(renderUlNav(this.minutesData,this.$conminutes));this.$container.append(this.$newvercaltime1);this.$container.append(this.$newvercaltime2);this.writeValue();function renderUlNav(hd,hg){var $ul=$('<ul class="hg-box"></ul>');for(var i=0,len=hd.length;i<len;i++){var iterm=hd[i];var $li=$('<li class="normal">'+iterm+'</li>');$li.data("liData",iterm);$li.appendTo($ul);}
hg.append($ul);return hg;}};TimeList.prototype.writeValue=function(){var _this=this;var hh,mm;var elemVal=this.$elem.val();if(elemVal){if(elemVal<this.opts.startTime||elemVal>this.opts.endTime){elemVal=this.opts.startTime;this.$elem.val(elemVal);}
if(elemVal.indexOf(_this.opts.setsymbol)>-1){hh=elemVal.split(_this.opts.setsymbol)[0];mm=elemVal.split(_this.opts.setsymbol)[1];var allhhArray=this.hoursData1.concat(this.hoursData2);var hhIndex=showCurrent(allhhArray,hh);var mmIndex=showCurrent(this.minutesData,mm);if(mmIndex||mmIndex===0){this.hh=hh;this.mm=mm;if(this.opts.autoSetOver){this.compareMinute(this.hh);}
if(hhIndex<12){_this.$container.find(".nct-hours .hours-group:eq(0) li").eq(hhIndex).addClass("current");}else{_this.$container.find(".nct-hours .hours-group:eq(1) li").eq(hhIndex-12).addClass("current");}
_this.$container.find(".nct-minute li").eq(mmIndex).addClass("current");}}}else{if(this.opts.autoSetOver){hh=this.comparehh;mm=this.comparemm;}else{this.setToDayTime();hh=this.totimehh;mm=this.totimemm;}}
_this.$container.find(".setting-time input[type='num']:eq(0)").val(hh);_this.$container.find(".setting-time input[type='num']:eq(1)").val(mm);function showCurrent(num,value){var ll=num.length;for(var i=0;i<ll;i++){if(num[i]==value){return i;}}}};TimeList.prototype.compareHours=function(){var h=this.starthh,eh=this.endhh,eh=this.endhh,em=this.endmm;if(this.opts.autoSetOver){if(parseInt(this.startmm)>50){h=parseInt(this.starthh)+1;}else{h=parseInt(this.starthh);}
if(parseInt(em)>50){eh=parseInt(eh)+1;}else{eh=parseInt(eh);}
var len=h,index=0;if(h>11){this.$container.find(".nct-hours .hours-group:eq(0) li").addClass("over").removeClass("normal");len=h-12;index=1;}
for(var i=0;i<len;i++){this.$container.find(".nct-hours .hours-group:eq("+index+") li").eq(i).addClass("over").removeClass("normal");}
var list=parseInt(eh)-11,p=1;if(eh<12){this.$container.find(".nct-hours .hours-group:eq(1) li").addClass("over").removeClass("normal");p=0;list=parseInt(eh);}
for(var k=list;k<13;k++){this.$container.find(".nct-hours .hours-group:eq("+p+") li").eq(k).addClass("over").removeClass("normal");}}else{this.$container.find(".nct-hours .hours-group:eq(0) li").removeClass("over").addClass("normal");}};TimeList.prototype.compareMinute=function(hours){if(!this.startmm&&!this.starthh)return;var lastNum=parseInt(this.startmm.substr(-2,1));var endNum=parseInt(this.endmm.substr(-2,1))
if(hours==this.starthh){if(parseInt(this.startmm.substr(-1,1))>0){lastNum=lastNum+1;}
for(var i=0;i<lastNum;i++){this.$container.find(".nct-minute li").eq(i).addClass("over").removeClass("normal");}
if(this.$container.find(".nct-minute li.over").hasClass("current")){this.$container.find(".nct-minute li.current").removeClass("current");this.mm=null;}}else{this.$container.find(".nct-minute li").removeClass("over").addClass("normal");}
if(hours==this.endhh){if(parseInt(this.endmm.substr(-1,1))>0){endNum=endNum-1;}
for(var i=endNum;i<7;i++){this.$container.find(".nct-minute li").eq(i).addClass("over").removeClass("normal");}
if(this.$container.find(".nct-minute li.over").hasClass("current")){this.$container.find(".nct-minute li.current").removeClass("current");this.mm=null;}}};TimeList.prototype.setToDayTime=function(){var time=TimeList.getTime();this.totimehh=time.h;this.totimemm=time.m;};TimeList.prototype.clearAll=function(){this.$container.find("li").removeClass("current");this.hh=null;this.mm=null;this.$elem.val("");};TimeList.prototype.bindEvent=function(){var _this=this;$(document).on("mousedown",function(ev){if(_this.elem==ev.target)return;_this.hide();});this.$newvercaltime2.find("#dpClearInput").on("click",function(){_this.clearAll();_this.writeValue();_this.hide();});this.$newvercaltime2.find("#dpTodayInput").on("click",function(){_this.clearAll();if(_this.opts.autoSetOver){_this.setValue(_this.comparehh,_this.comparemm);}else{_this.setToDayTime();_this.setValue(_this.totimehh,_this.totimemm);}});var inputObj=this.$container.find(".setting-time input[type='num']");this.$newvercaltime2.find("#dpOkInput").on("click",function(e){if(e&&e.stopPropagation){e.stopPropagation();}else{window.event.cancelBubble=true;}
if(_this.opts.autoSetOver&&_this.opts.startTime&&_this.opts.endTime){if(parseInt(inputObj.eq(0).val())<parseInt(_this.starthh)||parseInt(inputObj.eq(0).val())>parseInt(_this.endhh)){inputObj.each(function(){$(this).addClass("input-warning");});return;}
if(parseInt(inputObj.eq(0).val())==parseInt(_this.starthh)||parseInt(inputObj.eq(0).val())==parseInt(_this.endhh)){if(parseInt(inputObj.eq(1).val())<parseInt(_this.startmm)||parseInt(inputObj.eq(1).val())>parseInt(_this.endmm)){inputObj.eq(1).addClass("input-warning");return;}}}
if(inputObj.eq(0).val().match(/^((0[0-9])|(1\d)|(2[0-3]))$/)&&inputObj.eq(1).val().match(/^[0-5]\d{1}$/)&&(!_this.hh&&!_this.mm)){_this.setValue(inputObj.eq(0).val(),inputObj.eq(1).val());}else if(!(inputObj.eq(0).val().match(/^((0[0-9])|(1\d)|(2[0-3]))$/))){inputObj.eq(0).addClass("input-warning");}else if(!(inputObj.eq(1).val().match(/^[0-5]\d{1}$/))){inputObj.eq(1).addClass("input-warning");}else{_this.setValue(inputObj.eq(0).val(),inputObj.eq(1).val());}});inputObj.on("focus",function(){if($(this).val())$(this).select();inputObj.each(function(){$(this).removeClass("input-warning");});_this.clearAll();});this.$container.on("mousedown",function(ev){ev.stopPropagation();});this.$container.on("mousedown",".hg-box li:not(.over)",function(){_this.listClick.call(_this,$(this));});};TimeList.prototype.listClick=function($li){var className="";if($li.parent().parent().hasClass("nct-minute")){className="nct-minute";this.mm=$li.html();}else{className="hours-group";this.hh=$li.html();if(this.opts.autoSetOver){this.compareMinute(this.hh);}}
this.$container.find("."+className).find("li").removeClass("current");$li.addClass("current");this.setValue(this.hh,this.mm);};TimeList.prototype.setValue=function(hh,mm){if(hh&&mm){var data=this.$elem.val(hh+this.opts.setsymbol+mm);this.writeValue();this.hide();this.callback(data);}};TimeList.prototype.show=function(){if(this.isShow)return;this.setPos();this.$container.css("visibility","visible");this.isShow=true;};TimeList.prototype.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iTop=pointer.top+this.$elem.outerHeight(),cwidth=this.$container.find(".newver-cal-time").outerWidth;iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop,"width":cwidth});return this;};TimeList.prototype.destroy=function(){if(this.$container){this.$container.remove();}};TimeList.prototype.hide=function(){if(!this.isShow)return;this.$container.css({"visibility":"hidden"});this.isShow=false;};TimeList.getTime=function(date){var date=date||new Date();var h=date.getHours(),m=date.getMinutes();return{"h":h<10?"0"+h:h,"m":m<10?"0"+m:m};};})(jQuery,window,document);;(function($,window,document){$.fn.addOffice=function(options,cbFn){if(this.length==0)throw new Error("错误的绑定，页面没有该元素");var office=new Office(this.get(0),options,cbFn);return office;};$.fn.addOffice.options={type:3,typeValue:null,fn1:null,splitStr:",",clsName:"",name:null,defaultChecked:[],extendHtml:"",itemWidth:null};function Office(elem,options,cbFn){this.id="vetech-office-"+new String(Math.random()).substring("2");this.opts=$.extend({},$.fn.addOffice.options,options);this.cbFn=cbFn;this.elem=elem;this.$elem=$(elem);if(!this.opts.name)throw new Error("请配置checkbox的name属性");this.checkedData={};if(!(this.opts.fn1&&Object.prototype.toString.call(this.opts.fn1)==="[object Function]"))this.opts.fn1=null;this.data=[];this.dataBuffer=[];manager.manage(this);this.init();}
Office.prototype.init=function(){this.$container=$('<div class="vetech-office-container"></div>');this.$container.css({"width":"100%"});this.loadData();};Office.prototype.loadData=function(){var loadType=this.opts.type,typeValue=this.opts.typeValue;var _this=this;if("1"==loadType){this.data=this.opts.typeValue;_this.renderData();}else{var url="2"==loadType?_this.opts.typeValue:"/component/data/space.data.js";$.ajax({type:"get",url:url,dataType:"json",success:function(data){_this.data=data;_this.renderData();}});}};Office.prototype.renderData=function(){if(!(this.data&&Object.prototype.toString.call(this.data)==="[object Array]"))throw new TypeError("数据格式错误");for(var i=0,len=this.data.length;i<=len;i++){var item=i===len?{"name":"全选"}:this.data[i];var $label=$('<label></label>');$label.css({"display":"inline-block","height":"20px","line-height":"20px","margin":"0 10px 0 0","padding":"0","font-size":"12px","font-weight":"normal"});if(this.opts.itemWidth&&i!==len)$label.css("width",this.opts.itemWidth);var $input=$('<input name="'+this.opts.name+'" type="checkbox" class="'+this.opts.clsName+'" value="'+item.id+'"><sapn>'+((this.opts.fn1&&i!==len)?this.opts.fn1(item):item.name)+'</sapn></input>');$input.css({"vertical-align":"middle","outline":"none","margin":"0 2px 0 0"});$label.append($input);if(i===len){$label.css({"font-weight":"bold"});this.$checkedAll=$input;this.$checkedAll.removeClass(this.opts.clsName);this.$checkedAll.removeAttr("name");if(this.opts.defaultChecked&&this.opts.defaultChecked.length>0&&this.opts.defaultChecked[0]==="---")
setCheckboxState(this.$checkedAll.get(0),true);}else{this.dataBuffer.push({"data":item,"elem":$label});}
this.$container.append($label);}
if(this.opts.extendHtml){this.$container.append($(this.opts.extendHtml));}
this.$elem.append(this.$container);this.bindEvent();this.writeValue();}
Office.prototype.bindEvent=function(){var _this=this;for(var i=0,len=this.dataBuffer.length;i<len;i++){var item=this.dataBuffer[i];(function(item){item.elem.find("input").on("change",function(){_this.checkedOneItem(this,item.data);});})(item);}
this.$checkedAll.on("change",function(){_this.checkedAll(this);});};Office.prototype.checkedOneItem=function(checkbox,data){if(checkbox.checked){this.checkedData[data.id]=data;if(this.getCheckedNum()==this.dataBuffer.length)
setCheckboxState(this.$checkedAll.get(0),true);}else{delete this.checkedData[data.id];setCheckboxState(this.$checkedAll.get(0),false);}
this.setValue();};Office.prototype.getCheckedNum=function(){var count=0;for(var key in this.checkedData){if(this.checkedData.hasOwnProperty(key))count++;}
return count++;}
Office.prototype.checkedAll=function(checkbox){this.checkedData={};for(var i=0,len=this.dataBuffer.length;i<len;i++){var item=this.dataBuffer[i];checkbox.checked&&setCheckboxState(item.elem.find("input").get(0),true);!checkbox.checked&&setCheckboxState(item.elem.find("input").get(0),false);this.checkedData[item.data.id]=item.data;}
if(!checkbox.checked)this.checkedData={};this.setValue();};Office.prototype.setValue=function(){if(this.cbFn&&Object.prototype.toString.call(this.cbFn)==="[object Function]"){this.cbFn(this.checkedData,this.$checkedAll.get(0).checked);}}
Office.prototype.writeValue=function(){if(this.opts.defaultChecked&&this.opts.defaultChecked.length>=0){var iCheckedAll=false;if(this.opts.defaultChecked[0]==="---")iCheckedAll=true;for(var i=0,len=this.dataBuffer.length;i<len;i++){var item=this.dataBuffer[i];if(iCheckedAll||this.opts.defaultChecked._contains(item.data.id)){setCheckboxState(item.elem.find("input").get(0),true);this.checkedData[item.data.id]=item.data;}}
this.setValue();}}
Office.prototype.selectedItemByValue=function(values){if(!values)return this;if(values==="---"){this._setAllCheckboxs(true);return this;}
if(typeof values==="string")values=values.split(",");for(var i=0,len=this.dataBuffer.length;i<len;i++){var item=this.dataBuffer[i];var $checkbox=item.elem.find("input");if(values._contains($checkbox.val())){setCheckboxState($checkbox.get(0),true);this.checkedOneItem($checkbox.get(0),item.data);}}
return this;};Office.prototype.clearCheckedItems=function(values){if(!values)return this;if(values==="---"){this._setAllCheckboxs(false);return this;}
if(typeof values==="string")values=values.split(",");for(var i=0,len=this.dataBuffer.length;i<len;i++){var item=this.dataBuffer[i];var $checkbox=item.elem.find("input");if(values._contains($checkbox.val())){setCheckboxState($checkbox.get(0),false);this.checkedOneItem($checkbox.get(0),item.data);}}};Office.prototype._setAllCheckboxs=function(state){for(var i=0,len=this.dataBuffer.length;i<len;i++){var item=this.dataBuffer[i];var $checkbox=item.elem.find("input");setCheckboxState($checkbox.get(0),state);this.checkedOneItem($checkbox.get(0),item.data);}};Array.prototype._contains=function(value){for(var i=0;i<this.length;i++){if(value===this[i])return true;}
return false;};function setCheckboxState(box,state){if(box&&box.type=="checkbox"){box.checked=state;}}})(jQuery,window,document);;(function($,window,document,undefined){var defaults={totalData:0,showData:0,pageCount:9,current:1,prevCls:'prev',nextCls:'next',prevContent:'<',nextContent:'>',activeCls:'active',coping:false,homePage:'',endPage:'',count:3,jump:false,jumpIptCls:'jump-ipt',jumpBtnCls:'jump-btn',jumpBtn:'跳转',callback:function(){}};var Pagination=function(element,options){var opts=options,current,$document=$(document),$obj=$(element);this.setTotalPage=function(page){return opts.pageCount=page;};this.getTotalPage=function(){var p=opts.totalData||opts.showData?Math.ceil(parseInt(opts.totalData)/opts.showData):opts.pageCount;return p;};this.getCurrent=function(){return current;};this.filling=function(index){var html='';current=index||opts.current;var pageCount=this.getTotalPage();if(current>1){html+='<a href="javascript:;" class="'+opts.prevCls+'">'+opts.prevContent+'</a>';}else{$obj.find('.'+opts.prevCls)&&$obj.find('.'+opts.prevCls).remove();}
if(current>=opts.count*2&&current!=1&&pageCount!=opts.count){var home=opts.coping&&opts.homePage?opts.homePage:'1';html+=opts.coping?'<a href="javascript:;" data-page="1">'+home+'</a><span>...</span>':'';}
var start=current-opts.count,end=current+opts.count;((start>1&&current<opts.count)||current==1)&&end++;(current>pageCount-opts.count&&current>=pageCount)&&start++;for(;start<=end;start++){if(start<=pageCount&&start>=1){if(start!=current){html+='<a href="javascript:;" data-page="'+start+'">'+start+'</a>';}else{html+='<span class="'+opts.activeCls+'">'+start+'</span>';}}}
if(current+opts.count<pageCount&&current>=1&&pageCount>opts.count){var end=opts.coping&&opts.endPage?opts.endPage:pageCount;html+=opts.coping?'<span>...</span><a href="javascript:;" data-page="'+pageCount+'">'+end+'</a>':'';}
if(current<pageCount){html+='<a href="javascript:;" class="'+opts.nextCls+'">'+opts.nextContent+'</a>'}else{$obj.find('.'+opts.nextCls)&&$obj.find('.'+opts.nextCls).remove();}
html+=opts.jump?'<input type="text" class="'+opts.jumpIptCls+'"><a href="javascript:;" class="'+opts.jumpBtnCls+'">'+opts.jumpBtn+'</a>':'';$obj.empty().html(html);};this.eventBind=function(){var self=this;var pageCount=this.getTotalPage();$obj.off().on('click','a',function(){if($(this).hasClass(opts.nextCls)){var index=parseInt($obj.find('.'+opts.activeCls).text())+1;}else if($(this).hasClass(opts.prevCls)){var index=parseInt($obj.find('.'+opts.activeCls).text())-1;}else if($(this).hasClass(opts.jumpBtnCls)){if($obj.find('.'+opts.jumpIptCls).val()!==''){var index=parseInt($obj.find('.'+opts.jumpIptCls).val());}else{return;}}else{var index=parseInt($(this).data('page'));}
self.filling(index);typeof opts.callback==='function'&&opts.callback(self);});$obj.on('input propertychange','.'+opts.jumpIptCls,function(){var $this=$(this);var val=$this.val();var reg=/[^\d]/g;if(reg.test(val)){$this.val(val.replace(reg,''));}
(parseInt(val)>pageCount)&&$this.val(pageCount);if(parseInt(val)===0){$this.val(1);}});$document.keydown(function(e){if(e.keyCode==13&&$obj.find('.'+opts.jumpIptCls).val()){var index=parseInt($obj.find('.'+opts.jumpIptCls).val());self.filling(index);typeof opts.callback==='function'&&opts.callback(self);}});};this.init=function(){this.filling(opts.current);this.eventBind();};this.init();};$.fn.pagination=function(parameter,callback){if(typeof parameter=='function'){callback=parameter;parameter={};}else{parameter=parameter||{};callback=callback||function(){};}
var options=$.extend({},defaults,parameter);return this.each(function(){var pagination=new Pagination(this,options);callback(pagination);});};})(jQuery,window,document);;(function($,document,window){$.fn.showPersonNum=function(options,cbFn){if(this.length==0)throw new Error("DOM绑定错误，请确认页面是否加载完毕");var oInput=this.get(0);manager.clear(oInput,"vetech-personnum");var personnum=new PersonNum(oInput,options,cbFn);$(oInput).on("keydown",function(){return false;});$(oInput).bind("click",eleClickHandler);manager.addEvent(PersonNum.id,"click",eleClickHandler);return personnum;};function eleClickHandler(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;$(target).select();var id=$(target).attr("vetech-ids");var $container=manager.getComponent(id);$container.show();}
var defaultOpts={hiddenPeople:null,hiddenChild:null,hiddenYear:null,qxCbFn:function(){},data:{"people":"5","child":"3","year":"17"}};function PersonNum(elem,options,cbFn){this.id="vetech-personnum-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},defaultOpts,options);this.data=this.opts.data;this.cbFn=cbFn||$.noop;this.isShow=false;this.people=2;this.child=0;this.year=[];this.$hiddenPeople=this.opts.hiddenPeople?$('#'+this.opts.hiddenPeople):null;this.$hiddenChild=this.opts.hiddenChild?$('#'+this.opts.hiddenChild):null;this.$hiddenYear=this.opts.hiddenYear?$('#'+this.opts.hiddenYear):null;this.init();manager.manage(this);}
var fn=PersonNum.prototype;fn.init=function(){this.$container=$('<div class="vetech-xzperson-container"></div>');this.$navbox=$('<div class="navbox"></div>');this.$sortbox=$('<div class="sortbox"></div>');this.$childContent=$('<div class="xzperson-group clearfix"></div>');this.$container.append(this.$navbox);this.$container.append(this.$sortbox);$(document.body).append(this.$container);this.renderData();this.bindEvent();};fn.renderData=function(){var people=parseInt(this.data.people,10);var child=parseInt(this.data.child,10);if(people>0){var $ul=$("<ul></ul>");for(var i=1;i<people+1;i++){var data={"people":i,"child":"0","year":[]};$li=$('<li title='+i+'成人+0儿童/间><span>'+i+'</span>成人+0儿童/间</li>');$li.data("liData",data);$ul.append($li);}
var $more=$('<a class="xzperson-more" href="javascript:;">更多选择》</a>');this.$navbox.append($ul);this.$navbox.append($more);var html='<div class="xzperson-group clearfix">'+'<label>每间入住</label>'+'<div class="group-right"><div class="xzperson-input"><input type="text" id="peoplenum" value="2成人" data="2" readonly></div>'+'<div class="xzperson-input"><input type="text" id="childnum" value="0儿童" data="0" readonly></div>'+'</div></div>'+'<div class="group-foot">'+'<a class="xzperson-more" href="javascript:;">《常用选择 </a>'+'<div class="foot-btn">'+'<button class="btn-sure">确定</button>'+'<button class="btn-cancle">取消</button>'+'</div></div>';this.$sortbox.append(html);this.createSelectNum("peoplenum",people);this.createSelectNum("childnum",child);}};fn.bindEvent=function(){var _this=this;this.$navbox.find("ul li").on('click',$.proxy(this.liClickhandler,this));this.$container.find(".xzperson-more").on('click',$.proxy(this.moreClickhandler,this));this.$sortbox.find(".xzperson-input input").on('click',function(ev){_this.stopEvent(ev);_this.$sortbox.find(".select-nav").hide();$(this).siblings(".select-nav").show();});this.$sortbox.find(".xzperson-input .select-nav li").on('click',function(ev){_this.setValuehandler(ev);});this.$sortbox.find(".btn-sure").on('click',function(){_this.year=[];_this.people=_this.$sortbox.find("#peoplenum").attr("data");_this.child=_this.$sortbox.find("#childnum").attr("data");var yearNum=_this.$childContent.find(".xzperson-input").length;if(yearNum>0){for(var i=0;i<yearNum;i++){_this.year.push(_this.$childContent.find(".xzperson-input").eq(i).find("input").attr("data"));}}else{_this.year=[];}
_this.$elem.val(_this.people+"成人+"+_this.child+"儿童/间");_this.$hiddenPeople.val(_this.people);_this.$hiddenChild.val(_this.child);_this.$hiddenYear.val(_this.year);var cbfnData={"people":_this.people,"child":_this.child,"year":_this.year};if(_this.cbFn)_this.cbFn(cbfnData);_this.hide();});this.$sortbox.find(".btn-cancle").on('click',function(){_this.opts.qxCbFn.call(_this);_this.hide();});$(document).on("click",$.proxy(this.closeHandler,this));this.$container.on("click",$.proxy(this.stopEvent,this));this.$sortbox.on("click",function(){$(this).find(".select-nav").hide();});}
fn.closeHandler=function(event){var target=event.target;if(this.elem!==target){this.hide();}
this.stopEvent(event);};fn.moreClickhandler=function(){if(this.$navbox.is(":hidden")){this.$navbox.show();this.$sortbox.hide();}else{this.$navbox.hide();this.$sortbox.show();}};fn.liClickhandler=function(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var $target=$(target);this.$elem.val($target.text());this.$hiddenPeople.val($target.data("liData").people);this.$hiddenChild.val($target.data("liData").child);this.$hiddenYear.val($target.data("liData").year);if(this.cbFn)this.cbFn($target.data("liData"));this.hide();}
fn.createSelectNum=function(obj,num){var _this=this;var $select=$("<ul class='select-nav'></ul>");var text="",qdvalue=0;if(obj=='peoplenum'){text="成人";qdvalue=1;}else{text="儿童";qdvalue=0;}
for(var i=qdvalue;i<num+1;i++){$li=$('<li data="'+i+'">'+i+text+'</li>');$select.append($li);}
this.$sortbox.find("#"+obj).parent().append($select);$select.hide();}
fn.createChildNum=function(num){var _this=this;num=parseInt(num,10);var year=parseInt(this.data.year,10);if(num>0){var $childLabel=$("<label>儿童年龄</label>");var $groupright=$('<div class="group-right"></div>');this.$childContent.append($childLabel);for(var i=0;i<num;i++){$groupright.append('<div class="xzperson-input" id="child'+i+'"><input type="text" value="≤1岁"  data="1" readonly></div>');var $select=$("<ul class='select-nav'></ul>");var text="";for(var j=1;j<year+1;j++){if(j===1){text="≤1岁";}else{text=j+"岁";}
var $li=$('<li data="'+j+'">'+text+'</li>');$select.append($li);}
$groupright.find("#child"+i).append($select);$select.hide();}
this.$childContent.append($groupright);this.$childContent.find(".xzperson-input input").on('click',function(ev){_this.stopEvent(ev);_this.$sortbox.find(".select-nav").hide();$(this).siblings(".select-nav").show();})
this.$childContent.find(".xzperson-input .select-nav li").on('click',$.proxy(this.setValuehandler,this));this.$sortbox.find(".group-foot").before(this.$childContent);}}
fn.setValuehandler=function(ev){this.stopEvent(ev);ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var $target=$(target);if($target.parent().siblings().attr("id")=="childnum"){this.$childContent.children().remove();this.createChildNum($target.attr("data"));}
$target.parents(".xzperson-input").find("input").val($target.text()).attr("data",$target.attr("data"));$target.parent().hide();}
fn.show=function(){if(this.isShow)return;this.setPos();this.$container.css("visibility","visible");this.isShow=true;};fn.hide=function(){if(!this.isShow)return;this.$container.css({"left":"-1000px","top":"-1000px","visibility":"hidden"});this.isShow=false;};fn.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+this.$elem.outerHeight()});};fn.stopEvent=function(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelbubble=true;}
fn.destroy=function(){if(this.$container){this.$container.remove();}};})(jQuery,document,window);;(function($,window,document){$.fn.addPopup=function(options,cbFn){if(this.length<=0)throw new TypeError("DOM绑定错误");var popupObj=new Popup(this.get(0),options);if(cbFn&&Object.prototype.toString.call(cbFn)==="[object Function]")cbFn(popupObj.getResult());return null;};$.fn.addPopup2=function(options,cbFn){if(this.length<=0)throw new TypeError("DOM绑定错误");options=options||{};options.createOnce=false;if(!options.freeBinding){$(this).on("click",function(ev){execFn(this);});}else{execFn(this.get(0));}
function execFn(domObj){if($(domObj).attr("vehidden"))return;manager.clear(domObj);var obj=new Popup(domObj,options);obj.show();if(cbFn&&Object.prototype.toString.call(cbFn)==="[object Function]")cbFn(obj.getResult());}};$.fn.addPopup.options={width:null,height:null,url:null,queryType:"iframe",content:"",isMask:false,keepOpen:false,createOnce:true,autoClose:false,defer:2000,pos:""};function Popup(elem,options){this.id="vetech-popup-"+new String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.addPopup.options,options);this.isShow=false;this.$container=$("<div class='pupup-container'></div>");this.$container.css({"min-width":100,"min-height":50,"border":"1px solid #ccc","position":"absolute","visibility":"hidden","background":"#f9f9f9","margin":"0","padding":"0","left":0,"top":0});this.$arraw=$("<img class='arraw' src='"+Popup.dataUrl+"' />");this.$arraw.css({"position":"absolute","width":"19","height":"16","left":"40%","top":"-10px","display":"none"});this.$arrawBottom=$("<img class='arraw' src='"+Popup.dataUrl4Bottom+"' />");this.$arrawBottom.css({"position":"absolute","width":"19","height":"16","left":"40%","bottom":"-10px","display":"none"});this.$contentArea=$("<div class='popup-content'></div>");this.$contentArea.css({"width":"100%","height":"100%"});this.$iframe=null;manager.manage(this);this.init();}
Popup.prototype.init=function(){if(this.opts.url&&typeof this.opts.url==="string"){if(this.opts.queryType==="iframe"){this.$iframe=$("<iframe></iframe>");this.$iframe.css({"width":"100%","height":"100%","border":"none","overflow":"hidden"});this.$iframe.attr("src",this.opts.url);this.$contentArea.append(this.$iframe);this.$contentArea.css({"overflow":"hidden"});}else if(this.opts.queryType==="html"){this.loadData(function(data){this.$contentArea.append($(data));});}else{throw new TypeError("参数配置有误,请检查queryType配置");}}else{this.$contentArea.append($(this.opts.content));}
this.$container.append(this.$arraw);this.$container.append(this.$arrawBottom);this.$container.append(this.$contentArea);if(this.opts.width){this.$container.css("width",this.opts.width);}
if(this.opts.height){this.$container.css("height",this.opts.height);}
$(document.body).append(this.$container);this.bindEvent();};Popup.prototype.loadData=function(callback){var _this=this;$.ajax({type:"get",url:this.opts.url,dataType:"html",success:function(data){callback.call(_this,data);}});};Popup.prototype.showUpArraw=function(){this.$arraw.css("display","block");this.$arrawBottom.css("display","none");};Popup.prototype.showDownArraw=function(){this.$arraw.css("display","none");this.$arrawBottom.css("display","block");}
Popup.prototype.autoClose=function(){var _this=this;if(this.opts.autoClose){window.setTimeout(function(){_this.hide();},this.opts.defer);}}
Popup.prototype.setContainerPos=function(){var pointer=this.$elem.offset();var iHeight=$(document).height();var iWidth=$(document).width();var elemWidth=this.elem.offsetWidth;var elemHeight=this.elem.offsetHeight;var containerWidth=this.$container.get(0).offsetWidth;var containerHeight=this.$container.get(0).offsetHeight;if((iWidth-pointer.left)<=containerWidth){this.$container.css({"left":(pointer.left+elemWidth-containerWidth),"top":(pointer.top+elemHeight+10)});var leftPos=(containerWidth-elemWidth/2);if(containerWidth-leftPos<20)leftPos=containerWidth-30;this.$arraw.css("left",leftPos);this.$arrawBottom.css("left",leftPos);}else{this.$container.css({"left":pointer.left,"top":(pointer.top+elemHeight+10)});var leftPos=elemWidth/2-10;if(leftPos<10)leftPos=10;this.$arraw.css("left",leftPos);this.$arrawBottom.css("left",leftPos);}
if(this.opts.pos){if(this.opts.pos==="top"){this.$container.css("top",pointer.top-containerHeight-10);this.showDownArraw();}else{this.showUpArraw();}}else{if(iHeight-(pointer.top+elemHeight)<containerHeight){this.$container.css("top",pointer.top-containerHeight-10);this.showDownArraw();}else{this.showUpArraw();}}};Popup.prototype.show=function(){this.setContainerPos();this.$container.css("visibility","visible");this.autoClose();this.isShow=true;};Popup.prototype.hide=function(ev){if(this.opts.keepOpen)return;if(!this.opts.createOnce){this.clear();}else{this.$container.css({"visibility":"hidden","left":0,"top":0});this.isShow=false;}};Popup.prototype.getContainer=function(){return this.$container;};Popup.prototype.clear=function(){this.getContainer().remove();};Popup.prototype.destroy=function(){this.getContainer().remove();};Popup.prototype.bindEvent=function(){var _this=this;this.$container.on("click",function(ev){ev.stopPropagation();});$(document).find("body").on("click",function(ev){if(ev.target!==_this.elem)_this.hide(ev);});if(this.opts.createOnce){this.$elem.on("click",function(ev){_this.show();});}};Popup.prototype.getResult=function(){return{"close":function(){this.hide();},"clear":function(){this.clear();},"show":function(){this.show();},"elem":this.elem,"container":this.$container}}
Popup.dataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAQCAYAAAD0xERiAAAATElEQVR42mNgIAKcP3/+PwM1AMig58+f/6fYQJhBP3/+pMxAZINgmCwDsRlEloH4DCLJQGIMIspAUgzCayA5BmE1kBKDKIrlUTDIAQChUXqIUUWc4AAAAABJRU5ErkJggg==";Popup.dataUrl4Bottom="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAQCAYAAAD0xERiAAAATElEQVR42mNgGAXDCJw/f/7/8+fP///8+ZNsDNIPModiA1EMosSFWA0ix0C8BpFiIFEGEWMgSQbhM5Asg7AZSJFB6AZSbBCygcSoAwAginqItwQNXAAAAABJRU5ErkJggg==";})(jQuery,window,document);;(function($,win,doc){$.previewFile=function(url,options){options=options||{};var iWidth=options.width||window.screen.availWidth,iHeight=options.height||window.screen.availHeight;window.open("/webcomponent/preview?url="+url,'文件预览','width='+(iWidth-10)+',height='+(iHeight-70)+',top=0,left=0,resizable=yes,status=yes,menubar=no,scrollbars=yes');};$.initPreviwFile=function(){var url=getQueryString("url");var arr=url.split(".");if(!arr.length)throw new Error("预览地址错误，没有找到对应的文件类型");var suffix=arr[arr.length-1].toLowerCase();var tempUrl="/webcomponent/docx/kjcommview";if(suffix==="doc"){tempUrl+="/doc?notitle=1&filePath="+url;}else if(suffix==="docx"||suffix==="dotx"||suffix==="pdf"){tempUrl="/docx?notitle=1&filePath="+url;}else if(suffix==="xls"||suffix==="xlsx"){tempUrl="/excel?notitle=1&filePath="+url;}else if(suffix==="ppt"){tempUrl="/ppt?notitle=1&filePath="+url;}else{tempUrl=null;}
if(tempUrl){previewFiles(tempUrl);}else{previewImg(url);}
bindEvent();};function previewImg(url){var oImg=new Image();oImg.src=url;oImg.onload=function(){var iW=oImg.width,iH=oImg.height;var $wrap=$(".wrap-div");$wrap.show();if(iH>$wrap.height()){if(iH>$wrap.height()){oImg.style.height=$wrap.height()+"px";$(oImg).css({"margin-left":iW*($wrap.height()/iH)/-2,"margin-top":$wrap.height()/-2});}else{$(oImg).css({"margin-left":iW/-2,"margin-top":iH/-2});}}else{if(iW>$wrap.width()){oImg.style.width=$wrap.width()+"px";$(oImg).css({"margin-left":iH/-2,"margin-top":iH*($wrap.width()/iW)/-2});}else{$(oImg).css({"margin-left":iW/-2,"margin-top":iH/-2});}}
$wrap.append(oImg);}}
function bindEvent(){$(".wrap-div").find(".close").on("click",function(){win.close();});}
function previewFiles(url){var $iframe=$('<iframe src="'+url+'"></iframe>');$(doc.body).append($iframe);}
function getQueryString(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null)return unescape(r[2]);return null;}})(jQuery,window,document);;(function($,window,document){$.fn.addPriceCalendar=function(options,cbFn){if(!this.length)throw new Error("DOM绑定错误，请确认页面是否加载完毕");var target=this.get(0);manager.clear(target);var pCalendar=new PriceCalendar(target,options,cbFn);$(target).on("click",triggerHandler);manager.addEvent(pCalendar.id,"click",triggerHandler);}
$.fn.addPriceCalendar.options={usetype:"layer",activeDate:new Date(),type:"3",typeValue:"/component/data/price.calendar.data.js"};function triggerHandler(ev){ev=ev||window.event;var target=ev.target||ev.srcElement;var ids=$(target).attr("vetech-ids");var component=manager.getComponent(ids);component.show();}
function PriceCalendar(elem,options,cbFn){this.id="vetech-price-calendar-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.addPriceCalendar.options,options);if(!isTypeOf(this.opts.activeDate,"[object Date]"))throw new TypeError("activeDate需要Date类型");this.cbFn=cbFn;if(this.cbFn&&!isTypeOf(this.cbFn,"[object Function]"))throw new TypeError("回调函数类型错误");this.isShow=false;this.init();this.loadData();manager.manage(this);}
PriceCalendar.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.renderData();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.renderData();}});}};PriceCalendar.prototype.renderData=function(){var _this=this;this.$daysArea.find("td>a").each(function(i){if($(this).hasClass("not-value"))return;var dateStr=$(this).attr("data-date");if(_this.data[dateStr]){$(this).append('<span class="price">￥'+_this.data[dateStr].price+'</span>');if(formatDate(_this.opts.activeDate)===dateStr)$(this).addClass("active");}else $(this).addClass("invalid");});};PriceCalendar.prototype.init=function(){this.$container=$('<div class="vetech-price-calendar clearfix"></div>');this.$monethArea=$('<div class="month-area"></div>');this.$daysArea=$('<div class="days-area"></div>');this.$today=$('<div class="today"><a href="javascript:void(0)">回到今天</a></div>');this.$switchBtn=$(getMonthTpl(this.opts.activeDate));this.$monethArea.append(this.$today).append(this.$switchBtn);var $table=$('<table></table>');$table.append(createThead());$table.append(createTbody());this.$daysArea.append($table);this.$container.append(this.$monethArea).append(this.$daysArea);if(this.opts.usetype==="layer"){$(document.body).append(this.$container);}else{this.$elem.append(this.$container);this.show();}
var iHeight=this.$daysArea.find("tbody").outerHeight();this.$switchBtn.css("height",iHeight);this.initDays(this.opts.activeDate);this.bindEvent();};PriceCalendar.prototype.initDays=function(date){var year=date.getFullYear(),month=date.getMonth(),dayIndex=1;weekNum=0,maxDay=0;weekNum=new Date(year,month,1).getDay();maxDay=new Date(year,month+1,0).getDate();var tempMonth=month+1;tempMonth=tempMonth<10?"0"+tempMonth:tempMonth;this.$daysArea.find("td>a").each(function(i,item){$(this).html("").removeClass();if(i>=weekNum&&dayIndex<=maxDay){$(this).attr("data-date",""+year+tempMonth+dayIndex);$(this).append('<span class="date">'+dayIndex+'</span>');dayIndex++;}else{$(this).addClass("not-value");}});this.$switchBtn.find(".month").find("span").eq(0).text(year+"年").end().eq(1).text((month+1)+"月");};PriceCalendar.prototype.bindEvent=function(){var _this=this;this.$today.on("click",bindAsEventListener(this,this.backToSomeDay,new Date(),true));this.$daysArea.find("td>a").on("click",function(){_this.itemClickHandler.call(_this,$(this));});this.$monethArea.find(".prev-btn").on("click",bindAsEventListener(this,this.switchBtnHandler,-1));this.$monethArea.find(".next-btn").on("click",bindAsEventListener(this,this.switchBtnHandler,1));if(this.opts.usetype==="layer"){$(document).on("click",function(ev){var target=ev.target;if(target!==_this.elem)_this.hide();});this.$container.on("click",bindAsEventListener(null,stopEvent));}
this.$container.on("click","a",function(){return false;});};PriceCalendar.prototype.switchBtnHandler=function(ev,iSpeed){stopEvent(ev);var $month=this.$switchBtn.find(".month>span"),year=$month.eq(0).text().replace("年",""),month=$month.eq(1).text().replace("月","");month=parseInt(month)+iSpeed-1;this.backToSomeDay.call(this,ev,new Date(year,month,1),false);};PriceCalendar.prototype.backToSomeDay=function(ev,date,isExecuteAcite){stopEvent(ev);this.initDays(date);this.renderData();var $clickedDom=this.$daysArea.find("a[data-date='"+(formatDate(date))+"']");isExecuteAcite&&this.setActive($clickedDom);};PriceCalendar.prototype.itemClickHandler=function($target){if($target.hasClass("not-value")||$target.hasClass("invalid"))return;this.setActive($target);var dateStr=$target.attr("data-date")
if(this.cbFn)this.cbFn(dateStr,this.data[dateStr]);this.hide();};PriceCalendar.prototype.setActive=function($clickedDom){if($clickedDom.hasClass("invalid"))return;this.$daysArea.find(".active").removeClass();$clickedDom.addClass("active");};PriceCalendar.prototype.show=function(){if(this.isShow)return;this.setPos();this.$container.css("visibility","visible");this.isShow=true;};PriceCalendar.prototype.hide=function(){if(!this.isShow)return;this.$container.css({"visibility":"hidden","left":0,"top":0});this.isShow=false;};PriceCalendar.prototype.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iHeight=$(document).outerHeight(),iLeft=0,iTop=pointer.top+this.$elem.outerHeight()+2;iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop});};function createTbody(){var $tbody=$('<tbody></tbody>');var $tr=null;for(var i=0;i<42;i++){if(i%7===0){$tr=$('<tr></tr>');$tbody.append($tr);}
$tr.append('<td><a href="javascript:void(0)"></a></td>');}
return $tbody;}
function createThead(){var $thead=$('<thead></thead>'),tempArr=["日","一","二","三","四","五","六"];for(var i=0;i<tempArr.length;i++){$thead.append('<th>'+tempArr[i]+'</th>');}
return $thead;}
function getMonthTpl(date){var htmlArray=[];htmlArray.push('<div class="switch-btn">');htmlArray.push('<a class="prev-btn"><img src="'+prevUrl+'" /></a>');htmlArray.push('<a class="next-btn"><img src="'+nextUrl+'" /></a>');htmlArray.push('<div class="month">');htmlArray.push('<span>'+date.getFullYear()+'年</span><span>'+(date.getMonth()+1)+'月</span>');htmlArray.push('</div>');htmlArray.push('</div>');return htmlArray.join("");}
function oneBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(){fn.apply(object,args);}}
function bindAsEventListener(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(ev){fn.apply(object,[ev].concat(args));}}
function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}
function formatDate(date){var year=date.getFullYear(),month=date.getMonth()+1,days=date.getDate();month=month<10?"0"+month:month;return""+year+month+days;}
function isTypeOf(sumObject,typeString){return Object.prototype.toString.call(sumObject)===typeString;}
var prevUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABVUlEQVR4Xu3YQQrCMBAF0A69l3oUXenSq7izK3sU8V4SaaALoWiT5s8wzO9aQv6bP1aULvgjwfN3BGADggtwBYIXgF+CXAGuQHABrkDwAvAtwBXgCgQX4AoELwDfAqYrcH6+H1MDh0N/smqiGUAOL3LMwVMarRBMAL7Cz6M3QlAHWAxviKAK8DO8EYIawKrwBggqAEXhlRHgAFXhFRGgAP/Ci0h+/6eU8u+BxQf8doABrAl/38k4hb680tEKAQJQEn6euhVCc4Ca8JYITQG2hLdCaAbQIrwFQhOAluG1ETYDIMJrImwCQIbXQqgG0AivgVAFoBkejVAMYBF+NUKXbsO+v5b8vVYMUHK4h88SwMOUkHdkA5C6Hs5mAzxMCXlHNgCp6+FsNsDDlJB3ZAOQuh7OZgM8TAl5RzYAqevhbDbAw5SQd2QDkLoezmYDPEwJecfwDfgAhOvkQcB0tU4AAAAASUVORK5CYII=";var nextUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABZUlEQVR4Xu2YSw7CMAxEG3Ev4Ch0BUeCVXsUxL1oUBeVEKKfpLbHkqcbNlXseZ4hVlMT/EnB9TcEQAcEJ8AIBDcA/wQZAUYgOAFGILgBeAswAoxAcAKMQHAD8BYojsDtlS85527WOTn3j/Oh1XDW9fnumpQuc2enlNr7MfUltYsBjIcjIGiIH7VUAbCGoCV+FwArCJridwPQhqAtXgSAFgQL8WIApCFYiRcFIAXBUrw4gL0QrMWrANgC4d/CghCvBqAUAkq8KoCtEPIwnKTXW/VVuKTA6tq8cFjNbl/Sm7oDpmZqIFiINwOwJQ7fk7MSbwpgKwRL8eYA1iBYi4cAmIOAEA8D8AsBJR4KYIIw/pZ+xiq96pber/4iJNkE8iwCQNL3UJsO8DAFZA90AJK+h9p0gIcpIHugA5D0PdSmAzxMAdkDHYCk76E2HeBhCsge6AAkfQ+16QAPU0D2QAcg6XuoHd4BH2F16UGLpuLdAAAAAElFTkSuQmCC";})(jQuery,window,document);;(function($,doc){var defaultOptions={simpleData:{id:"id",name:"name"},splitStr:","};function ProvinceAndCity(elem,options,cbFn){this.id="vetech-provinceAndCity-"+String(Math.random()).replace(/\D/g,"");this.elem=elem;this.$elem=$(elem);this.opts=$.extend(true,{},defaultOptions,options);this.callback=cbFn||$.noop;this.$hiddenInput=$("#"+(this.opts.hiddenName||""));this.init();}
ProvinceAndCity.prototype.init=function(){this.$container=$('<div class="vetech-provinceAndCity-container">');this.$toolbar=$('<div class="toolbar"></div>');this.$toolbar.append('<strong>选择地区</strong><input type="button" value="确定" />');this.$checkedArea=$('<div class="checkedArea clear">');this.$content=$('<div class="content clear">');this.$cityPanel=$('<div class="cityPanel">');this.$container.append(this.$toolbar).append(this.$checkedArea).append(this.$content);$(doc.body).append(this.$container);this.render();};ProvinceAndCity.prototype.render=function(){var provinceData=this.opts.data||[];var _this=this;$.each(provinceData,function(i,item){var $span=$(addItem.call(_this,item));$span.data("citys",item["citys"]||[]);$span.find(".province").data("data",item);_this.$content.append($span);});this.writeValue();this.addEvent();this.bindEvent();};ProvinceAndCity.prototype.writeValue=function(){var _this=this;if(this.$hiddenInput.length&&this.$hiddenInput.val()){var value=this.$hiddenInput.val();value=value.split(this.opts.splitStr);var provinceDatas=[],cityDatas={},values=[],indexName=this.opts.simpleData.id;for(var i=0,len=value.length;i<len;i++){var id=value[i];innerNoop:for(var j=0,len2=this.opts.data.length;j<len2;j++){var provinceItem=this.opts.data[j];if(id===provinceItem[indexName]){provinceDatas.push(provinceItem);_this.addCheckedItem.call(_this,provinceItem,"province");values.push(provinceItem[_this.opts.simpleData.name]);break;}else{var citys=provinceItem["citys"];for(var k=0,len3=citys.length;k<len3;k++){var city=citys[k];if(id===city[indexName]){cityDatas[city.pid]=cityDatas[city.pid]||[];cityDatas[city.pid].push(city);_this.addCheckedItem.call(_this,city,"city");values.push(city[_this.opts.simpleData.name]);break innerNoop;}}}}}
this.$elem.val(values.join(this.opts.splitStr));$.each(provinceDatas,function(i,provinceValue){var $span=$("#"+provinceValue[_this.opts.simpleData.id]),$input=$span.find(".province");$span.css("color","#2dbdff");setChecked($input,true);_this.$container.trigger("choose.provinceAndCity",$input);});$.each(this.$container.find(".province"),function(i,input){var $input=$(input),currData=$input.data("data"),$span=$input.parents(".item"),checkedCitys=cityDatas[currData[_this.opts.simpleData.id]];if(checkedCitys){$span.data("checkedData",checkedCitys);$span.css("color","#2dbdff");}});}};ProvinceAndCity.prototype.bindEvent=function(){var _this=this;this.$container.on("click.provinceAndCity","span.item",function(ev){if($(ev.target).hasClass("item")||$(ev.target).hasClass("collapse")){_this.$container.find(".detail").hide();_this.$container.trigger("expand.provinceAndCity",this);}}).on("mouseleave.provinceAndCity","span.item",function(){_this.$container.trigger("collapse.provinceAndCity",this);}).on("click.provinceAndCity","input[type='checkbox']",function(){_this.$container.trigger("choose.provinceAndCity",this);}).on("click.provinceAndCity",".expand",function(){_this.$container.trigger("collapse.provinceAndCity",$(this).parents(".item"));});this.$checkedArea.on("click.provinceAndCity",".close",function(){_this.$container.trigger("delete.provinceAndCity",$(this).parent());});this.$toolbar.on("click.provinceAndCity","input",function(){_this.$container.trigger("sure.provinceAndCity");_this.hide();});};ProvinceAndCity.prototype.addEvent=function(){var _this=this;this.$container.on("expand.provinceAndCity",function(e,span){var $span=$(span);$span.find(".detail").show();_this.$cityPanel.html("");$.each($span.data("citys"),function(i,item){var $label=$('<label id="'+item[_this.opts.simpleData.id]+'" class="ellipsis" title="'+item[_this.opts.simpleData.name]+'"><input type="checkbox" />'+item[_this.opts.simpleData.name]+'</label>');$label.find("input").data("data",item);_this.$cityPanel.append($label);});if($span.find(".province").is(":checked")){var $inputs=_this.$cityPanel.find("input");setChecked($inputs,true);$inputs.attr("disabled","disabled");}else{var tempData=$span.data("checkedData")||[];$.each(tempData,function(i,item){setChecked(_this.$cityPanel.find("#"+item[_this.opts.simpleData.id]).find("input"),true);});}
$span.append(_this.$cityPanel.show());});this.$container.on("collapse.provinceAndCity",function(e,span){var $span=$(span);$span.find(".detail").hide().end().find(".cityPanel").hide();});this.$container.on("choose.provinceAndCity",function(e,input){var $span=$(input).parents(".item"),$input=$(input),currData=$input.data("data");if($input.hasClass("province")){if($input.is(":checked")){var $inputs=_this.$cityPanel.find("input");setChecked($inputs,true);$inputs.attr("disabled","disabled");$span.data("checkedData",[]);_this.addCheckedItem.call(_this,currData,"province");}else{var $inputs=_this.$cityPanel.find("input");setChecked($inputs,false);$inputs.removeAttr("disabled");$.each(_this.$checkedArea.find(".checkedItem"),function(i,item2){var $item=$(item2),td=$item.data("data");if(currData[_this.opts.simpleData.id]===td[_this.opts.simpleData.id])$item.remove();});}}else{var tempData=$span.data("checkedData")||[];if($input.is(":checked")){tempData.push(currData);_this.addCheckedItem.call(_this,currData,"city");}else{var newData=tempData;tempData=[];$.each(newData,function(i,item){if(currData[_this.opts.simpleData.id]!==item[_this.opts.simpleData.id]){tempData.push(item);}else{$.each(_this.$checkedArea.find(".checkedItem"),function(i,item2){var $item=$(item2),td=$item.data("data");if(item[_this.opts.simpleData.id]===td[_this.opts.simpleData.id])$item.remove();});}});}
$span.data("checkedData",tempData);}});this.$container.on("delete.provinceAndCity",function(e,span){var currData=$(span).data("data");$.each(_this.$container.find(".province"),function(i,input){var $input=$(input);var tempData=$input.data("data");if(currData[_this.opts.simpleData.id]===tempData[_this.opts.simpleData.id]){setChecked($input,false);_this.$container.trigger("choose.provinceAndCity",input);}
var $pSpan=$input.parents(".item");var newData=[];$.each($pSpan.data("checkedData")||[],function(i,itemValue){if(itemValue[_this.opts.simpleData.id]!==currData[_this.opts.simpleData.id]){newData.push(itemValue);}});$pSpan.data("checkedData",newData);});$(span).remove();});this.$container.on("sure.provinceAndCity",function(){var resultData=[],ids=[],values=[];$.each(_this.$checkedArea.find(".checkedItem ")||[],function(i,item){var itemValue=$(item).data("data");ids.push(itemValue[_this.opts.simpleData.id]);values.push(itemValue[_this.opts.simpleData.name]);resultData.push(itemValue);});_this.$elem.val(values.join(_this.opts.splitStr));_this.$hiddenInput.length&&_this.$hiddenInput.val(ids.join(_this.opts.splitStr));_this.callback(resultData);});};ProvinceAndCity.prototype.addCheckedItem=function(data,type){if(type==="province"){$.each(this.$checkedArea.find(".checkedItem"),function(i,item){var $item=$(item),tempData=$item.data("data");if(tempData["pid"]===data.id){$item.remove();}});}
this.$checkedArea.append(createCheckedItem.call(this,data));};function createCheckedItem(data){var $span=$('<span class="checkedItem ellipsis">'+data[this.opts.simpleData.name]+'<i class="close"></i></span>');$span.data("data",data);return $span;}
ProvinceAndCity.prototype.show=function(){this.setPos();this.$container.css("visibility","visible");};ProvinceAndCity.prototype.setPos=function(){var pointer=this.$elem.offset();this.$container.css({"left":pointer.left,"top":pointer.top+this.$elem.outerHeight()});};ProvinceAndCity.prototype.hide=function(){this.$container.css({"visibility":"hidden","left":"-1000px","top":"-1000px"});};ProvinceAndCity.prototype.destroy=function(){this.$container.off(".provinceAndCity");this.$checkedArea.off(".provinceAndCity");this.$toolbar.off(".provinceAndCity");this.$container.remove();this.$toolbar.remove();delete this;};function addItem(item){return'<span class="item" id="'+item[this.opts.simpleData.id]+'">'+'<i class="collapse"></i>'+item[this.opts.simpleData.name]+''+'<div class="detail">'+'<i class="expand"></i>'+'<label class="ellipsis"><input type="checkbox" class="province"  value="'+item[this.opts.simpleData.id]+'" />'+item[this.opts.simpleData.name]+'</label>'+'</div>'+'</span>';}
function setChecked($inputs,state){$.each($inputs,function(i,input){input.checked=state;});}
window.ProvinceAndCity=ProvinceAndCity;})(jQuery,document);;(function($,window,document){$.fn.addPulldown=function(usetype,args1,args2){if(this.length==0)throw new Error("DOM绑定错误");var oInput=this.get(0);if("single"===usetype){return createSinglePulldown(oInput,args1);}else if("tab"===usetype){createTabPulldown(oInput,args1,args2);}else if("list"===usetype){createListPulldown(oInput,args1,args2);}else{var pulldownObj=new Pulldown(oInput,args1.options,args1.filterFn,args1.cbFn,args1.elemBeforeClick);return pulldownObj;}}
function createSinglePulldown(oInput,args1){manager.clear(oInput);var pulldownObj=new Pulldown(oInput,args1.options,args1.filterFn,args1.cbFn,args1.elemBeforeClick);if(!pulldownObj.opts.freeBinding){$(oInput).on("click",singleInputClickHandler);manager.addEvent(pulldownObj.id,"click",singleInputClickHandler);}
$(oInput).on("keyup",singleInputKeyHandler);return pulldownObj;}
function singleInputClickHandler(event){var dataIndex=$(event.target).data("data-index"),prevCompId=$(event.target).data("prev-id"),prevComponent=null;if(dataIndex&&prevCompId){prevComponent=manager.getComponent(prevCompId);if(!prevComponent.$elem.val())return;}
var ids=getIdsByEvent(event);if(!ids)return;var component=manager.getComponent(ids);if(component){if(component.opts.firstNotLoad===true&&!component.$hiddenInput.val()){component.opts.freeBinding=true;component.init();component.opts.firstNotLoad=false;}else{component.elemClickHandler(event);}}}
function singleInputKeyHandler(event){var ids=getIdsByEvent(event);if(!ids)return;var component=manager.getComponent(ids);component&&component.elemKeyUpHandler(event);}
function createTabPulldown(oInput,args1,args2){manager.clear(oInput,"vetech-pulldown");var options=args1.options;options["usetype"]="composite";var comp1=$(oInput).addHotCity(options,args1.cbFn);var comp2=new Pulldown(oInput,args2.options,args2.filterFn,args2.cbFn);$(oInput).on("click",compositeTabClickHandler);$(oInput).on("keyup",compositeTabKeyHandler);manager.addEvent(comp1.id,"click",compositeTabClickHandler);manager.addEvent(comp2.id,"keyup",compositeTabKeyHandler);}
function compositeTabClickHandler(event){var target=event.target;var ids=target.getAttribute("vetech-ids");ids=ids.split(",");var pulldownObj=manager.getComponent(ids[1]);if(target.value===""){pulldownObj&&pulldownObj.hide();}else{if(pulldownObj&&!pulldownObj.isShow){pulldownObj.reloadData(true);pulldownObj.show();}}}
function compositeTabKeyHandler(event){var target=event.target;var ids=target.getAttribute("vetech-ids");ids=ids.split(",");var pulldownObj=manager.getComponent(ids[1]);if(target.value===""){pulldownObj&&pulldownObj.hide();}else{pulldownObj.elemKeyUpHandler(event);}}
function getIdsByEvent(event){event=event||window.event;var target=event.currentTarget||event.srcElement;var ids=target.getAttribute("vetech-ids");return ids;}
function createListPulldown(oInput,args1,args2){var options=args1.options;options["_usetype_"]="single";options["_hasPage_"]=false;var comp1=new Pulldown(oInput,options,args1.filterFn,args1.cbFn);var comp2=new Pulldown(oInput,args2.options,args2.filterFn,args2.cbFn);$(oInput).on("click",compositeListClickHandler);$(oInput).on("keyup",compositeListKeyHandler);manager.addEvent(comp1.id,"click",compositeListClickHandler);manager.addEvent(comp2.id,"keyup",compositeListKeyHandler);}
function compositeListClickHandler(event){var target=event.target;var ids=target.getAttribute("vetech-ids");ids=ids.split(",");var pulldownObj1=manager.getComponent(ids[0]);var pulldownObj2=manager.getComponent(ids[1]);if(target.value===""){if(pulldownObj1.opts.elemBeforeClick){window.setTimeout(function(){if(pulldownObj1.opts.elemBeforeClick(pulldownObj1)){pulldownObj1.show();}},1);}else{pulldownObj1.show();}
pulldownObj2.hide();}else{pulldownObj1.hide();if(!pulldownObj2.isShow){pulldownObj2.reloadData(true);pulldownObj2.show();}}}
function compositeListKeyHandler(event){var target=event.target;var ids=target.getAttribute("vetech-ids");ids=ids.split(",");var pulldownObj1=manager.getComponent(ids[0]);var pulldownObj2=manager.getComponent(ids[1]);if(target.value===""){pulldownObj1.elemKeyUpHandler(event);pulldownObj2.hide();}else{pulldownObj1.hide();pulldownObj2.elemKeyUpHandler(event);}
$(target).focus();Pulldown.stopEvent(event);}
$.fn.addPulldown.options={width:200,height:200,simpleData:{id:"id",name:"name"},title:"可输入拼音、汉字、三字码",type:3,typeValue:null,hiddenName:null,dataType:"static",qUrl:"",pageSize:10,hiddenFilter:true,autoSetValue:true,allCheck:null,showOnlyOne:true,"_usetype_":"single","_openFilter_":true,"_hasPage_":true,defer:1,autoClear:true,autoExecCallback:false,showAndReload:false,selectFirst:false,filterData:[],freeBinding:false,fn1:null,openLastKey:false,lastSearchKey:null,setFirstWriteValue:false,hideIfNone:true,readOnlyHide:true,formatServiceResult:function(data){}};function Pulldown(elem,options,filterFn,cbFn,elemBeforeClick){this.id="vetech-pulldown-"+String(Math.random()).replace(/\D/g,"");this.elem=elem;this.$elem=$(elem);this.$elem.attr("autocomplete","off");this.opts=$.extend({},$.fn.addPulldown.options,options);this.cbFn=cbFn||function(){};this.filterFn=filterFn;this.elemBeforeClick=elemBeforeClick;this.isFirstLoad=true;if(!(this.filterFn&&Object.prototype.toString.call(this.filterFn)==="[object Function]")){throw new Error("自定义过滤函数必须要配置，Pulldown第三个参数为filterFn");}
if(!(this.opts.fn1&&Object.prototype.toString.call(this.opts.fn1)==="[object Function]"))this.opts.fn1=null;this.$hiddenInput=$(document.body).find("#"+this.opts.hiddenName);this.data=[];this.originData=[];this.currentPage=1;this.totalNum=0;this.renderedItems=[];this.iNow=0;this.timer=null;this.isShow=false;this.isBindedEvent=false;this.clearInput=false;manager.manage(this);if(!(this.opts.firstNotLoad===true&&!this.$hiddenInput.val())){this.init();this.opts.firstNotLoad=false;}}
Pulldown.prototype.init=function(){this.$container=$('<div class="vetech-pulldown-container"></div>');this.$container.attr("tabIndex",1);this.$container.css({"visibility":"hidden","width":this.opts.width});this.$title=$('<div class="title">'+this.opts.title+'</div>');this.$content=$('<div class="content"></div>');if(!this.opts["_hasPage_"]&&this.opts.height)this.$container.css({"max-height":this.opts.height,"overflow":"auto"});this.$container.append(this.$title).append(this.$content);$(document.body).append(this.$container);if(this.opts.dataType==="dynamic"){this.loadDynamicData();}else{this.loadData();}};Pulldown.prototype.loadData=function(){var loadType=this.opts.type,typeValue=this.opts.typeValue;var _this=this;if("1"==loadType){this.formartData(typeValue,"static");}else{var url="2"==loadType?typeValue:"/component/data/pulldown.data.js";$.ajax({type:"get",url:url,dataType:"json",success:function(data){_this.formartData(data,"static");}});}};Pulldown.prototype.loadDynamicData=function(){var qStr=this.clearInput?"":$.trim(this.$elem.val());if(!this.opts._openFilter_){qStr='';}
this.clearInput=false;var url=this.opts.typeValue,_this=this;var tempUrl="count="+this.opts.pageSize+"&start="+(this.currentPage-1)*this.opts.pageSize+"&qStr="+(qStr?encodeURIComponent(qStr):"");url+=(url.indexOf("?")>-1?"&":"?")+tempUrl;if(this.$hiddenInput.val()&&this.isFirstLoad&&this.opts._openFilter_){url+="&id="+this.$hiddenInput.val();}
if(this.opts.openLastKey===true){this.opts.lastSearchKey=qStr;}
this.ajax&&this.ajax.abort();this.ajax=$.ajax({type:"get",url:url,dataType:"json",success:function(data){if(_this.opts.openLastKey===true){var qStr=data['qStr'];if(qStr!==undefined&&qStr!=_this.opts.lastSearchKey){return;}}
_this.formartData(data,"dynamic");if(_this.immediate){_this.show();_this.immediate=null;}}});};Pulldown.prototype.formartData=function(data,from){if(this.opts.filterData&&this.opts.filterData.length>0){var newData=[];for(var i=0,len=data.length;i<len;i++){if($.inArray(data[i][this.opts.simpleData.id],this.opts.filterData)===-1)newData.push(data[i]);}
data=newData;}
if("static"===from){this.data=data;this.originData=this.data;this.totalNum=this.data.length;if(this.opts.hiddenFilter){this.loadStaticData();this.writeValue();}else{this.writeValue();this.loadStaticData();}}else{this.totalNum=data.totalNum||0;this.isExist=this.totalNum?true:false;this.data=data.data||[];this.originData=this.data;if($.type(this.opts.formatServiceResult)=="function"){this.opts.formatServiceResult.call(this,data);}
this.renderData(this.data);this.writeValue();this.isFirstLoad=false;}};Pulldown.prototype.writeValue=function(){var tempData=null;if(this.opts.selectFirst){tempData=this.data.length?this.data[0]:{};this.$hiddenInput.val(tempData[this.opts.simpleData.id]);this.opts.selectFirst=false;this.reloadData(true,false);}else{if(!this.$hiddenInput.val())return;for(var i=0,len=this.data.length;i<len;i++){if(this.$hiddenInput.val()===this.data[i][this.opts.simpleData.id]){tempData=this.data[i];break;}}
if(!tempData&&this.data.length>0&&this.opts.setFirstWriteValue){tempData=this.data[0];this.$hiddenInput.val(tempData[this.opts.simpleData.id]);}}
if(!tempData){this.$elem.val("");this.$hiddenInput.val("");return;}
this.$elem.val(tempData[this.opts.simpleData.name]);this.opts.autoExecCallback&&this.cbFn(tempData);};Pulldown.prototype.renderData=function(data){this.renderedItems=[];this.iNow=0;if(data&&data.length>0){var $ul=$("<ul></ul>");for(var i=0,len=data.length;i<len;i++){var item=data[i];var showTxt=this.opts.fn1?this.opts.fn1(item):"<span title='"+item[this.opts.simpleData.name]+"'>"+item[this.opts.simpleData.name]+"</span><span class='right' title='"+item.py+"'>"+item.py+"</span>";var $li=$('<li class="'+(i==0?"active":"")+'"><label class="clearfix">'+showTxt+'</label></li>');$ul.append($li);$li.data("index",i);this.renderedItems.push({"data":item,"$node":$li});}
this.$content.html("").append($ul);}else{this.$content.html("").append('<p class="pulldown-message">抱歉！没有找到相应数据。</p>');}
if(this.opts._hasPage_&&!this.isBindedEvent){this.$toolbar=$('<div class="toolbar"></div>');this.$prevBtn=$('<a class="prev" href="javascript:void(0)">上一页</a>');this.$nextBtn=$('<a class="next" href="javascript:void(0)">下一页</a>');this.$toolbar.append(this.$prevBtn).append(this.$nextBtn);this.$container.append(this.$toolbar);}
if(this.opts._hasPage_)this.listenBtnState();if(!this.isBindedEvent)this.bindEvent();if(this.opts.freeBinding){this.show();}};Pulldown.prototype.loadStaticData=function(){this.filterStaticData();var startIndex=(this.currentPage-1)*this.opts.pageSize;var data=this.data.slice(startIndex,startIndex+this.opts.pageSize);var _this=this;_this.renderData(data);};Pulldown.prototype.reloadData=function(isResetPage,immediate){this.immediate=immediate;if(isResetPage)this.currentPage=1;if(this.opts.dataType==="dynamic"){this.loadDynamicData();}else{this.loadStaticData();}};Pulldown.prototype.filterStaticData=function(){var qStr=this.clearInput?"":$.trim(this.$elem.val());this.clearInput=false;var tempArr=this.originData;tempArr=[];for(var i=0,len=this.originData.length;i<len;i++){var item=this.originData[i];var result=this.filterFn.call(this,item,qStr,this.pId);if(result===-1)continue;item.sortIndex=result;tempArr.push(item);}
if(qStr){tempArr.sort(function(item1,item2){return item1.sortIndex-item2.sortIndex;});}
this.data=tempArr;this.totalNum=this.data.length;this.isExist=this.totalNum?true:false;}
Pulldown.prototype.show=function(){if(this.opts.readOnlyHide&&this.elem.readOnly)return;if(this.isShow)return;if(this.opts.showAndReload){this.clearInput=true;this.reloadData(true);}
var pointer=this.$elem.offset();this.setPos()
this.$container.css("visibility","visible");this.isShow=true;};Pulldown.prototype.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iTop=pointer.top+this.$elem.outerHeight();iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop});};Pulldown.prototype.hide=function(autoSetValue){if(!this.isShow)return;this.$container.css("visibility","hidden");this.isShow=false;if(this.$elem.val()===this.opts.allCheck){this.$hiddenInput.val(this.opts.allCheck);this.setValue(this.opts.allCheck);}else if((this.isExist===false||this.$elem.val()==="")&&this.opts.autoClear){this.$elem.val("");this.$hiddenInput.val("");this.setValue({});}
if(autoSetValue&&this.renderedItems.length>0&&this.$elem.val()!==""){this.setValue(this.renderedItems[0].data);}};Pulldown.prototype.destroy=function(){this.$container.remove();this.$elem.off("click").off("keyup");};Pulldown.prototype.bindEvent=function(){this.isBindedEvent=true;var _this=this;if(this.opts._hasPage_){this.$prevBtn.on("click",function(ev){_this.prevBtnHandler.call(_this,ev);return false;});this.$nextBtn.on("click",function(ev){_this.nextBtnHandler.call(_this,ev);return false;});}
this.$container.on("mouseenter","li",function(){_this.renderedItems[_this.iNow].$node.removeClass("active");$(this).addClass("active");_this.iNow=$(this).data("index");});this.$container.on("mousedown",function(ev){if(document.all&&!document.addEventListener){_this.$container[0].setCapture&&_this.$container[0].setCapture();}
return false;}).on("click","li",function(){_this.setValue(_this.renderedItems[$(this).data("index")].data);}).on("mouseup",function(ev){_this.$container[0].releaseCapture&&_this.$container[0].releaseCapture();});this.$elem.on("blur",function(){_this.hide.call(_this,_this.opts.autoSetValue);}).on("click",function(){if($(this).val())$(this).select();});};Pulldown.prototype.elemKeyUpHandler=function(ev){var _this=this;this.$elem.removeClass("placeholder");if(this.data&&this.data.length){if(ev.keyCode===8)this.$hiddenInput.val("");if(ev.keyCode===13){this.setValue(this.renderedItems[this.iNow].data);}else if(ev.keyCode===37){this.prevBtnHandler(ev);}else if(ev.keyCode===38){this.slideHandler(-1);}else if(ev.keyCode===39){this.nextBtnHandler(ev);}else if(ev.keyCode===40){this.slideHandler(1);}else{if(this.timer)window.clearTimeout(this.timer);this.timer=window.setTimeout(deepBind(this,load),this.opts.defer);}}else{if(this.timer)window.clearTimeout(this.timer);this.timer=window.setTimeout(deepBind(this,load),this.opts.defer);}
function load(){if(this.opts["_usetype_"]==="single"||this.$elem.val()){this.reloadData(true);if(this.$elem.is(":focus"))this.show();}else{window.clearTimeout(this.timer);}}};Pulldown.prototype.slideHandler=function(value){if(this.iNow===0&&value===-1)return;if(this.iNow===this.renderedItems.length-1&&value===1)return;this.renderedItems[this.iNow].$node.removeClass("active");this.iNow+=value;this.renderedItems[this.iNow].$node.addClass("active");};Pulldown.prototype.elemClickHandler=function(ev){var _this=this;if(this.elemBeforeClick){var _this=this;window.setTimeout(function(){if(_this.elemBeforeClick(_this)){if(_this.opts.dataType==="dynamic"&&(_this.opts.hideIfNone&&(!_this.data||_this.originData.length==0))){return;}
_this.show();}},1);}else{if(_this.opts.dataType==="dynamic"&&(_this.opts.hideIfNone&&(!_this.data||_this.originData.length==0))){return;}
this.show();}};Pulldown.prototype.prevBtnHandler=function(ev){if(this.$prevBtn.isDisabled)return;Pulldown.stopEvent(ev);this.currentPage=this.currentPage-1;this.reloadData();};Pulldown.prototype.nextBtnHandler=function(ev){if(this.$nextBtn.isDisabled)return;Pulldown.stopEvent(ev);this.currentPage=this.currentPage+1;this.reloadData();};Pulldown.prototype.setValue=function(data){if(!(data[this.opts.simpleData.id]&&data[this.opts.simpleData.name])){this.hide();}else if(typeof data==="object"){this.$elem.val(data[this.opts.simpleData.name]||"");this.$hiddenInput.val(data[this.opts.simpleData.id]||"");this.currentPage=1;this.loadStaticData();this.hide();}
if(this.cbFn)this.cbFn(data);};Pulldown.prototype.listenBtnState=function(){if(this.currentPage<=1){this.$prevBtn.isDisabled=true;this.$prevBtn.addClass("disable");}else{this.$prevBtn.isDisabled=false;this.$prevBtn.removeClass("disable");}
var lastPage=Math.ceil(this.totalNum/this.opts.pageSize);if(this.currentPage>=lastPage){this.$nextBtn.isDisabled=true;this.$nextBtn.addClass("disable");}else{this.$nextBtn.isDisabled=false;this.$nextBtn.removeClass("disable");}};Pulldown.stopEvent=function(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelbubble=true;};Pulldown.concatArr=function(arr1,arr2){for(var i=0;i<arr2.length;i++){arr1.push(arr2[i]);}
return arr1;};function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}})(jQuery,window,document);;(function($,window,document){$.fn.addPulldown2=function(args1){if(this.length==0)throw new Error("DOM绑定错误");var oInput=this.get(0);if(args1.options.usetype!=="composite"){manager.clear(oInput);}
var pulldown2=new Pulldown2(oInput,args1.options,args1.filterFn,args1.cbFn,args1.elemBeforeClick);if(args1.options.usetype!=="composite"){$(this).on("click",itemClickHandler);$(this).on("keyup",itemKeyUpHandler);manager.addEvent(pulldown2.id,"click",itemClickHandler);manager.addEvent(pulldown2.id,"keyup",itemKeyUpHandler);}
return pulldown2;}
function itemClickHandler(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var pulldown=manager.getComponent(target.getAttribute("vetech-ids"))
pulldown&&pulldown.show();}
function itemKeyUpHandler(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var pulldown=manager.getComponent(target.getAttribute("vetech-ids"))
if(target.value==''){pulldown&&pulldown.hide();}else{pulldown&&pulldown.elemKeyUpHandler(event);}}
$.fn.addPulldown2.options={width:200,simpleData:{id:"id",name:"name"},clearVal:true,title:"可输入拼音、汉字、三字码",type:3,typeValue:null,hiddenName:null,dataType:"static",qUrl:"",pageSize:10,autoSetValue:true,allCheck:null,showOnlyOne:true,touchBlur:false,"_usetype_":"single","_openFilter_":true,"_hasPage_":true,defer:10,autoClear:true,pId:null,selectWay:"isPulldown",fn1:null};function Pulldown2(elem,options,filterFn,cbFn,elemBeforeClick){this.id="vetech-pulldown2-"+new String(Math.random()).substring("2");this.elem=elem;this.elem.count++;this.$elem=$(elem);this.$elem.attr("autocomplete","off");this.opts=$.extend({},$.fn.addPulldown2.options,options);this.cbFn=cbFn;this.filterFn=filterFn;this.elemBeforeClick=elemBeforeClick;this.isFirstLoad=true;if(!(this.filterFn&&Object.prototype.toString.call(this.filterFn)==="[object Function]")){throw new Error("自定义过滤函数必须要配置，Pulldown2第三个参数为filterFn");}
if(!(this.opts.fn0&&Object.prototype.toString.call(this.opts.fn0)==="[object Function]"))this.opts.fn0=null;if(!(this.opts.fn1&&Object.prototype.toString.call(this.opts.fn1)==="[object Function]"))this.opts.fn1=null;if(!(this.opts.fn2&&Object.prototype.toString.call(this.opts.fn2)==="[object Function]"))this.opts.fn2=null;if(!this.opts.hiddenName)this.opts.hiddenName=this.elem.id+"-hiddenInput";this.$hiddenInput=$(document.body).find("#"+this.opts.hiddenName);if(!this.$hiddenInput.length){this.$hiddenInput=$("<input type='hidden' id='"+this.opts.hiddenName+"' name='"+this.opts.hiddenName+"'/>")
this.$elem.parent().append(this.$hiddenInput);}
this.data=[];this.originData=[];this.currentPage=1;this.totalNum=0;this.renderedItems=[];this.iNow=0;this.timer=null;this.isShow=false;this.pId=this.opts.pId;this.isBindedEvent=false;manager.manage(this);this.init();}
Pulldown2.prototype.init=function(){this.$container=$('<div class="vetech-pulldown-container"></div>');this.$container.css({"visibility":"hidden","width":this.opts.width});this.$title=$('<div class="title">'+this.opts.title+'</div>');this.$content=$('<div class="content"></div>');this.$container.append(this.$title).append(this.$content);$(document.body).append(this.$container);if(this.opts.dataType==="dynamic"){if(!$.isBlank(this.$hiddenInput.val()))
this.loadDynamicData();}else{this.loadData();}};Pulldown2.prototype.loadData=function(){var loadType=this.opts.type,typeValue=this.opts.typeValue;var _this=this;if("1"==loadType){this.formartData(typeValue,"static");}else{var url="2"==loadType?typeValue:"/component/data/pulldown.data.js";$.ajax({type:"get",url:url,dataType:"json",success:function(data){_this.formartData(data,"static");}});}};Pulldown2.prototype.loadDynamicData=function(){var qStr=$.trim(this.$elem.val());var url=this.opts.typeValue,_this=this;if(url.indexOf("?")>-1){url+="&pageSize="+this.opts.pageSize+"&currentPage="+this.currentPage+"&qStr="+(qStr?encodeURIComponent(qStr):"");}else{url+="?pageSize="+this.opts.pageSize+"&currentPage="+this.currentPage+"&qStr="+(qStr?encodeURIComponent(qStr):"");}
if(this.$hiddenInput.val()&&this.isFirstLoad){url+="&id="+this.$hiddenInput.val();}
this.ajax&&this.ajax.abort();this.ajax=$.ajax({type:"get",url:url,dataType:"json",success:function(data){_this.formartData(data,"dynamic");if(_this.immediate){_this.show();_this.immediate=null;}}});};Pulldown2.prototype.formartData=function(data,from){if("static"===from){this.data=data;this.originData=this.data;this.totalNum=this.data.length;this.writeValue();this.loadStaticData();}else{this.totalNum=data.totalNum;this.isExist=this.totalNum?true:false;this.data=data.data;this.originData=this.data;this.renderData(this.data);if(this.isFirstLoad){this.writeValue();this.isFirstLoad=false;}}};Pulldown2.prototype.writeValue=function(){if(this.opts.selectWay!=="isPulldown")return;if(!this.$hiddenInput.val())return;for(var i=0,len=this.data.length;i<len;i++){if(this.$hiddenInput.val()===this.data[i][this.opts.simpleData.id]){this.$elem.val(this.data[i][this.opts.simpleData.name]);break;}}};Pulldown2.prototype.setPid=function(pId){this.pId=pId;};Pulldown2.prototype.renderData=function(data){if(!data&&Object.prototype.toString.call(data)!=="[object Array]")return;var zt=false;if(this.opts.fn0){zt=this.opts.fn0(data);}
this.renderedItems=[];this.iNow=0;var $ul=$("<ul></ul>");for(var i=0,len=data.length;i<len;i++){var item=data[i];var showTxt=this.opts.fn1?this.opts.fn1(item):"<span title='"+item.name+"'>"+item.name+"</span><span class='right' title='"+item.py+"'>"+item.py+"</span>";var $li=$('<li class="'+(i==(zt?1:0)?"active":"")+'"><label class="clearfix">'+showTxt+'</label></li>');$ul.append($li);$li.data("index",i);this.renderedItems.push({"data":item,"$node":$li});}
if($ul.find('span').attr('iscity')){$ul.find('li').each(function(index,item){if($(item).find('span').attr('iscity'))$ul.find('li').eq(index).css('background','#F3F2F7');})}
this.$content.html("").append($ul);if(this.opts._hasPage_&&!this.isBindedEvent){if(this.$toolbar)this.$toolbar.remove();this.$toolbar=$('<div class="toolbar"></div>');this.$prevBtn=$('<a class="prev" href="javascript:void(0)">上一页</a>');this.$nextBtn=$('<a class="next" href="javascript:void(0)">下一页</a>');this.$toolbar.append(this.$prevBtn).append(this.$nextBtn);this.$container.append(this.$toolbar);}
if(this.opts._hasPage_)this.listenBtnState();if(!this.isBindedEvent)this.bindEvent();};Pulldown2.prototype.loadStaticData=function(){this.filterStaticData();var startIndex=(this.currentPage-1)*this.opts.pageSize;var data=this.data.slice(startIndex,startIndex+this.opts.pageSize);var _this=this;_this.renderData(data);};Pulldown2.prototype.reloadData=function(isResetPage,immediate){this.immediate=immediate;if(isResetPage)this.currentPage=1;if(this.opts.dataType==="dynamic"){this.loadDynamicData();}else{this.loadStaticData();}};Pulldown2.prototype.filterStaticData=function(){var qStr=$.trim(this.$elem.val());var tempArr=[];for(var i=0,len=this.originData.length;i<len;i++){var item=this.originData[i];var result=this.filterFn(item,qStr,this.pId);if(result===-1)continue;item.sortIndex=result;tempArr.push(item);}
tempArr.sort(function(item1,item2){return item1.sortIndex-item2.sortIndex;});this.data=tempArr;this.totalNum=this.data.length;this.isExist=this.totalNum?true:false;}
Pulldown2.prototype.show=function(){if(this.elem.readOnly)return;if(this.isShow)return;if(this.data.length===0)this.reloadData(true);var pointer=this.$elem.offset();this.setPos();this.$container.css("visibility","visible");this.isShow=true;};Pulldown2.prototype.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iHeight=$(document).outerHeight(),iLeft=0,iTop=pointer.top+this.$elem.outerHeight();iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop});};Pulldown2.prototype.hide=function(autoSetValue){if(!this.isShow)return;this.$container.css("visibility","hidden");this.isShow=false;if(this.$elem.val()===this.opts.allCheck){this.$hiddenInput.val(this.opts.allCheck);this.setValue(this.opts.allCheck);}else if((this.isExist===false||this.$elem.val()==="")&&this.opts.autoClear){this.$elem.val("");this.$hiddenInput.val("");this.setValue({});}
if(autoSetValue&&this.renderedItems.length>0&&this.$elem.val()!==""){this.setValue(this.renderedItems[0].data);}
this.opts.touchBlur&&this.$elem.blur();};Pulldown2.prototype.destroy=function(){this.$container.remove();if(this.opts.clearVal){this.$elem.val("");this.$hiddenInput&&(this.$hiddenInput.val(""));}}
Pulldown2.prototype.bindEvent=function(){this.isBindedEvent=true;var _this=this;if(this.opts._hasPage_){this.$prevBtn.on("click",function(ev){_this.prevBtnHandler.call(_this,ev);});this.$nextBtn.on("click",function(ev){_this.nextBtnHandler.call(_this,ev);});}
this.$container.on("mouseenter","li",function(){_this.renderedItems[_this.iNow].$node.removeClass("active");if(!$(this).find('span').attr('iscity')){$(this).addClass("active");}
_this.iNow=$(this).data("index");});this.$container.on("mousedown",function(ev){debugger
ev.preventDefault();ev.stopPropagation();if(document.all&&!document.addEventListener){_this.$container[0].setCapture&&_this.$container[0].setCapture();}
return false;}).on("click","li",function(ev){if($(this).find('span').attr('iscity')){return;}
_this.setValue(_this.renderedItems[$(this).data("index")].data);}).on("mouseup",function(ev){_this.$container[0].releaseCapture&&_this.$container[0].releaseCapture();});this.$elem.on("blur",function(){_this.hide.call(_this,_this.opts.autoSetValue);}).on("click",function(){if($(this).val())$(this).select();});};Pulldown2.prototype.elemKeyUpHandler=function(ev,immediate){var _this=this;if(this.data&&this.data.length){if(this.renderedItems[this.iNow].$node.find('span').attr('iscity')){this.iNow=1;}
if(ev.keyCode===8)this.$hiddenInput.val("");if(ev.keyCode===13){this.setValue(this.renderedItems[this.iNow].data);}else if(ev.keyCode===37){this.prevBtnHandler(ev);}else if(ev.keyCode===38){debugger;this.slideHandler(-1);}else if(ev.keyCode===39){this.nextBtnHandler(ev);}else if(ev.keyCode===40){this.slideHandler(1);}else{if(this.timer)window.clearTimeout(this.timer);this.timer=window.setTimeout(deepBind(this,load),this.opts.defer);}}else{if(this.timer)window.clearTimeout(this.timer);this.timer=window.setTimeout(deepBind(this,load),this.opts.defer);}
function load(){if(this.opts["_usetype_"]==="single"||this.$elem.val()){this.reloadData(true,immediate);if(this.$elem.is(":focus"))this.show();}else{window.clearTimeout(this.timer);}}};Pulldown2.prototype.slideHandler=function(value){var i=0;if(this.iNow===1){if(this.renderedItems[this.iNow-1].$node.find('span').attr('iscity'))i=1;}
if(this.iNow===i&&value===-1)return;if(this.iNow===this.renderedItems.length-1&&value===1)return;this.renderedItems[this.iNow].$node.removeClass("active");this.iNow+=value;if(!this.renderedItems[this.iNow].$node.find('span').attr('iscity')){this.renderedItems[this.iNow].$node.addClass("active");}};Pulldown2.prototype.elemClickHandler=function(ev){if(this.elemBeforeClick){var _this=this;window.setTimeout(function(){if(_this.elemBeforeClick(_this)){_this.show();}},1);}else{this.show();}};Pulldown2.prototype.prevBtnHandler=function(ev){if(this.$prevBtn.isDisabled)return;Pulldown2.stopEvent(ev);this.currentPage=this.currentPage-1;this.reloadData();};Pulldown2.prototype.nextBtnHandler=function(ev){if(this.$nextBtn.isDisabled)return;Pulldown2.stopEvent(ev);this.currentPage=this.currentPage+1;this.reloadData();};Pulldown2.prototype.setValue=function(data){if(!(data[this.opts.simpleData.id]&&data[this.opts.simpleData.name])){this.hide();}else if(typeof data==="object"){this.$elem.val(data[this.opts.simpleData.name]||"");this.$hiddenInput.val(data[this.opts.simpleData.id]||"");this.currentPage=1;this.loadStaticData();this.hide();}
if(this.cbFn)this.cbFn(data);};Pulldown2.prototype.listenBtnState=function(){if(this.currentPage<=1){this.$prevBtn.isDisabled=true;this.$prevBtn.addClass("disable");}else{this.$prevBtn.isDisabled=false;this.$prevBtn.removeClass("disable");}
var lastPage=Math.ceil(this.totalNum/this.opts.pageSize);if(this.currentPage>=lastPage){this.$nextBtn.isDisabled=true;this.$nextBtn.addClass("disable");}else{this.$nextBtn.isDisabled=false;this.$nextBtn.removeClass("disable");}};Pulldown2.stopEvent=function(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelbubble=true;};Pulldown2.concatArr=function(arr1,arr2){for(var i=0;i<arr2.length;i++){arr1.push(arr2[i]);}
return arr1;};function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}})(jQuery,window,document);(function(){var defautOpts={totalTime:60,startTxt:"启",stopTxt:"停",tips:"60秒后自动刷新",refreshTxt:"手动刷新",refreshFn:function(){}};function Refresh(elem,options){this.id="Refresh"+String(Math.random());this.elem=elem;this.$elem=$(elem);this.timer=null;this.state="start";this.opts=$.extend(true,{},defautOpts,options);this.currTime=this.opts.totalTime;this.render();}
Refresh.prototype.render=function(){this.$container=$('<div class="refresh-container">'+'<span class="clock">'+this.currTime+'</span>'+'<input type="button" class="btn operateBtn stop"  title="'+this.opts.stopTxt+'">'+'<input type="button" class="btn refreshBtn" title="'+this.opts.refreshTxt+'">');this.$elem.append(this.$container);this.init();this.bindEvent();};Refresh.prototype.init=function(){this.timer&&clearInterval(this.timer);var _this=this;this.update();this.timer=setInterval(function(){_this.currTime--;_this.update();},1000);};Refresh.prototype.start=function(){this.state="start";this.$container.find(".operateBtn").attr("title",this.opts.stopTxt).removeClass("star").addClass("stop");this.init();};Refresh.prototype.stop=function(){clearInterval(this.timer);this.state="stop";this.$container.find(".operateBtn").attr("title",this.opts.startTxt).removeClass("stop").addClass("start");};Refresh.prototype.update=function(){if(this.currTime<=0){this.currTime=this.opts.totalTime;if(this.opts.cbFn)this.opts.cbFn();this.init();}else{this.$container.find(".clock").html(this.currTime);}};Refresh.prototype.reset=function(){this.state="start";this.currTime=this.opts.totalTime;this.$container.find("input").val(this.opts.stopTxt);this.init();};Refresh.prototype.bindEvent=function(){var _this=this;this.$container.on("click.Refresh","input",function(){var $btn=$(this);if($btn.hasClass("operateBtn")){if(_this.state==="start"){_this.stop();}else{_this.start();}}else{_this.opts.refreshFn();}});};Refresh.prototype.destroy=function(){this.off(".Refresh");this.$container.remove();};window.Refresh=Refresh;})(jQuery,window,document);;(function($){$.fn.repairOrder=function(snCol,wCol){var $tbody=$(this).find("tbody");$tbody.find("tr").each(function(){var $tr=$(this);$tr.find("td").eq(snCol).find("input").on("blur",$.proxy(inputBlurHandler,null,$tr));});function inputBlurHandler($tr){var value=$(this).val();if(isNaN(value))return;var columnName=$tr.find("td").eq(wCol).find("input").val();var names=columnName.split("_");var $tempTr=$tbody.find("tr").eq(value-1);var newColumnName=$tempTr.find("td").eq(wCol).find("input").val();var newNames=newColumnName.split("_");if($tempTr.length){if(names.length===2){if(newNames.length===1||newNames[0]!==names[0]){$(this).val("");}}else{if(newNames.length===2)$(this).val("");}}}}})(jQuery);;(function($,window,document){$.fn.addVetechScope=function(options,cbFn){if(!this.length)throw new Error("DOM绑定失败，请确认页面是否加载完毕！");var oDiv=this.get(0);var vScope=new VetechSpace(oDiv,options,cbFn);return vScope;};$.fn.addVetechScope.options={simpleData:{id:"id",name:"name"},checkedFirst:false};function VetechSpace(elem,options,cbFn){this.id="vetech-scope-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.addVetechScope.options,options);this.cbFn=cbFn||function(){};this.$hiddenInput=$("#"+this.opts.hiddenName);this.init();}
var fn=VetechSpace.prototype;fn.init=function(){this.$container=$('<div class="vetech-scope"></div>');this.$elem.append(this.$container);this.loadData();this.bindEvent();};fn.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};fn.render=function(){if(!(this.data&&this.data.length&&Object.prototype.toString.call(this.data)==="[object Array]"))return;for(var i=0,len=this.data.length;i<len;i++){this.addItem(this.data[i],(this.opts.checkedFirst&&i===0)?true:false);}};fn.addItem=function(data,isActive){var tempId=data[this.opts.simpleData.id];var $span=$('<span id="'+tempId+'">'+data[this.opts.simpleData.name]+'</span>');this.$container.append($span);$span.data("data",data);if(isActive||this.opts.defaultValue===tempId){$span.addClass("active");this.$hiddenInput.val(tempId);}};fn.bindEvent=function(){var _this=this;this.$container.on("click","span",function(){var data=$(this).data("data");_this.$container.find("span").removeClass("active");$(this).addClass("active");_this.$hiddenInput.val(data[_this.opts.simpleData.id]);_this.cbFn(data);});};})(jQuery,window,document);;(function($,window,document){$.fn.addSlider=function(options,cbFn){if(!this.length)throw new Error("DOM绑定错误!");var slider=new Slider(this.get(0),options,cbFn);};$.fn.addSlider.options={minSplit:10,autoPlay:true,defer:2000,bigImg:null,smallImg:null,showTitle:true,isHaveLayer:false};function Slider(elem,options,cbFn){this.id="vetech-slider-"+String(Math.random()).substring(2);this.$elem=$(elem);this.opts=$.extend({},$.fn.addSlider.options,options);this.cbFn=cbFn;this.bigImg={w:0,h:0};this.smallImg={w:0,h:0};this.iNow=0;this.isShow=false;this.timer={};this.iSpeed=1;this.isMoving=false;this.loadData();this.isAotuplay=false};Slider.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};Slider.prototype.render=function(){if(!this.data.length)return;this.$container=$('<div class="slider-container"></div>');this.$bigContainer=$('<div class="big-container"></div>');this.$prevBtn=$('<span class="ve-btn prev"></span>');this.$nextBtn=$('<span class="ve-btn next"></span>');this.$titlePanel=$('<div class="title"></div>');if(!this.opts.showTitle)this.$titlePanel.css("display","none");this.$smallContainer=$('<div class="small-container"></div>');this.$bigContainer.append(this.$prevBtn).append(this.$nextBtn).append(this.$titlePanel);this.$container.append(this.$bigContainer).append(this.$smallContainer);this.$elem.append(this.$container);var _this=this;this.$layerBox=$("<div class='slider-container-layer-box'></div>");this.$layer=$('<div class="slider-layer"></div>');var $img=$("<img/>")
var $closeBtn=$("<span>X</span>")
this.$layer.append($img);this.$layer.append($closeBtn);this.$layerBox.append(this.$layer);$(document.body).append(this.$layerBox);if(this.opts.bigImg&&this.opts.smallImg){this.bigImg=this.opts.bigImg;this.smallImg=this.opts.smallImg;this.renderData();}else{this.calcImgWidthAndHeight(function(){_this.renderData.call(_this);});}};Slider.prototype.renderData=function(){var $bigUl=$('<ul class="active"></ul>'),$smallUl=$('<ul class="active"></ul>');this.iMargin=this.calcThumbSpace();this.calcArea();for(var i=0,len=this.data.length;i<len;i++){if(this.data[i].sUrl&&this.data[i].bUrl){var $bigLi=$('<li data-index="'+i+'"><img style="width:'+this.bigImg.w+'px;height:'+this.bigImg.h+'px;cursor:pointer" src="'+this.data[i].bUrl+'"  onerror="picError()"  /></li>');var $smallLi=$('<li class="thumb" data-index="'+i+'"><img style="width:'+this.smallImg.w+'px;height:'+this.smallImg.h+'px;" src="'+this.data[i].sUrl+'"  onerror="picError()"  /></li>');}else{var $bigLi=$('<li data-index="'+i+'"><img style="width:'+this.bigImg.w+'px;height:'+this.bigImg.h+'px;" src="'+Slider.notPic+'"  /></li>');var $smallLi=$('<li class="thumb" data-index="'+i+'"><img style="width:'+this.smallImg.w+'px;height:'+this.smallImg.h+'px;" src="'+Slider.notPic+'" /></li>');}
$smallLi.css({width:this.smallImg.w,margin:"0 "+this.iMargin/2+"px"});var $span=$('<span></span>');$span.css({width:this.smallImg.w-2,height:this.smallImg.h-2});$smallLi.append($span);$bigUl.append($bigLi);$smallUl.append($smallLi);}
$bigUl.css({height:this.bigImg.h,width:this.bigImg.w*this.data.length});$smallUl.css({height:this.smallImg.h,width:(this.smallImg.w+this.iMargin)*this.data.length});this.$bigContainer.append($bigUl);this.$smallContainer.append($smallUl);this.switchHandler(this.iNow);this.bindEvent();this.picLength=$bigUl.find("li").length;if(this.opts.autoPlay&&this.picLength>1)this.autoPlay();};Slider.prototype.show=function(){this.isShow=true;this.$container.css("visibility","visible");};Slider.prototype.calcThumbSpace=function(){var showNum=parseInt(this.bigImg.w/this.smallImg.w);var calc=function(showNum){var spaceWidth=this.bigImg.w-(showNum*this.smallImg.w);if(spaceWidth<(this.opts.minSplit*showNum)){return arguments.callee.call(this,showNum-1);}
return spaceWidth/showNum;}
var result=calc.call(this,showNum);return result;};Slider.prototype.calcArea=function(){this.$container.css({width:this.bigImg.w,height:(this.bigImg.h+this.smallImg.h+20)});this.$bigContainer.css({height:this.bigImg.h});this.$smallContainer.css({height:this.smallImg.h});this.calcBtnPos();};Slider.prototype.calcImgWidthAndHeight=function(callback){var oBigImg=document.createElement("img");var _this=this;oBigImg.onload=function(){_this.bigImg={w:this.width,h:this.height};var oSmallImg=document.createElement("img");oSmallImg.onload=function(){_this.smallImg={w:this.width,h:this.height};callback();};oSmallImg.onerror=function(){throw new Error("图片路径不正确");};oSmallImg.src=_this.data[0].sUrl;};oBigImg.onerror=function(){throw new Error("图片路径不正确");};oBigImg.src=this.data[0].bUrl;};Slider.prototype.calcBtnPos=function(){var $btn=this.$bigContainer.find(".ve-btn");$btn.css("top",(this.bigImg.h-$btn.get(0).offsetHeight)/2);};Slider.prototype.bindEvent=function(){var _this=this;this.$container.on("click",function(ev){ev=ev||window.event;var target=ev.target||ev.srcElement;if($(target).hasClass("ve-btn")){_this.operateHandler.call(_this,target);}else if($(target).parent().hasClass("thumb")){var index=$(target).parent().attr('data-index');_this.switchHandler.call(_this,parseInt(index));}else if($(target).is("img")&&$(target).parents().hasClass("big-container")){var tarWidth=_this.getNaturalSize(target);var imgSrc=$(target).attr("src");_this.$layer.find("img").attr("src",imgSrc);var $imgWidth=tarWidth>800?800:tarWidth;_this.isAotuplay=true;_this.showLayer($imgWidth);}else if($(target).parents().hasClass("big-container")){_this.cbFn&&_this.cbFn(_this.data[_this.iNow]);}});this.$container.on("mouseenter",function(){_this.stopAutoPlay.call(_this);}).on("mouseleave",function(){if(!_this.isAotuplay&&_this.opts.autoPlay&&_this.picLength>1)_this.autoPlay.call(_this);});this.$layer.find("span").on("click",function(ev){_this.stopEvent(ev);_this.closeLayer();if(_this.opts.autoPlay&&_this.picLength>1)_this.autoPlay.call(_this);_this.isAotuplay=false;})};Slider.prototype.getNaturalSize=function(dom){var img=new Image();img.src=dom.src;return img.width;}
Slider.prototype.stopEvent=function(ev){var ev=window.event||ev;if(ev.stopPropagation){ev.stopPropagation()}else{ev.cancelBubble=true;}}
Slider.prototype.closeLayer=function(){this.$layerBox.hide();};Slider.prototype.showLayer=function(imgWidth){if(this.opts.isHaveLayer){this.stopAutoPlay();this.layerPos(imgWidth);this.$layerBox.show();}};Slider.prototype.layerPos=function(imgWidth){var pos=this.$container.offset();var layerTopBoder=parseInt(this.$layer.css("border-top-width"));this.$layer.css({"top":pos.top-layerTopBoder,"left":"50%","margin-left":-imgWidth/2-4,"width":imgWidth});}
Slider.prototype.operateHandler=function(target){if($(target).hasClass("prev")&&this.iNow!==0){this.switchHandler(this.iNow-1);}
if($(target).hasClass("next")&&this.iNow!==this.data.length-1){this.switchHandler(this.iNow+1);}};Slider.prototype.switchHandler=function(index){if(this.isMoving)return;this.isMoving=true;var _this=this;var $bigUl=this.$container.find(".big-container>ul");var $smallUl=this.$smallContainer.find("ul");$bigUl.animate({left:String(-this.bigImg.w*index)},function(){_this.$titlePanel.html(_this.data[index].title);moveThumb.call(_this);});function moveThumb(){var _this=this;var $lis=this.$smallContainer.find("li");$lis.eq(this.iNow).removeClass("active");$lis.eq(index).addClass("active");var oSmallUl=this.$smallContainer.find("ul").get(0);var iLeft=oSmallUl.offsetLeft-(this.smallImg.w+this.iMargin)*(index-this.iNow),iMin=this.$smallContainer.get(0).offsetWidth-oSmallUl.offsetWidth;if(iLeft>=0)iLeft=0;if(iLeft<=iMin)iLeft=iMin;if(this.$smallContainer.get(0).offsetWidth-oSmallUl.offsetWidth>0)iLeft=iMin/2;$smallUl.animate({left:String(iLeft)},"fast",function(){_this.iNow=index;_this.isMoving=false;});}};Slider.prototype.autoPlay=function(){var _this=this;this.timer=setInterval(function(){if(_this.iNow>=_this.data.length-1)_this.iNow=-1;_this.switchHandler.call(_this,_this.iNow+_this.iSpeed);},this.opts.defer);};Slider.prototype.stopAutoPlay=function(){if(this.timer)clearInterval(this.timer);};function picError(){this.src=Slider.notPic;};function fnBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(){fn.apply(object,args);}}
Slider.notPic="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACICAIAAACz2DQFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjQyRjQ5NzBDQ0FDMTFFNkE2NEJDQzQ5QjdCOTEyNDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjQyRjQ5NkZDQ0FDMTFFNkE2NEJDQzQ5QjdCOTEyNDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjU5MjA4QUNDQ0FCMTFFNjg2MDFFMDBENTNCMDg3QTYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjU5MjA4QURDQ0FCMTFFNjg2MDFFMDBENTNCMDg3QTYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Mt3lcAAAO80lEQVR42uyd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";})(jQuery,window,document);;(function($,window,document){$.fn.showSliderOther=function(options,cbFn){if(!this.length)throw new Error("DOM绑定错误!");var sliderother=new SliderOther(this.get(0),options,cbFn);return sliderother;};var defaultOpts={autoPlay:true,defer:2000,bigImg:null,smallImg:null,crossNum:2,showGroup:true,isHaveLayer:true};function SliderOther(elem,options,cbFn){this.id="vetech-sliderOther-"+String(Math.random()).substring(2);this.$elem=$(elem);this.opts=$.extend({},defaultOpts,options);this.cbFn=cbFn;this.bigImg=this.opts.bigImg?this.opts.bigImg:{w:450,h:400};this.smallImg=this.opts.smallImg?this.opts.smallImg:{w:136,h:122};this.smallNum=this.opts.smallNum?this.opts.smallNum:{cross:2,vertical:3};this.iMargin=this.opts.iMargin||11;this.iNow=0;this.isShow=false;this.timer={};this.iSpeed=1;this.isMoving=false;this.loadData();this.isAotuplay=false;}
var fn=SliderOther.prototype;fn.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};fn.render=function(){if(!this.data.length)return;this.$container=$('<div class="sliderother-container"></div>');this.$bigContainer=$('<div class="big-container"></div>');this.$bigPrevBtn=$('<span class="big-slider-btn big-prev iconvet icon-b-left"></span>');this.$bigNextBtn=$('<span class="big-slider-btn big-next iconvet icon-b-right"></span>');this.$smallContainer=$('<div class="small-container"></div>');this.$smallPrevBtn=$('<span class="small-slider-btn small-prev iconvet icon-b-up" style="left:'+this.iMargin+'px"></span>');this.$smallNextBtn=$('<span class="small-slider-btn small-next iconvet icon-b-down" style="left:'+this.iMargin+'px"></span>');this.$listgroup=$('<div class="listgroup"></div>');if(this.opts.showGroup){this.$listgroup.css("display","block");}
this.$bigContainer.append(this.$bigPrevBtn).append(this.$bigNextBtn).append(this.$listgroup);this.$smallContainer.append(this.$smallPrevBtn).append(this.$smallNextBtn);this.$container.append(this.$bigContainer).append(this.$smallContainer);this.$elem.append(this.$container);var _this=this;this.$layerBox=$("<div class='sliderother-container-layer-box'></div>");this.$layer=$('<div class="sliderother-layer"></div>');var $img=$("<div style='overflow: hidden;width:100%;height: 100%'><img/></div>");var $closeBtn=$("<span></span>");this.$layer.append($img).append($closeBtn);this.$layerBox.append(this.$layer);$(document.body).append(this.$layerBox);if(this.bigImg&&this.smallImg){this.$bigContainer.css({width:this.bigImg.w+"px",height:this.bigImg.h+"px",lineHeight:this.bigImg.h+"px"});this.$smallContainer.css({width:this.smallImg.w+"px",height:this.smallImg.h+"px"});this.renderData();}else{this.calcImgWidthAndHeight(function(){this.$bigContainer.css({"width":this.bigImg.w+"px",height:this.bigImg.h+"px",lineHeight:this.bigImg.h+"px"});this.$smallContainer.css({"width":this.smallImg.w+"px",height:this.smallImg.h+"px"});_this.renderData.call(_this);},this.data[0].list);}};fn.renderData=function(){this.listNum=[];var $listNav=$('<ol></ol>'),$totalbigUl=$('<ul class="bigul0 active"></ul>'),$totalsmallUl=$('<ul class="smallul0 active"></ul>'),totalNum=0;for(var i=0,len=this.data.length;i<len;i++){if(this.data[i].list&&this.data[i].list.length>0){var item=this.data[i].list,num=item.length,totalNum=totalNum+num;var $bigUl=$('<ul class="bigul'+(i+1)+'"></ul>'),$smallUl=$('<ul class="smallul'+(i+1)+'"></ul>'),$listNavli=$('<li>'+this.data[i].name+'('+num+')</li>');$listNav.append($listNavli);this.listNum.push(num);var smallW=(this.smallImg.w-this.iMargin*this.smallNum.cross)/this.smallNum.cross;var smallH=(this.smallImg.h-this.iMargin*(this.smallNum.vertical-1))/this.smallNum.vertical;for(var j=0;j<num;j++){if(item[j].sUrl&&item[j].bUrl){var $bigLi=$('<li style="width:'+this.bigImg.w+'px;height:'+this.bigImg.h+'px;" data-index="'+j+'"><img src="'+item[j].bUrl+'" /></li>');var $smallLi=$('<li style="width:'+smallW+'px;height:'+smallH+'px;margin-left:'+this.iMargin+'px;margin-bottom:'+this.iMargin+'px;" class="thumb" data-index="'+j+'"><img src="'+item[j].sUrl+'" /></li>');}else{var $bigLi=$('<li style="width:'+this.bigImg.w+'px;height:'+this.bigImg.h+'px;" data-index="'+j+'"><img src="'+SliderOther.notPic+'"  /></li>');var $smallLi=$('<li style="width:'+smallW+'px;height:'+smallH+'px;margin-left:'+this.iMargin+'px;margin-bottom:'+this.iMargin+'px;" class="thumb" data-index="'+j+'"><img src="'+SliderOther.notPic+'" /></li>');}
$bigUl.append($bigLi);$smallUl.append($smallLi);}
$totalbigUl.append($bigUl.html());$totalsmallUl.append($smallUl.html());$bigUl.css({height:this.bigImg.h,width:this.bigImg.w*this.data[i].length});$smallUl.css({height:(this.smallImg.h+this.iMargin)*parseInt(this.data[i].length/this.smallNum.cross)});this.$bigContainer.append($bigUl);this.$smallContainer.append($smallUl);}}
$listNav.prepend('<li class="active">全部('+totalNum+')</li>');$totalbigUl.css({height:this.bigImg.h,width:this.bigImg.w*totalNum});$totalsmallUl.css({height:(this.smallImg.h+this.iMargin)*totalNum/this.smallNum.cross-this.iMargin});this.$bigContainer.prepend($totalbigUl);this.$smallContainer.prepend($totalsmallUl);this.$listgroup.append($listNav);this.repairIndex();this.listNum.unshift(totalNum);this.switchHandler(this.iNow);this.bindEvent();this.itemNum=totalNum;if(this.opts.autoPlay&&totalNum>1)this.autoPlay();};fn.repairIndex=function(){this.$bigContainer.find("ul.bigul0").find("li").each(function(i,item){$(this).attr("data-index",i);});this.$smallContainer.find("ul.smallul0").find("li").each(function(i,item){$(this).attr("data-index",i);});};fn.show=function(){this.isShow=true;this.$container.css("visibility","visible");};fn.calcImgWidthAndHeight=function(callback,itemNum){var oBigImg=document.createElement("img");var _this=this;oBigImg.onload=function(){_this.bigImg={w:this.width,h:this.height};var oSmallImg=document.createElement("img");oSmallImg.onload=function(){_this.smallImg={w:this.width,h:this.height};callback();};oSmallImg.onerror=function(){throw new Error("图片路径不正确");};oSmallImg.src=itemNum[0].sUrl;};oBigImg.onerror=function(){throw new Error("图片路径不正确");};oBigImg.src=itemNum[0].bUrl;};fn.bindEvent=function(){var _this=this;this.$container.on("click",function(ev){ev=ev||window.event;var target=ev.target||ev.srcElement;var num=_this.$listgroup.find("li.active").index();if($(target).hasClass("big-slider-btn")){_this.operateBigHandler.call(_this,target,_this.listNum[num]);}else if($(target).hasClass("small-slider-btn")){_this.operateSmallHandler.call(_this,target,_this.listNum[num]);}else if($(target).parent().hasClass("thumb")){var index=$(target).parent().attr('data-index');_this.switchHandler.call(_this,parseInt(index));}else if($(target).is("img")&&$(target).parents().hasClass("big-container")){_this.getNaturalSize(target);}else if($(target).parent().parent().hasClass("listgroup")){var $allBigUl=_this.$bigContainer.find("ul"),$allSmallUl=_this.$smallContainer.find("ul");_this.$container.find("li").removeClass("active");var idex=$(target).index();$(target).addClass("active").siblings().removeClass("active");_this.iNow=0;$allBigUl.removeClass("active").end().find(".bigul"+idex).addClass("active");$allSmallUl.removeClass("active").end().find(".smallul"+idex).addClass("active");_this.switchHandler(_this.iNow);_this.itemNum=_this.listNum[idex];if(_this.opts.autoPlay&&_this.listNum[idex]>1)_this.autoPlay();}});this.$container.on("mouseenter",function(){_this.stopAutoPlay();}).on("mouseleave",function(){var num=_this.$listgroup.find("li.active").index();_this.itemNum=_this.listNum[num];if(!_this.isAotuplay&&_this.opts.autoPlay&&_this.listNum[num]>1)_this.autoPlay();});this.$layer.find("span").on("click",function(ev){_this.stopEvent(ev);_this.closeLayer();var num=_this.$listgroup.find("li.active").index();_this.itemNum=_this.listNum[num];if(_this.opts.autoPlay&&_this.listNum[num]>1)_this.autoPlay();_this.isAotuplay=false;})
this.imgAutoScale();};fn.imgAutoScale=function(){var _this=this,userAgent=navigator.userAgent;var mousewheel=userAgent.indexOf("Firefox")>-1?"DOMMouseScroll":"mousewheel";this.$layer.on("mousewheel",function(ev){var windowHeight=$(window).height();var delta=(ev.originalEvent.wheelDelta&&(ev.originalEvent.wheelDelta>0?1:-1))||(ev.originalEvent.detail&&(ev.originalEvent.detail>0?-1:1));var layerWidth=_this.$layer.outerWidth(),layerHeight=_this.$layer.outerHeight();if(delta>0&&layerWidth<670&&layerHeight<windowHeight*0.8){_this.$layer.css({"width":layerWidth*1.2,"height":layerHeight*1.2,"margin-left":-layerWidth*1.2/2,"margin-top":-layerHeight*1.2/2});_this.$layer.find("img").css({"width":"100%","height":"100%"});}else if(delta<0&&layerWidth>20){_this.$layer.css({"width":layerWidth/1.2,"height":layerHeight/1.2,"margin-left":-layerWidth/1.2/2,"margin-top":-layerHeight/1.2/2});_this.$layer.find("img").css({"width":"100%","height":"100%"});}})}
fn.getNaturalSize=function(dom){var _this=this;var img=new Image();img.src=dom.src;var imgWidth=img.width>800?800:img.width;_this.isAotuplay=true;_this.$layer.find("img")[0].src=img.src;_this.$layer.find("img")[0].onload=function(){_this.showLayer(imgWidth);}}
fn.stopEvent=function(ev){var ev=window.event||ev;if(ev.stopPropagation){ev.stopPropagation()}else{ev.cancelBubble=true;}}
fn.closeLayer=function(){this.$layerBox.css("visibility","hidden");this.$layerBox.find("img").removeAttr("style");};fn.showLayer=function(imgWidth){if(this.opts.isHaveLayer){this.stopAutoPlay();this.layerPos(imgWidth);this.$layerBox.css("visibility","visible");}};fn.layerPos=function(imgWidth){this.$layer.css({"left":"50%","margin-left":-imgWidth/2,"width":imgWidth});var widnowHeight=$(window).height(),layerHeight=this.$layer.find("img").height();var height=layerHeight>widnowHeight*0.9?widnowHeight*0.9:layerHeight;this.$layer.css({"height":height,top:"50%","margin-top":-height/2});}
fn.operateBigHandler=function(target,itemNum){if($(target).hasClass("big-prev")&&this.iNow!==0){this.switchHandler(this.iNow-1);}
if($(target).hasClass("big-next")&&this.iNow!==itemNum-1){this.switchHandler(this.iNow+1);}};fn.operateSmallHandler=function(target,itemNum){if($(target).hasClass("small-prev")&&this.iNow>=(this.smallNum.cross*this.smallNum.vertical)){this.switchHandler(this.iNow-(this.smallNum.cross*this.smallNum.vertical));}
if($(target).hasClass("small-next")&&this.iNow<=itemNum-(this.smallNum.cross*this.smallNum.vertical)){this.switchHandler(this.iNow+(this.smallNum.cross*this.smallNum.vertical));}};fn.switchHandler=function(index){if(this.isMoving)return;this.isMoving=true;var _this=this;var $bigUl=this.$container.find(".big-container>ul.active");var $smallUl=this.$smallContainer.find("ul.active");$bigUl.animate({left:String(-_this.bigImg.w*index)},function(){moveThumb.call(_this);_this.isMoving=false;_this.iNow=index;_this.$smallContainer.find("ul.active li").eq(index).addClass("active").siblings().removeClass("active");});function moveThumb(){var $lis=this.$smallContainer.find(".active li");$lis.eq(this.iNow).removeClass("active");$lis.eq(index).addClass("active");var oSmallUl=this.$smallContainer.find("ul.active").get(0);var iTop=-(this.smallImg.h+this.iMargin)*parseInt(index/(this.smallNum.cross*this.smallNum.vertical)),iHeight=this.$smallContainer.get(0).offsetHeight-oSmallUl.offsetHeight,iMin=iHeight%(this.smallImg.h+this.iMargin)===0?iHeight:parseInt(iHeight/(this.smallImg.h+this.iMargin)-1)*(this.smallImg.h+this.iMargin);if(iTop>=0||index==0)iTop=0;if(iTop<=iHeight)iTop=iMin;if(this.$smallContainer.get(0).offsetHeight-oSmallUl.offsetHeight>0)iTop=iMin/this.smallNum.cross;$smallUl.animate({top:String(iTop)},"fast");}};fn.autoPlay=function(){var _this=this;this.stopAutoPlay();this.timer=setInterval(function(){if(_this.iNow>=_this.itemNum-1)_this.iNow=-1;_this.switchHandler.call(_this,_this.iNow+_this.iSpeed);},this.opts.defer);};fn.stopAutoPlay=function(){if(this.timer)clearInterval(this.timer);};function picError(){this.src=SliderOther.notPic;}
function fnBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(){fn.apply(object,args);}}
SliderOther.notPic="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACICAIAAACz2DQFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjQyRjQ5NzBDQ0FDMTFFNkE2NEJDQzQ5QjdCOTEyNDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjQyRjQ5NkZDQ0FDMTFFNkE2NEJDQzQ5QjdCOTEyNDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjU5MjA4QUNDQ0FCMTFFNjg2MDFFMDBENTNCMDg3QTYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjU5MjA4QURDQ0FCMTFFNjg2MDFFMDBENTNCMDg3QTYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Mt3lcAAAO80lEQVR42uyd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";})(jQuery,window,document);;(function($,window,document){$.fn.addSliderVer=function(options,cbFn){if(!this.length)throw new Error("DOM绑定错误!");var sliderver=new SliderVer(this.get(0),options,cbFn);return sliderver;};var defaultOpts={minSplit:10,autoPlay:true,defer:2000,bigImg:null,smallImg:null,showTitle:false,isHaveLayer:false};function SliderVer(elem,options,cbFn){this.id="vetech-sliderver-"+String(Math.random()).substring(2);this.$elem=$(elem);this.opts=$.extend({},defaultOpts,options);this.cbFn=cbFn;this.bigImg={w:0,h:0};this.smallImg={w:0,h:0};this.iNow=0;this.isShow=false;this.timer={};this.iSpeed=1;this.isMoving=false;this.loadData();this.isAotuplay=false;}
SliderVer.prototype.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};SliderVer.prototype.render=function(){if(!this.data.length)return;this.$container=$('<div class="sliderver-container"></div>');this.$bigContainer=$('<div class="big-container"></div>');this.$prevBtn=$('<span class="slider-btn prev"></span>');this.$nextBtn=$('<span class="slider-btn next"></span>');this.$titlePanel=$('<div class="title"></div>');if(!this.opts.showTitle)this.$titlePanel.css("display","none");this.$smallContainer=$('<div class="small-container"></div>');this.$smallImgList=$('<div class="small-imglist"></div>');this.$bigContainer.append(this.$titlePanel);this.$smallContainer.append(this.$prevBtn).append(this.$nextBtn).append(this.$smallImgList);this.$container.append(this.$bigContainer).append(this.$smallContainer);this.$elem.append(this.$container);var _this=this;this.$layerBox=$("<div class='sliderver-container-layer-box'></div>");this.$layer=$('<div class="sliderver-layer"></div>');var $img=$("<img/>");var $closeBtn=$("<span>X</span>");this.$layer.append($img);this.$layer.append($closeBtn);this.$layerBox.append(this.$layer);$(document.body).append(this.$layerBox);if(this.opts.bigImg&&this.opts.smallImg){this.bigImg=this.opts.bigImg;this.smallImg=this.opts.smallImg;this.renderData();}else{this.calcImgWidthAndHeight(function(){_this.renderData.call(_this);});}};SliderVer.prototype.renderData=function(){var $bigUl=$('<ul class="active"></ul>'),$smallUl=$('<ul class="active"></ul>');this.iMargin=this.calcThumbSpace();this.calcArea();for(var i=0,len=this.data.length;i<len;i++){if(this.data[i].sUrl&&this.data[i].bUrl){var $bigLi=$('<li data-index="'+i+'"><img style="width:'+this.bigImg.w+'px;height:'+this.bigImg.h+'px;cursor:pointer" src="'+this.data[i].bUrl+'"  onerror="picError()"  /></li>');var $smallLi=$('<li class="thumb" data-index="'+i+'"><img style="width:'+this.smallImg.w+'px;height:'+this.smallImg.h+'px;" src="'+this.data[i].sUrl+'"  onerror="picError()"  /></li>');}else{var $bigLi=$('<li data-index="'+i+'"><img style="width:'+this.bigImg.w+'px;height:'+this.bigImg.h+'px;" src="'+SliderVer.notPic+'"  /></li>');var $smallLi=$('<li class="thumb" data-index="'+i+'"><img style="width:'+this.smallImg.w+'px;height:'+this.smallImg.h+'px;" src="'+SliderVer.notPic+'" /></li>');}
$smallLi.css({width:this.smallImg.w,margin:this.iMargin+"px"+" 0"});var $span=$('<span></span>');$span.css({width:this.smallImg.w-6,height:this.smallImg.h-6});$smallLi.append($span);$bigUl.append($bigLi);$smallUl.append($smallLi);}
$bigUl.css({height:this.bigImg.h,width:this.bigImg.w*this.data.length});$smallUl.css({height:(this.smallImg.h+this.iMargin)*this.data.length,width:this.smallImg.w});this.$bigContainer.append($bigUl);this.$smallImgList.append($smallUl);this.switchHandler(this.iNow);this.bindEvent();this.picLength=$bigUl.find("li").length;if(this.opts.autoPlay&&this.picLength>1)this.autoPlay();};SliderVer.prototype.show=function(){this.isShow=true;this.$container.css("visibility","visible");};SliderVer.prototype.calcThumbSpace=function(){var showNum=parseInt((this.bigImg.h-24)/this.smallImg.h);var calc=function(showNum){var spaceHeight=(this.bigImg.h-24)-(showNum*this.smallImg.h);return spaceHeight/showNum;}
var result=calc.call(this,showNum);return result;};SliderVer.prototype.calcArea=function(){this.$container.css({width:(this.bigImg.w+this.smallImg.w+20),height:this.bigImg.h});this.$bigContainer.css({width:this.bigImg.w,height:this.bigImg.h});this.$smallContainer.css({width:this.smallImg.w,height:this.bigImg.h});this.$smallImgList.css({width:this.smallImg.w,height:(this.bigImg.h-24)});this.calcBtnPos();};SliderVer.prototype.calcImgWidthAndHeight=function(callback){var oBigImg=document.createElement("img");var _this=this;oBigImg.onload=function(){_this.bigImg={w:this.width,h:this.height};var oSmallImg=document.createElement("img");oSmallImg.onload=function(){_this.smallImg={w:this.width,h:this.height};callback();};oSmallImg.onerror=function(){throw new Error("图片路径不正确");};oSmallImg.src=_this.data[0].sUrl;};oBigImg.onerror=function(){throw new Error("图片路径不正确");};oBigImg.src=this.data[0].bUrl;};SliderVer.prototype.calcBtnPos=function(){var $btn=this.$smallContainer.find(".slider-btn");$btn.css("right",(this.$smallContainer.get(0).offsetWidth-$btn.get(0).offsetWidth)/2);};SliderVer.prototype.bindEvent=function(){var _this=this;this.$container.on("click",function(ev){ev=ev||window.event;var target=ev.target||ev.srcElement;if($(target).hasClass("slider-btn")){_this.operateHandler.call(_this,target);}else if($(target).parent().hasClass("thumb")){var index=$(target).parent().attr('data-index');_this.switchHandler.call(_this,parseInt(index));}else if($(target).is("img")&&$(target).parents().hasClass("big-container")){var tarWidth=_this.getNaturalSize(target);var imgSrc=$(target).attr("src");_this.$layer.find("img").attr("src",imgSrc);var $imgWidth=tarWidth>800?800:tarWidth;_this.isAotuplay=true;_this.showLayer($imgWidth);}else if($(target).parents().hasClass("big-container")){_this.cbFn&&_this.cbFn(_this.data[_this.iNow]);}});this.$container.on("mouseenter",function(){_this.stopAutoPlay.call(_this);}).on("mouseleave",function(){if(!_this.isAotuplay&&_this.opts.autoPlay&&_this.picLength>1)_this.autoPlay.call(_this);});this.$layer.find("span").on("click",function(ev){_this.stopEvent(ev);_this.closeLayer();if(_this.opts.autoPlay&&_this.picLength>1)_this.autoPlay.call(_this);_this.isAotuplay=false;})};SliderVer.prototype.getNaturalSize=function(dom){var img=new Image();img.src=dom.src;return img.width;}
SliderVer.prototype.stopEvent=function(ev){var ev=window.event||ev;if(ev.stopPropagation){ev.stopPropagation()}else{ev.cancelBubble=true;}}
SliderVer.prototype.closeLayer=function(){this.$layerBox.hide();};SliderVer.prototype.showLayer=function(imgWidth){if(this.opts.isHaveLayer){this.stopAutoPlay();this.layerPos(imgWidth);this.$layerBox.show();}};SliderVer.prototype.layerPos=function(imgWidth){var pos=this.$container.offset();var layerTopBoder=parseInt(this.$layer.css("border-top-width"));this.$layer.css({"top":pos.top-layerTopBoder,"left":"50%","margin-left":-imgWidth/2-4,"width":imgWidth});}
SliderVer.prototype.operateHandler=function(target){if($(target).hasClass("prev")&&this.iNow!==0){this.switchHandler(this.iNow-1);}
if($(target).hasClass("next")&&this.iNow!==this.data.length-1){this.switchHandler(this.iNow+1);}};SliderVer.prototype.switchHandler=function(index){if(this.isMoving)return;this.isMoving=true;var _this=this;var $bigUl=this.$container.find(".big-container>ul");var $smallUl=this.$smallContainer.find("ul");$bigUl.animate({left:String(-this.bigImg.w*index)},function(){_this.$titlePanel.html(_this.data[index].title);moveThumb.call(_this);});function moveThumb(){var _this=this;var $lis=this.$smallContainer.find("li");$lis.eq(this.iNow).removeClass("active");$lis.eq(index).addClass("active");var oSmallUl=this.$smallContainer.find("ul").get(0);var iTop=oSmallUl.offsetTop-(this.smallImg.h+this.iMargin)*(index-this.iNow),iMin=this.$smallImgList.get(0).offsetHeight-oSmallUl.offsetHeight;if(iTop>=0||index===0)iTop=0;if(iTop<=iMin)iTop=iMin;if(this.$smallContainer.get(0).offsetHeight-oSmallUl.offsetHeight>0)iTop=iMin/2;$smallUl.animate({top:String(iTop)},"fast",function(){_this.iNow=index;_this.isMoving=false;});}};SliderVer.prototype.autoPlay=function(){var _this=this;this.timer=setInterval(function(){if(_this.iNow>=_this.data.length-1)_this.iNow=-1;_this.switchHandler.call(_this,_this.iNow+_this.iSpeed);},this.opts.defer);};SliderVer.prototype.stopAutoPlay=function(){if(this.timer)clearInterval(this.timer);};function picError(){this.src=SliderVer.notPic;}
function fnBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(){fn.apply(object,args);}}
SliderVer.notPic="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACICAIAAACz2DQFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjQyRjQ5NzBDQ0FDMTFFNkE2NEJDQzQ5QjdCOTEyNDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjQyRjQ5NkZDQ0FDMTFFNkE2NEJDQzQ5QjdCOTEyNDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjU5MjA4QUNDQ0FCMTFFNjg2MDFFMDBENTNCMDg3QTYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjU5MjA4QURDQ0FCMTFFNjg2MDFFMDBENTNCMDg3QTYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Mt3lcAAAO80lEQVR42uyd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";})(jQuery,window,document);;(function($,window,document){$.fn.addHotelSlider=function(options,cbFn){if(!this.length)throw new Error("DOM绑定错误!");var hotelslider=new HotelSlider(this.get(0),options,cbFn);return hotelslider;};var defaultOptions={minSplit:10,autoPlay:true,defer:2000,bigImg:null,smallImg:null,showTitle:true,hotelShow:true,isHaveLayer:false};function HotelSlider(elem,options,cbFn){this.id="vetech-hotelslider-"+String(Math.random()).substring(2);this.$elem=$(elem);this.opts=$.extend({},defaultOptions,options);this.cbFn=cbFn;this.bigImg={w:0,h:0};this.smallImg={w:0,h:0};this.iNow=0;this.isShow=false;this.timer={};this.iSpeed=1;this.isMoving=false;this.loadData();this.isAotuplay=false};var fn=HotelSlider.prototype;fn.loadData=function(){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;this.render();}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render();}});}};fn.render=function(){if(!this.data.length)return;this.$container=$('<div class="slider-container"></div>');this.$bigContainer=$('<div class="big-container"></div>');this.$prevBtn=$('<span class="ve-btn prev"></span>');this.$nextBtn=$('<span class="ve-btn next"></span>');this.$smallContainer=$('<div class="small-container"></div>');this.$listhotel=$('<div class="listhotel"></div>');if(this.opts.hotelShow){this.$listhotel.css("display","block");}
this.$bigContainer.append(this.$prevBtn).append(this.$nextBtn).append(this.$listhotel);this.$container.append(this.$bigContainer).append(this.$smallContainer);this.$elem.append(this.$container);var _this=this;this.$layerBox=$("<div class='slider-container-layer-box'></div>");this.$layer=$('<div class="slider-layer"></div>');var $img=$("<div style='overflow: hidden;width:100%;height: 100%'><img/></div>");var $closeBtn=$("<span></span>");this.$layer.append($img);this.$layer.append($closeBtn);this.$layerBox.append(this.$layer);$(document.body).append(this.$layerBox);if(this.opts.bigImg&&this.opts.smallImg){this.bigImg=this.opts.bigImg;this.smallImg=this.opts.smallImg;this.renderHotelData();}else{this.calcImgWidthAndHeight(function(){_this.renderHotelData.call(_this);},this.data[0].list);}};fn.renderHotelData=function(){this.iMargin=this.calcThumbSpace();this.calcArea();this.listNum=[];var $listNav=$('<ol></ol>'),$totalbigUl=$('<ul class="bigul0 active"></ul>'),$totalsmallUl=$('<ul class="smallul0 active"></ul>'),totalNum=0;for(var i=0,len=this.data.length;i<len;i++){var item=this.data[i].list,num=item.length,totalNum=totalNum+num;var $bigUl=$('<ul class="bigul'+(i+1)+'"></ul>'),$smallUl=$('<ul class="smallul'+(i+1)+'"></ul>'),$listnavli=$('<li>'+this.data[i].name+'('+num+')</li>');$listNav.append($listnavli);this.listNum.push(num);for(var j=0;j<num;j++){if(item[j].sUrl&&item[j].bUrl){var $bigLi=$('<li data-index="'+j+'" style="width:'+this.bigImg.w+'px;height:'+this.bigImg.h+'px;line-height:'+this.bigImg.h+'px;cursor:pointer">'+'<img src="'+item[j].bUrl+'"  onerror="picError()"  /></li>');var $smallLi=$('<li class="thumb" data-index="'+j+'">'+'<img style="width:'+this.smallImg.w+'px;height:'+this.smallImg.h+'px;" src="'+item[j].sUrl+'"  onerror="picError()"  /></li>');}else{var $bigLi=$('<li data-index="'+j+'" style="width:'+this.bigImg.w+'px;line-height:'+this.bigImg.h+'px;height:'+this.bigImg.h+'px;">'+'<img src="'+HotelSlider.notPic+'"  /></li>');var $smallLi=$('<li class="thumb" data-index="'+j+'">'+'<img style="width:'+this.smallImg.w+'px;height:'+this.smallImg.h+'px;" src="'+HotelSlider.notPic+'" /></li>');}
var $span=$('<span></span>');$span.css({width:this.smallImg.w-2,height:this.smallImg.h-2});$smallLi.append($span);$bigUl.append($bigLi);$smallUl.append($smallLi);$smallLi.css({width:this.smallImg.w,margin:"0 "+this.iMargin/2+"px"});}
$totalbigUl.append($bigUl.html());$totalsmallUl.append($smallUl.html());$bigUl.css({height:this.bigImg.h,width:this.bigImg.w*num});$smallUl.css({height:this.smallImg.h,width:(this.smallImg.w+this.iMargin)*num});this.$bigContainer.append($bigUl);this.$smallContainer.append($smallUl);}
$listNav.prepend('<li class="active">全部图片('+totalNum+')</li>');$totalbigUl.css({height:this.bigImg.h,width:this.bigImg.w*totalNum});$totalsmallUl.css({height:this.smallImg.h,width:(this.smallImg.w+this.iMargin)*totalNum});this.$bigContainer.prepend($totalbigUl);this.$smallContainer.prepend($totalsmallUl);this.$listhotel.append($listNav);this.repairIndex();this.listNum.unshift(totalNum);this.switchHandler(this.iNow);this.bindEvent();this.itemNum=totalNum;if(this.opts.autoPlay&&totalNum>1)this.autoPlay.call(_this);};fn.repairIndex=function(){this.$bigContainer.find("ul.bigul0").find("li").each(function(i,item){$(this).attr("data-index",i);});this.$smallContainer.find("ul.smallul0").find("li").each(function(i,item){$(this).attr("data-index",i);});};fn.show=function(){this.isShow=true;this.$container.css("visibility","visible");};fn.calcThumbSpace=function(){var showNum=parseInt(this.bigImg.w/this.smallImg.w);var calc=function(showNum){var spaceWidth=this.bigImg.w-(showNum*this.smallImg.w);if(spaceWidth<(this.opts.minSplit*showNum)){return arguments.callee.call(this,showNum-1);}
return spaceWidth/showNum;}
var result=calc.call(this,showNum);return result;};fn.calcArea=function(){this.$container.css({width:this.bigImg.w,height:(this.bigImg.h+this.smallImg.h+20)});this.$bigContainer.css({height:this.bigImg.h});this.$smallContainer.css({height:this.smallImg.h});this.calcBtnPos();};fn.calcImgWidthAndHeight=function(callback,itemNum){var oBigImg=document.createElement("img");var _this=this;oBigImg.onload=function(){_this.bigImg={w:this.width,h:this.height};var oSmallImg=document.createElement("img");oSmallImg.onload=function(){_this.smallImg={w:this.width,h:this.height};callback();};oSmallImg.onerror=function(){throw new Error("图片路径不正确");};oSmallImg.src=itemNum[0].sUrl;};oBigImg.onerror=function(){throw new Error("图片路径不正确");};oBigImg.src=itemNum[0].bUrl;};fn.calcBtnPos=function(){var $btn=this.$bigContainer.find(".ve-btn");$btn.css("top",(this.bigImg.h-$btn.get(0).offsetHeight)/2);};fn.bindEvent=function(){var _this=this;this.$container.on("click",function(ev){ev=ev||window.event;var target=ev.target||ev.srcElement;var num=_this.$listhotel.find("li.active").index();if($(target).hasClass("ve-btn")){_this.operateHandler.call(_this,target,_this.listNum[num]);}else if($(target).parent().hasClass("thumb")){var index=$(target).parent().attr('data-index');_this.switchHandler.call(_this,parseInt(index));}else if($(target).is("img")&&$(target).parents().hasClass("big-container")){var tarWidth=_this.getNaturalSize(target);var imgSrc=$(target).attr("src");_this.$layer.find("img").attr("src",imgSrc);var $imgWidth=tarWidth>800?800:tarWidth;_this.isAotuplay=true;_this.showLayer($imgWidth);}else if($(target).parent().parent().hasClass("listhotel")){var $allBigUl=_this.$bigContainer.find("ul"),$allSmallUl=_this.$smallContainer.find("ul");_this.$container.find("li").removeClass("active");var idex=$(target).index();$(target).addClass("active").siblings().removeClass("active");_this.iNow=0;$allBigUl.removeClass("active").end().find(".bigul"+idex).addClass("active");$allSmallUl.removeClass("active").end().find(".smallul"+idex).addClass("active");_this.switchHandler(_this.iNow);_this.itemNum=_this.listNum[idex];if(_this.opts.autoPlay&&_this.listNum[idex]>1)_this.autoPlay.call(_this);}});this.$container.on("mouseenter",function(){_this.stopAutoPlay.call(_this);}).on("mouseleave",function(){var num=_this.$listhotel.find("li.active").index();_this.itemNum=_this.listNum[num];if(!_this.isAotuplay&&_this.opts.autoPlay&&_this.listNum[num]>1)_this.autoPlay.call(_this);});this.$layer.find("span").on("click",function(ev){_this.stopEvent(ev);_this.closeLayer();var num=_this.$listhotel.find("li.active").index();_this.itemNum=_this.listNum[num];if(_this.opts.autoPlay&&_this.listNum[num]>1)_this.autoPlay.call(_this);_this.isAotuplay=false;})
this.imgAutoScale();};fn.imgAutoScale=function(){var _this=this,userAgent=navigator.userAgent;var mousewheel=userAgent.indexOf("Firefox")>-1?"DOMMouseScroll":"mousewheel";this.$layer.on("mousewheel",function(ev){var windowHeight=$(window).height();var delta=(ev.originalEvent.wheelDelta&&(ev.originalEvent.wheelDelta>0?1:-1))||(ev.originalEvent.detail&&(ev.originalEvent.detail>0?-1:1));var layerWidth=_this.$layer.outerWidth(),layerHeight=_this.$layer.outerHeight();if(delta>0&&layerWidth<670&&layerHeight<windowHeight*0.8){_this.$layer.css({"width":layerWidth*1.2,"height":layerHeight*1.2,"margin-left":-layerWidth*1.2/2,"margin-top":-layerHeight*1.2/2});_this.$layer.find("img").css({"width":"100%","height":"100%"});}else if(delta<0&&layerWidth>20){_this.$layer.css({"width":layerWidth/1.2,"height":layerHeight/1.2,"margin-left":-layerWidth/1.2/2,"margin-top":-layerHeight/1.2/2});_this.$layer.find("img").css({"width":"100%","height":"100%"});}})}
fn.getNaturalSize=function(dom){var img=new Image();img.src=dom.src;return img.width;}
fn.stopEvent=function(ev){var ev=window.event||ev;if(ev.stopPropagation){ev.stopPropagation()}else{ev.cancelBubble=true;}}
fn.closeLayer=function(){this.$layerBox.css("visibility","hidden");this.$layerBox.find("img").removeAttr("style");};fn.showLayer=function(imgWidth){if(this.opts.isHaveLayer){this.stopAutoPlay();this.layerPos(imgWidth);this.$layerBox.css("visibility","visible");}};fn.layerPos=function(imgWidth){this.$layer.css({"left":"50%","margin-left":-imgWidth/2,"width":imgWidth});var widnowHeight=$(window).height(),layerHeight=this.$layer.find("img").height();var height=layerHeight>widnowHeight*0.9?widnowHeight*0.9:layerHeight;this.$layer.css({"height":height,top:"50%","margin-top":-height/2});}
fn.operateHandler=function(target,itemNum){if($(target).hasClass("prev")&&this.iNow!==0){this.switchHandler(this.iNow-1);}
if($(target).hasClass("next")&&this.iNow!==itemNum-1){this.switchHandler(this.iNow+1);}};fn.switchHandler=function(index){if(this.isMoving)return;this.isMoving=true;var _this=this;var $bigUl=this.$container.find(".big-container>ul.active");var $smallUl=this.$smallContainer.find("ul.active");$bigUl.animate({left:String(-this.bigImg.w*index)},function(){moveThumb.call(_this);});function moveThumb(){var _this=this;var $lis=this.$smallContainer.find(".active li");$lis.eq(this.iNow).removeClass("active");$lis.eq(index).addClass("active");var oSmallUl=this.$smallContainer.find("ul.active").get(0);var iLeft=oSmallUl.offsetLeft-(this.smallImg.w+this.iMargin)*(index-this.iNow),iMin=this.$smallContainer.get(0).offsetWidth-oSmallUl.offsetWidth;if(iLeft>=0||index==0)iLeft=0;if(iLeft<=iMin)iLeft=iMin;if(this.$smallContainer.get(0).offsetWidth-oSmallUl.offsetWidth>0)iLeft=iMin/2;$smallUl.animate({left:String(iLeft)},"fast",function(){_this.iNow=index;_this.isMoving=false;});}};fn.autoPlay=function(){var _this=this;_this.stopAutoPlay();this.timer=setInterval(function(){if(_this.iNow>=_this.itemNum-1)_this.iNow=-1;_this.switchHandler.call(_this,_this.iNow+_this.iSpeed);},_this.opts.defer);};fn.stopAutoPlay=function(){if(this.timer)clearInterval(this.timer);};function picError(){this.src=HotelSlider.notPic;};function fnBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(){fn.apply(object,args);}}
HotelSlider.notPic="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACICAIAAACz2DQFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjQyRjQ5NzBDQ0FDMTFFNkE2NEJDQzQ5QjdCOTEyNDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjQyRjQ5NkZDQ0FDMTFFNkE2NEJDQzQ5QjdCOTEyNDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjU5MjA4QUNDQ0FCMTFFNjg2MDFFMDBENTNCMDg3QTYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjU5MjA4QURDQ0FCMTFFNjg2MDFFMDBENTNCMDg3QTYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Mt3lcAAAO80lEQVR42uyd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";})(jQuery,window,document);;(function($,window,document){$.fn.addSwiper=function(options){if(!this.length)throw new Error("DOM绑定错误，请确认绑定控件的元素是否存在");if(!(options.data&&$.type(options.data)==="array")){throw new Error("数据格式错误");}
return new VetechSwiper(this.get(0),options);};var defaultOpts={width:600,height:300,defer:2000,textAlign:"center",isAutoPlay:true};function VetechSwiper(elem,options){this.id="vetech-swiper-"+String(Math.random()).replace(/\D/g,"");this.opts=$.extend({},defaultOpts,options);this.elem=elem;this.$elem=$(elem);this.isMoving=false;this.currIndex=0;this.nextIndex=0;this.NUM=this.opts.data.length;this.timer=null;this.direction=-1;this.init();}
var fn=VetechSwiper.prototype;fn.init=function(){this.$container=$('<div class="vetech-swiper"><ul></ul><div class="switch-bar"></div></div>');this.$container.css({"width":this.opts.width,"height":this.opts.height});this.$container.find(".switch-bar").css("text-align",this.opts.textAlign);this.$leftBtn=$('<span class="switch-btn leftBtn"></span>');this.$rightBtn=$('<span class="switch-btn rightBtn"></span>');this.$container.append(this.$leftBtn).append(this.$rightBtn);this.$elem.append(this.$container);this.renderData();};fn.renderData=function(){var $list=this.$container.find("ul"),$bar=this.$container.find(".switch-bar");var data=this.opts.data;for(var i=0;i<this.NUM;i++){$list.append(this.createLi(i,data[i]));var $point=this.createPoint(i);if(i===0)$point.addClass("active");$bar.append($point);}
this.bindEvent();this.autoPlay();};fn.bindEvent=function(){this.$leftBtn.on("click",$.proxy(this.leftBtnHandler,this));this.$rightBtn.on("click",$.proxy(this.rightBtnHandler,this));this.$container.on("click",".point",$.proxy(this.pointHandler,this));};fn.autoPlay=function(){if(!this.opts.isAutoPlay)return;var _this=this;this.timer=setInterval(function(){_this.rightBtnHandler.call(_this);},this.opts.defer);};fn.stopPlay=function(){if(this.timer)clearInterval(this.timer);};fn.switchHandler=function(){var _this=this;if(this.isMoving)return;this.isMoving=true;this.stopPlay();var $currLi=this.$container.find("li[data-index='"+this.currIndex+"']");this.$container.find(".point").removeClass("active").eq(this.nextIndex).addClass("active");if(this.direction==1){this.$container.find("ul").css("left",-this.opts.width);this.$container.find("li[data-index='"+this.nextIndex+"']").insertBefore($currLi);this.$container.find("ul").animate({left:String(0)},function(){_this.currIndex=_this.nextIndex;_this.isMoving=false;_this.autoPlay.call(_this);});}else{$currLi.after(this.$container.find("li[data-index='"+this.nextIndex+"']"));this.$container.find("ul").animate({left:String(-this.opts.width)},function(){_this.$container.find("li").last().after(_this.$container.find("li").first());_this.$container.find("ul").css("left",0);_this.currIndex=_this.nextIndex;_this.isMoving=false;_this.autoPlay.call(_this);});}};fn.leftBtnHandler=function(){this.direction=1;this.nextIndex=this.currIndex<=0?this.NUM-1:this.currIndex-1;this.switchHandler();};fn.rightBtnHandler=function(){this.direction=-1;this.nextIndex=this.currIndex>=this.NUM-1?0:this.currIndex+1;this.switchHandler();};fn.pointHandler=function(ev){var $target=$(ev.target);if($target.hasClass("active"))return;var index=$target.data("index");this.nextIndex=index;this.switchHandler();};fn.createPoint=function(index){return $('<span class="point" data-index="'+index+'"></span>');};fn.createLi=function(index,data){var $li=$('<li data-index="'+index+'"></li>'),$a=$('<a></a>'),$img=$('<img/>');if(data.href){$a.attr("href",data.href).attr("target","_blank");}else{$a.attr("href","javascript:void(0)");}
$a.append($img);$li.append($a);$li.css({"width":this.opts.width});$img.attr("src",data.url).css({"width":this.opts.width,"height":this.opts.height});$img.on("error",function(){$img.attr("src",VetechSwiper.seatImg);$img.off("error");});return $li;};VetechSwiper.seatImg="/static/asms/images/nopic.png";})(jQuery,window,document);;(function($,window,document){$.fn.addTab=function(options,cbFn){if(!this.length)throw new Error("DOM bind error, make sure document is alreay loaded");var oInput=this.get(0);manager.clear(oInput);var tab=new VetechTab(oInput,options,cbFn);if(options&&options.usetype!=="composite"){this.on("click",inputClickHandler);manager.addEvent(tab.id,"click",inputClickHandler);}else{return tab;}};function inputClickHandler(ev){ev=ev||window.event;var $target=$(ev.target||ev.srcElement);var ids=$target.attr("vetech-ids");var component=manager.getComponent(ids);component.show();}
$.fn.addTab.options={type:"3",typeValue:"/component/data/tab.data.js",splitStr:",",itemWidth:80,tabWidth:30,rightWidth:180,freeBinding:false,hasGroup:true,title:"支持中文拼音/简拼/三字码的输入",hasLevel:true};function VetechTab(elem,options,cbFn){this.id="vetech-tab-"+String(Math.random()).substring(2);this.elem=elem;this.$elem=$(elem);this.opts=$.extend({},$.fn.addTab.options,options);this.CONTAINER_WIDTH=0;this.activeIndex=0;this.cbFn=cbFn||function(){};this.isShow=false;this.selectedItems={};this.tabCount=0;this.$tabs=[];this.$tabContents=[];if($.type(this.opts.hiddenName)==="string"){this.$hiddenInput=$("#"+this.opts.hiddenName);}else if($.type(this.opts.hiddenName)==="object"){this.$hiddenInput=this.opts.hiddenName;}
this.loadData();manager.manage(this);}
VetechTab.prototype.loadData=function(){var _this=this,typeValue=this.opts.typeValue;if(1==this.opts.type){this.data=typeValue;this.init();}else{$.ajax({type:"get",url:typeValue,dataType:"json",success:function(data){_this.data=data;_this.init();}});}};VetechTab.prototype.init=function(){this.$container=$('<div class="vetech-tab"></div>');if(this.opts.title){var $title=$("<div class='vtitle'>"+this.opts.title+"</div>");this.$container.append($title);}
this.$close=$('<span class="close"><img src="'+closePath+'"></span>');this.$container.append(this.$close);this.$header=$('<div class="tab-header"></div>');this.$container.append(this.$header);var $ul=$('<ul class="clearfix"></ul>');for(var i=0;i<this.data.length;i++){var name=this.data[i].name||"";var $a=$('<a href="###" data-index="'+i+'">'+name+'</a>');$a.css({"padding-left":this.opts.tabWidth,"padding-right":this.opts.tabWidth});var $li=$('<li></li>');$li.append($a);$ul.append($li);var $tabContent=$('<div class="tab-content" data-index="'+i+'"></div>');this.$container.append($tabContent);if(i===0){$li.find("a").addClass("active");$tabContent.addClass("active");}
this.tabCount++;this.$tabs.push($a);this.$tabContents.push($tabContent);}
this.$header.append($ul);$(document.body).append(this.$container);this.calcTabWidth();this.renderData();};VetechTab.prototype.calcTabWidth=function(){this.CONTAINER_WIDTH=this.$header.outerWidth()+this.opts.rightWidth;this.$container.css("width",this.CONTAINER_WIDTH);};VetechTab.prototype.renderData=function(){for(var i=0;i<this.data.length;i++){var dataItem=this.data[i]["data"];dataItem=copyArray(dataItem);this.renderTab(dataItem,this.$tabContents[i]);if(this.opts.hasLevel)break;}
this.bindEvent();this.writeValue();if(this.opts.freeBinding)this.show();};VetechTab.prototype.renderTab=function(dataItem,$tabContent){$tabContent.html("");if(!dataItem.length)return;if(this.opts.hasGroup){var data=dataItem.sort(sortByFirst);data=this.divideGroups(data);for(var j=0;j<data.length;j++){var $dl=this.addGroup(data[j]);if(j===data.length-1)$dl.css({"margin-bottom":20,"border-bottom":"none"});$tabContent.append($dl);}}else{if(!(dataItem&&dataItem.length))return;var $ul=$('<ul class="clearfix"></ul>');for(var j=0;j<dataItem.length;j++){$ul.append(this.createItem(dataItem[j]));}
$tabContent.append($ul);}};VetechTab.prototype.createItem=function(item){var $a=$('<a href="javascript:void(0)" title="'+item.name+'" style="max-width:'+(this.opts.itemWidth-20)+'px;">'+item.name+'</a>');var $li=$('<li style="width:'+this.opts.itemWidth+'px;height:24px;"></li>');$li.append($a);$a.data("data",item);return $li;};VetechTab.prototype.addGroup=function(data){var $dl=$('<dl class="clearfix"><dt></dt><dd></dd>'),$ul=$('<ul class="clearfix"></ul>'),titleArr=[];for(var i=0;i<data.length;i++){$ul.append(this.createItem(data[i]));if(i===0||i===data.length-1)titleArr.push(data[i].first);}
$dl.find("dt").text(titleArr.join("-")).end().find("dd").append($ul).css("width",this.CONTAINER_WIDTH-40);return $dl;};VetechTab.prototype.divideGroups=function(dataList){var divideNum=0;if(dataList.length<20){divideNum=1;}else if(dataList.length<30){divideNum=2;}else if(dataList.length<40){divideNum=3;}else{divideNum=4;}
var showNum=Math.floor(dataList.length/divideNum);var diviedArray=[];for(var i=0;i<divideNum;i++){if(i==divideNum-1){diviedArray.push(dataList);}else{var tempArr=dataList.splice(0,showNum);if(!tempArr.length)continue;var first=tempArr[tempArr.length-1]["first"];var sameNum=findSameFirst(first,dataList);if(sameNum>0)tempArr=tempArr.concat(dataList.splice(0,sameNum));diviedArray.push(tempArr);}}
function findSameFirst(first,dataList){var count=0;for(var i=0;i<dataList.length;i++){if(dataList[i]["first"]==first)
count++;else break;}
return count;}
return diviedArray;};VetechTab.prototype.writeValue=function(){var values=this.$hiddenInput.val();if(!values||!this.data.length)return;values=values.split(this.opts.splitStr);this.defaultValues=values;if(values.length){var $aDom=this.getDOMById(this.activeIndex,values[this.activeIndex]);$aDom&&this.itemClickHandler($aDom,true);}};VetechTab.prototype.getDOMById=function(index,id){var $aItems=this.$tabContents[index].find("a");for(var i=0,len=$aItems.length;i<len;i++){var data=$aItems.eq(i).data("data");if(data&&data.id===id)return $aItems.eq(i);}};VetechTab.prototype.show=function(){if(this.isShow)return;this.setPos();this.$container.css({"visibility":"visible"});this.isShow=true;};VetechTab.prototype.hide=function(){if(!this.isShow)return;this.$container.css({"visibility":"hidden","left":0,"top":0});this.isShow=false;};VetechTab.prototype.destroy=function(){this.$container.remove();};VetechTab.prototype.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iTop=pointer.top+this.$elem.outerHeight();iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop});};VetechTab.prototype.bindEvent=function(){var _this=this;this.$header.on("click",function(ev){ev=ev||window.event;var $target=$(ev.target||ev.srcElement);if($target.is("a"))_this.tabClickHandler.call(_this,$target);});this.$container.find(".tab-content").on("click",function(ev){ev=ev||window.event;var $target=$(ev.target||ev.srcElement);if($target.is("a"))_this.itemClickHandler.call(_this,$target);});$(document).on("click",function(ev){var target=ev.target;if(_this.elem!==target)_this.hide();});this.$container.on("click",bindEventAsListener(null,stopEvent));if(this.opts.usetype&&this.opts.usetype!=="composite"){this.$elem.on("keydown",$.proxy(this.clearValue,this));}
this.$close.on("click",$.proxy(this.hide,this));this.$container.on("click","a",function(){return false;});};VetechTab.prototype.clearValue=function(ev){if(this.opts.hasLevel){var $firstActiveItem=this.$tabContents[0].find("a[class*='active']");this.itemClickHandler($firstActiveItem);}else{this.$tabContents[this.activeIndex].find("a[class*='active']").removeClass('active');this.$hiddenInput.val("");}};VetechTab.prototype.tabClickHandler=function($aDom){this.$tabs[this.activeIndex].removeClass("active");this.$tabContents[this.activeIndex].removeClass("active");var currIndex=parseInt($aDom.attr("data-index"));this.$tabs[currIndex].addClass("active");this.$tabContents[currIndex].addClass("active");this.activeIndex=currIndex;};VetechTab.prototype.itemClickHandler=function($aDom,isLoop){var tabIndex=$aDom.parents(".tab-content").attr("data-index");$aDom.parents(".tab-content").find("a").removeClass("active");var tempData=$aDom.data("data");if(this.opts.hasLevel){tabIndex=parseInt(tabIndex);for(var i=tabIndex+1;i<this.tabCount;i++){this.selectedItems[i]&&delete this.selectedItems[i];this.$tabContents[i].html("");}
if(this.selectedItems[tabIndex]&&this.selectedItems[tabIndex]===tempData){delete this.selectedItems[tabIndex];this.setValue(false);}else{$aDom.addClass("active");this.selectedItems[tabIndex]=tempData;this.autoToNextLevel($aDom,isLoop);this.setValue(false);}}else{this.selectedItems={};this.selectedItems[tabIndex]=tempData;this.setValue(true);$aDom.addClass("active");}};VetechTab.prototype.autoToNextLevel=function($aDom,isLoop){if(this.activeIndex===this.tabCount-1){this.setValue(true);}else{var tempData=$aDom.data("data");var totalData=this.data[this.activeIndex+1]["data"];totalData=findDataByPid(totalData,tempData.id);this.renderTab(totalData,this.$tabContents[this.activeIndex+1]);this.tabClickHandler(this.$tabs[this.activeIndex+1]);if(isLoop&&this.defaultValues&&this.defaultValues.length>this.activeIndex){var $aDom=this.getDOMById(this.activeIndex,this.defaultValues[this.activeIndex]);this.itemClickHandler($aDom,true);}}};VetechTab.prototype.setValue=function(isClose){var result=[],ids=[],values=[];for(var key in this.selectedItems){var data=this.selectedItems[key];ids.push(data.id);values.push(data.name);result.push(data);}
this.$elem.val(values.join(this.opts.splitStr));this.$hiddenInput.val(ids.join(this.opts.splitStr));this.cbFn(result,this.$header.find(".active").attr("data-index"));isClose&&this.hide();};function copyArray(data){var result=[];for(var i=0;i<data.length;i++){result[i]=data[i];}
return result;}
function sortByFirst(item1,item2){return(item1.first||"").toUpperCase().charCodeAt()-(item2.first||"").toUpperCase().charCodeAt();}
function findDataByPid(data,pid){var resultData=[];for(var i=0;i<data.length;i++){if(data[i].pid===pid)resultData.push(data[i]);}
return resultData;}
function stopEvent(ev){ev=ev||window.event;if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;}
function bindEventAsListener(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(ev){fn.apply(object,[ev].concat(args));}}
var closePath="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnElEQVQ4T6WTwQ2FMAxDzWSwCZ8NMopHgE0Y7StSgdDGPdBeqqLk1TjuhME1DfbjBpjZD8BMcutBzWwHcJL0/QXwDyuAXUFKs9ccJP3CB+CHUNBAsuYGoCCqOQXUkOKHy71lR4/kFMKtXp82SwWVCj9KY1MF8Z+LXDmdBpAZ1pvOC9BzW0FiEq8gScMySB3l5UqYirOM8tdHNfwa/yXyZBGng+hpAAAAAElFTkSuQmCC";})(jQuery,window,document);;(function($,window,document){$.fn.addTime=function(options,cbFn){if(!$(this).length)throw new Error("DOM绑定错误，请确认页面是否加载完毕");var oELement=$(this).get(0);var oTime=new Time(oELement,options,cbFn);return oTime;};$.fn.addTime.options={yearName:"",monthName:"",disabledLater:false,currYear:"",currMonth:"",startTime:new Date().getFullYear()-20,endTime:new Date().getFullYear()+20};function Time(elem,options,cbFn){this.id="vetech-time-"+String(Math.random()).substring(2);this.opts=$.extend({},$.fn.addTime.options,options);this.opts.startTime=typeof this.opts.startTime==="string"?parseInt(this.opts.startTime):this.opts.startTime;this.opts.endTime=typeof this.opts.endTime==="string"?parseInt(this.opts.endTime):this.opts.endTime;var date=new Date();this.opts.currYear=this.opts.currYear?this.opts.currYear:date.getFullYear();this.opts.currMonth=this.opts.currMonth?this.opts.currMonth:date.getMonth()+1;this.cbFn=cbFn||function(){};this.$elem=$(elem);this.elem=elem;this.init();}
var fn=Time.prototype;fn.init=function(){this.$yearContainer=$('<select class="year"></select>');if(this.opts.yearName)this.$yearContainer.attr("name",this.opts.yearName);this.$monthContainer=$('<select class="month"></select>');if(this.opts.monthName)this.$monthContainer.attr("name",this.opts.monthName);this.$container=$('<div class="time-Container"></div>');this.$container.append(this.$yearContainer).append(this.$monthContainer);this.hide();this.$elem.append(this.$container);this.render();};fn.render=function(){var endYear=this.opts.disabledLater?new Date().getFullYear():this.opts.endTime;for(var i=this.opts.startTime;i<=endYear;i++){var $option=$('<option value="'+i+'">'+i+'年</option>');this.$yearContainer.append($option);}
var endMonth=this.opts.disabledLater?new Date().getMonth()+1:12;for(var j=1;j<=endMonth;j++){var value=j<10?"0"+j:j;var $option=$('<option value="'+value+'">'+j+'月</option>');this.$monthContainer.append($option);}
this.wirteValue();this.show();this.bindEvent();};fn.wirteValue=function(){this.$yearContainer.val(this.opts.currYear);var month=parseInt(this.opts.currMonth);month=month<10?"0"+month:month;this.$monthContainer.val(month);};fn.show=function(){this.$container.show();};fn.hide=function(){this.$container.hide();};fn.bindEvent=function(){this.$yearContainer.on("change",$.proxy(this.timeChangeHandler,this));this.$monthContainer.on("change",$.proxy(this.timeChangeHandler,this));};fn.timeChangeHandler=function(ev){var value=$(ev.target).find("option:selected").val();this.cbFn(ev.target,value);}})(jQuery,window,document);(function($,win,doc){var defaultOpts={hiddenName:"",showWay:"append",width:500};var fn=TravelCityList.prototype;function TravelCityList(elem,options){this.elem=elem;this.$elem=$(elem);this.opts=$.extend(true,{},defaultOpts,options);this.cbFn=this.opts.cbFn||function(){};this.isShow=false;this.$hiddenInput=$("#"+this.opts.hiddenName);this.init();}
fn.init=function(){this.$container=$('<div class="vet-lycs-container">');this.$container.css("width",this.opts.width);if(this.opts.showWay!="append"){$(document.body).append(this.$container);}else{this.$elem.css("position","relative").append(this.$container);}};fn.loadData=function(callback){var _this=this;if("1"==this.opts.type){this.data=this.opts.typeValue;callback.call(this,this.data);}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;callback.call(_this,_this.data);}});}};fn.render=function(data){var _this=this;if(data&&!$.isEmptyObject(data)){for(var key in data){if(key==="热门出发城市"){_this.$cityGroup=$('<div class="lycs-group hot-city"></div>')}else{_this.$cityGroup=$('<div class="lycs-group"></div>');}
_this.$title=$('<h3>'+key+'</h3>');_this.$listUl=$('<ul class="clearfix"></ul>');var cityData=data[key];for(var i=0;i<cityData.length;i++){var item=cityData[i];var $li=$('<li title="'+item.name+'">'+item.name+'</li>');if((!$.isBlank(this.opts.citybh))&&this.opts.citybh===item.bh){$li.addClass("active");}
$li.data("data",cityData[i]);_this.$listUl.append($li);}
_this.$cityGroup.append(_this.$title).append(_this.$listUl);_this.$container.append(_this.$cityGroup);}}
this.bindEvent(data);};fn.setPos=function(){var pointer={},left=0,top=0;if(this.opts.offset){pointer=this.opts.offset;left=pointer.left;top=pointer.top;}else{pointer=this.$elem.offset();if(this.opts.showWay!="append"){left=pointer.left;top=pointer.top+this.$elem.outerHeight();}else{left=pointer.width-this.$elem.outerHeight();top=this.$elem.outerHeight()-2;}}
this.$container.css({left:left,top:top});};fn.bindEvent=function(){var _this=this;this.$container.on("click","li",function(){_this.$container.find("li").removeClass("active");$(this).addClass("active");_this.setValue($(this).data("data"));_this.hide();});if(this.opts.showWay!="append"){this.$elem.on("click",function(){_this.show();});this.$container.on("click",function(ev){return false;});}else{this.$elem.on("mouseenter",function(){_this.show();});this.$elem.on("mouseleave",function(){_this.hide();});}
$(document).on("click",function(ev){var target=ev.target;if(_this.elem!==target)_this.hide();});};fn.setValue=function(data){if(this.opts.showWay!='append'){this.$elem.val(data.name);}
this.cbFn(data);};fn.show=function(){if(this.isShow)return;this.setPos();this.$container.show();this.isShow=true;};fn.hide=function(){if(!this.isShow)return;this.$container.hide();this.isShow=false;};fn.destroy=function(){if(this.$container){this.$container.remove();}};window.TravelCityList=TravelCityList;})(jQuery,window,document);;(function($,window,document){$.fn.addVeNTab=function(options,cbFn){if(this.length<0)throw new Error("DOM绑定错误【请查看页面是否渲染完毕，或者是否存在该DOM对象】");var oInput=this.get(0);if(options.usetype!=="composite"){manager.clear(oInput);}
var veNTab=new VeNTab(oInput,options,cbFn);if(options.usetype!=="composite"){$(oInput).bind("click",elemClickHandelr);manager.addEvent(veNTab.id,"click",elemClickHandelr);}
return veNTab;};function elemClickHandelr(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var id=target.getAttribute("vetech-veNTab");var veNTab=manager.getComponent(id);veNTab&&veNTab.show();}
$.fn.addVeNTab.options={width:480,type:"1",typeValue:null,fn1:null,hiddenName:"",tabTitls:["ABCD","EFGH","JKLM","NOPQRS","TUVWX","YZ"],tabStyle:"1",first_style:"3",first_title:null,first_type:"1",first_data:null,cells:1,scell:6,tabCells:1,tabScell:6,parentObj:null,groupCanClick:false,title:"支持中文/拼音/简拼输入",itemDuox:false,splitStr:",",writeValueFn:null,beforeRender:null,itemClickFn:null,loadStaticHtml:false,initContainerComplete:null};function VeNTab(elem,options,cbFn){this.id="vetech-veNTab-"+generaterUUID();this.elem=elem;this.$elem=$(elem);this.data=null;this.dataItems=[];this.checkedData=[];this.opts=$.extend({},$.fn.addVeNTab.options,options);this.isNow=this.opts.isNow||0;this.isShow=false;this.cbFn=(cbFn&&Object.prototype.toString.call(cbFn)==="[object Function]")?cbFn:function(){};if(!(this.opts.fn1&&Object.prototype.toString.call(this.opts.fn1)==="[object Function]"))this.opts.fn1=null;if(!this.opts.hiddenName)this.opts.hiddenName=this.elem.id+"-hiddenInput";this.$hiddenInput=$(document.body).find("#"+this.opts.hiddenName);if(!this.$hiddenInput.length){this.$hiddenInput=$("<input type='hidden' id='"+this.opts.hiddenName+"' name='"+this.opts.hiddenName+"'/>")
this.$elem.parent().append(this.$hiddenInput);}
if(this.opts.loadStaticHtml===false){this.initContainer();this.loadData();if(this.opts.initContainerComplete){this.opts.initContainerComplete.call(this,this.opts.initContainerComplete);}}else{this.loadStaticContainer();}
manager.manage(this);};VeNTab.prototype.loadData=function(flag){var _this=this;if("1"==this.opts.first_type&&"1"==this.opts.type){this.data=this.opts.typeValue;this.render(flag);}else{if(this.opts.first_type!=='1'){$.ajax({type:"get",url:_this.opts.first_data,dataType:"json",success:function(data){_this.opts.first_data=data;},complete:function(){if("1"==_this.opts.type){_this.data=_this.opts.typeValue;_this.render(flag);}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render(flag);}});}}});}else{if("1"==_this.opts.type){_this.data=_this.opts.typeValue;_this.render(flag);}else{$.ajax({type:"get",url:_this.opts.typeValue,dataType:"json",success:function(data){_this.data=data;_this.render(flag);}});}}}};VeNTab.prototype.render=function(flag){if(flag){this.$header.html("");this.$content.html("");}
this.renderHeader().renderData().writeDefaultValue().bindEvent().setActive(this.isNow);};VeNTab.prototype.initContainer=function(){this.$container=$('<div class="vetech-vetab-container"></div>');this.$tips=$('<div class="title">'+this.opts.title+'</div>');this.$header=$('<div class="header"></div>');this.$content=$('<div class="content"></div>');if(this.opts.width)this.$container.css("width",this.opts.width);this.$container.append(this.$tips).append(this.$header).append(this.$content);$(document.body).append(this.$container);return this;};VeNTab.prototype.loadStaticContainer=function(){var url=this.opts.typeValue;var _this=this
$.ajax({type:"post",url:url,contentType:"application/x-www-form-urlencoded;charset=UTF-8",success:function(html){_this.$container=$($.trim(html));_this.$header=_this.$container.find(".header").eq(0);_this.$tips=_this.$container.find(".title").eq(0);_this.$close=_this.$header.find("span.close");_this.$content=_this.$container.find(".content").eq(0);if(_this.opts.width)_this.$container.css("width",_this.opts.width);$(document.body).append(_this.$container);if(_this.$container.find("#delete-all")&&_this.opts.itemDuox){_this.$container.find("#delete-all").show();}
_this.loadHotTabpage();_this.bindEvent();_this.loadStaticHtmlHX();if(_this.opts.initContainerComplete){_this.opts.initContainerComplete.call(_this,_this.opts.initContainerComplete);}}});return this;}
VeNTab.prototype.loadStaticHtmlHX=function(isNotSetValue){this.$content.find('.tab-page li').removeClass("active");this.$content.find('.tab-page').removeClass("active");this.$header.find(".tab").find("li").removeClass("active");var _this=this;var hiddenV=$("#"+_this.opts.hiddenName).val();if(!$.isBlank(hiddenV)){var vArr=hiddenV.split(_this.opts.splitStr);if(vArr.length==1){var $li=_this.$content.find('.tab-page li[data-id='+hiddenV+']');if($li.length>0)$li.addClass("active");if($.type(_this.opts.writeValueFn)!=="function"){if($li.length>0&&!isNotSetValue){if(this.opts.selectWay!=="isPulldown"){_this.$elem.val($li.data("data")["name"]);};}}else{_this.opts.writeValueFn($li.data("data"),_this,hiddenV);}}else{var name="";$.each(vArr,function(i,v){var $li=_this.$content.find('.tab-page li[data-id='+v+']');if($li.length!=0){$li.addClass("active");name+=$li.data("data")["name"]+_this.opts.splitStr;}});if(name&&!isNotSetValue)
_this.$elem.val(name.substring(0,name.length-1));}}
if(_this.$content.find("li.active").length>0){_this.isNow=_this.$content.find("li.active").eq(0).parent().data("index");}
var i=_this.$header.find(".tab li").not(":hidden").eq(0).attr('tab-index');_this.setActive(_this.isNow||i);}
VeNTab.prototype.loadHotTabpage=function(){var _this=this;var liArr=this.$content.find(".tab-page[page-index='0'] li");if(liArr.length==0&&!$.isBlank(this.opts.first_data)){$.ajax({type:"get",url:_this.opts.first_data,dataType:"json",success:function(data){if($.type(data)=='array'&&data.length>0){if($.type(_this.opts.fn1)=='function'){_this.opts.fn1(_this,data);}}else{hidePage0();if(_this.isNow==0){_this.setActive(1);}}}});}else if(liArr.length==0){hidePage0();}
function hidePage0(){_this.$content.find(".tab-page[page-index='0']").hide();_this.$header.find(".tab li[tab-index='0']").hide();}}
VeNTab.prototype.renderHeader=function(){if(typeof this.opts.beforeRender=='function')this.opts.beforeRender(this);var $ul=$('<ul class="tab"></ul>');if(this.opts.first_data&&this.opts.first_data.length>0){var $li=$('<li tab-index="0">'+this.opts.first_title+'</li>');$ul.append($li);}else{this.isNow=1;}
this.$close=$('<span class="close"><img src="'+VeNTab.closeUrl+'"/></span>');if(this.opts.tabStyle==1||this.opts.tabStyle=="auto"){for(var i=0;i<this.opts.tabTitls.length;i++){var $li=$('<li tab-index="'+(i+1)+'">'+this.opts.tabTitls[i]+'</li>');$ul.append($li);}}
this.$header.append($ul).append(this.$close);return this;};VeNTab.prototype.renderData=function(){if(this.opts.first_data&&this.opts.first_data.length>0){if(this.opts.first_style==1){this.renderPageStyle1(0,this.opts.first_title,this.opts.first_data,this.opts.cells,this.opts.scell);}else if(this.opts.first_style==3){if(Object.prototype.toString.call(this.opts.first_data)=='[object Array]'){this.renderPageStyle3(0,this.opts.first_data);}}else if(this.opts.first_style==5){this.renderPageStyle5(this.opts.first_data,this.opts.cells,this.opts.scell);}}
if(this.opts.tabStyle==1){for(var i=0;i<this.opts.tabTitls.length;i++){this.renderPageStyle1(i+1,this.opts.tabTitls[i],this.data,this.opts.tabCells,this.opts.tabScell);}}else if(this.opts.tabStyle==2){this.renderPageStyle2(this.data);}else if(this.opts.tabStyle==3){for(var i=0;i<this.opts.tabTitls.length;i++){this.renderPageStyle3(i+1,this.data[i]);}}else if(this.opts.tabStyle==4){this.renderPageStyle4(this.data,this.opts.tabCells,this.opts.tabScell);}else if(this.opts.tabStyle=="auto"){for(var i=0;i<this.data.length;i++){var arrOne=this.data[i];if(arrOne["style"]=='3'){this.renderPageStyle3(i+1,arrOne["data"]);}else if(arrOne['style']=='5'){this.renderPageStyle5(arrOne["data"],arrOne["cells"]||this.opts.cells,arrOne["scell"]||this.opts.scell,i+1)}}}
return this;};VeNTab.prototype.renderPageStyle1=function(index,title,data,cells,scell){if(!data)return;var $page=$('<div class="tab-page" page-index="'+index+'"></div>');this.$content.append($page);var groupdata=[];for(var i=0,len=title.length;i<len;i++){var groupName=title.charAt(i);var tempData=data[groupName];if(!tempData)continue;groupdata.push({gname:groupName,gdata:tempData});}
$page.append(this.addGroups(groupdata,index,cells,scell));}
VeNTab.prototype.addGroups=function(data,index,cells,scell){var iddWidth=this.$container.width()/cells-66;var cellWidth=Math.floor((100/cells)*100)/100;var liWidth=Math.floor((100/scell)*100)/100;var fragment=document.createDocumentFragment();var $conTemp=null;for(var i=0;i<data.length;i++){if(i%cells==0){if($conTemp){fragment.appendChild($conTemp.get(0));$conTemp=null;}
$conTemp=$("<div class='clearfix'></div>");}
$conTemp.append(addGroup.call(this,data[i]["gname"],data[i]["gdata"],data[i]["gid"]));}
if($conTemp){fragment.appendChild($conTemp.get(0));}
function addGroup(name,data,id){if(data&&data.length==0)return;var $dl=$('<dl style="float:left;width:'+cellWidth+'%"><dt data-id="'+(id?id:"")+'">'+name+'</dt><dd style="width:'+iddWidth+'px;"></dd></dl>');var $ul=$('<ul class="clearfix"></ul>');for(var i=0,len=data.length;i<len;i++){var dataItem=data[i];if(this.opts.filterFn&&!this.opts.filterFn(dataItem)){continue;}
var $li=$('<li style="width:'+liWidth+'% "><a href="javascript:void(0);">'+dataItem["name"]+'</a></li>');var _hiddenValue=this.$hiddenInput.val().split(this.opts.splitStr);if($.inArray(dataItem.id,_hiddenValue)>-1){this.isNow=index?index:0;this.checkedData.push(dataItem);$li.addClass("active");}
$ul.append($li);$li.data("data",dataItem);}
$dl.find("dd").append($ul);return $dl;}
return fragment;}
VeNTab.prototype.renderPageStyle2=function(data){if(!data)return;var $head_ul=this.$header.find("ul.tab").eq(0);var maxindex=$head_ul.find("li:last").attr("tab-index");if(maxindex){maxindex=parseInt(maxindex)+1;}else{maxindex=1;}
if(Object.prototype.toString.call(data)==="[object Object]"){data=new Array(data);}
for(var i=0,index=maxindex;i<data.length;i++,index++){var $li=$('<li tab-index="'+index+'">'+data[i]['name']+'</li>');$head_ul.append($li);var contentData=data[i]["data"];var $ul=this.createItem(contentData,index);var $page=$('<div class="tab-page" page-index="'+index+'"></div>');$page.append($ul);this.$content.append($page);}}
VeNTab.prototype.createItem=function(contentData,index){var $ul=$('<ul class="clearfix"></ul>');for(var j=0;j<contentData.length;j++){var $im=createLi.call(this,contentData[j],index);$ul.append($im);$im.data("data",contentData[j]);}
function createLi(item,index){var $a=$('<a href="javascript:void(0);" title="'+item.name+'">'+item.name+'</a>');var $li=$('<li></li>');$li.append($a);$a.data("data",item);var _hiddenValue=this.$hiddenInput.val().split(this.opts.splitStr);if($.inArray(item.id,_hiddenValue)>-1){this.isNow=index?index:0;this.checkedData.push(item);$li.addClass("active");}
return $li;}
return $ul;}
VeNTab.prototype.renderPageStyle3=function(index,data){var $page=$('<div class="tab-page" page-index="'+index+'"></div>');this.$content.append($page);var $ul=this.createItem(data,index);$page.append($ul);this.$content.append($page);}
VeNTab.prototype.renderPageStyle4=function(data,cells,scell){if(!data)return;var $head_ul=this.$header.find("ul.tab").eq(0);var maxindex=$head_ul.find("li:last").attr("tab-index");if(maxindex){maxindex=parseInt(maxindex)+1;}else{maxindex=1;}
if(Object.prototype.toString.call(data)==="[object Object]"){data=new Array(data);}
for(var i=0,index=maxindex;i<data.length;i++,index++){var $li=$('<li tab-index="'+index+'">'+data[i]['name']+'</li>');$head_ul.append($li);var $page=$('<div class="tab-page" page-index="'+index+'"></div>');var contentData=data[i]["data"];$page.append(this.addGroups(contentData,index,cells,scell));this.$content.append($page);}}
VeNTab.prototype.renderPageStyle5=function(data,cells,scell,index){if(!data)return;index=index||0;var $page=$('<div class="tab-page" page-index="'+index+'"></div>');$page.append(this.addGroups(data,0,cells,scell));this.$content.append($page);}
VeNTab.prototype.bindEvent=function(){var _this=this;this.$container.on("click",".header .tab li",function(ev){_this.tabClickHandler.call(_this,ev,$(this));});this.$container.on("click",".tab-page li",function(ev){var data=$.type($(this).data("data"))==="object"?$(this).data("data"):JSON.parse($(this).data("data"));_this.itemClickHandler.call(_this,ev,{"$node":$(this),"data":data});});this.$container.on("click",".tab-page",function(ev){var $target=$(ev.target);if($target.is("a"))return false;});if(this.opts.groupCanClick){this.$content.find('.tab-page dt').css("cursor","pointer");this.$content.find('.tab-page dt').hover(function(){$(this).addClass("active");},function(){$(this).removeClass("active");});this.$content.find('.tab-page dt').on("click",$.proxy(this.dtClickHandler,this));}
if(this.opts.itemDuox){this.$container.on("click","#delete-all",function(ev){_this.$elem.val("");_this.clearClickedItems();$(document.body).find("#"+(_this.opts.hiddenProvince)).val("");$(document.body).find("#"+(_this.opts.hiddenCity)).val("");});}
this.$close.on("click",deepBind(this,this.closeHandler));$(document).on("click",deepBind(this,this.closeHandler));this.$container.on("mousedown",function(ev){ev.preventDefault();ev.stopPropagation();if(document.all&&!document.addEventListener){_this.$container[0].setCapture&&_this.$container[0].setCapture();}
return false;}).on("mouseup",function(){_this.$container[0].releaseCapture&&_this.$container[0].releaseCapture();}).on("click",deepBind(this,this.stopEvent));this.$elem.on("blur",function(){_this.hide.call(_this);});if(typeof(this.opts.expandBindEvent)==="function"){this.opts.expandBindEvent.call(this);}
return this;};VeNTab.prototype.dtClickHandler=function(ev){ev=ev||window.event;var target=ev.currentTarget||ev.srcElement;var $target=$(target);var itemData={id:$target.attr("data-id"),name:$target.text()};this.setValue(itemData);this.clearClickedItems();this.stopEvent(event);}
VeNTab.prototype.clearClickedItems=function(){this.checkedData.length=0;this.$content.find("div.tab-page li.active").removeClass("active");}
VeNTab.prototype.tabClickHandler=function(event,tab){var index=tab.attr("tab-index");this.setActive(index);this.stopEvent(event);};VeNTab.prototype.closeHandler=function(event){var target=event.target;if(this.elem!==target){if(this.opts.parentObj)this.opts.parentObj.hide();else this.hide();}
this.stopEvent(event);}
VeNTab.prototype.itemClickHandler=function(event,itemData){if(!this.opts.itemDuox){if(this.opts.itemClickFn&&typeof this.opts.itemClickFn=='function'){if(this.opts.itemClickFn(this,itemData)!==true)return;}
this.$content.find("div.tab-page li").removeClass("active");var $target=itemData["$node"];if($target.hasClass("active")){$target.removeClass("active");}else{$target.addClass("active");}
this.setValue(itemData.data);this.stopEvent(event);}else{if(this.checkedData.length===0){this.$content.find("div.tab-page li.active").removeClass("active");}
var $target=itemData["$node"];if($target.hasClass("active")){this.checkedData.splice(this.checkedData.indexOf(itemData["data"]),1);$target.removeClass("active");}else{this.checkedData.push(itemData["data"]);$target.addClass("active");}
var nameStr="";var idStr="";var splitStr=this.opts.splitStr;$.each(this.checkedData,function(i,liData){nameStr+=splitStr+liData["name"];idStr+=splitStr+liData["id"];});this.$elem.val(nameStr.substring(1));this.$hiddenInput.val(idStr.substring(1));if(this.opts.parentObj)this.opts.parentObj.hide();if(this.cbFn)this.cbFn(this.checkedData);}};VeNTab.prototype.setValue=function(clickedData){this.$elem.val(clickedData.name);this.$hiddenInput.val(clickedData.id);this.checkedData=[clickedData];if(this.opts.parentObj)this.opts.parentObj.hide();this.hide();if(this.cbFn)this.cbFn(clickedData);};VeNTab.prototype.writeDefaultValue=function(){if(this.checkedData.length>0){var nameArr=[];var idArr=[];$.each(this.checkedData,function(i,checkedItem){if($.inArray(checkedItem["id"],idArr)==-1){idArr.push(checkedItem["id"]);nameArr.push(checkedItem["name"]);}});if(this.opts.writeValueFn!=null){this.opts.writeValueFn(nameArr.join(this.opts.splitStr));}else{this.$elem.val(nameArr.join(this.opts.splitStr));}}
return this;}
VeNTab.prototype.writeValue=function(){var valueArr=this.$hiddenInput.val().split(this.opts.splitStr);$.each(this.dataItems,function(i,obj){var $node=obj["$node"];var data=obj["data"];if($.inArray(data["id"],valueArr)>-1){$node.addClass("active");}else{$node.removeClass("active");}});};VeNTab.prototype.setActive=function(index){this.$header.find(".tab").find("li[tab-index='"+this.isNow+"']").removeClass("active");this.$content.find(".tab-page[page-index='"+this.isNow+"']").removeClass("active");this.$header.find(".tab").find("li[tab-index='"+index+"']").addClass("active");this.$content.find(".tab-page[page-index='"+index+"']").addClass("active");this.isNow=index;return this;};VeNTab.prototype.show=function(){if(this.elem.readOnly)return;if(this.isShow)return;this.writeValue();this.setPos();this.$container.css("visibility","visible");this.isShow=true;var _this=this;this.clearActive();};VeNTab.prototype.clearActive=function(){if($.isBlank(this.$hiddenInput.val())){this.$content.find('.tab-page li').removeClass("active");var i=this.$header.find(".tab li").not(":hidden").eq(0).attr('tab-index');this.setActive(i);}};VeNTab.prototype.setPos=function(){var pointer=this.$elem.offset(),iWidth=$(document).outerWidth(),iHeight=$(document).outerHeight(),iLeft=0,iTop=pointer.top+this.$elem.outerHeight();iLeft=pointer.left+this.$container.outerWidth()>iWidth?(pointer.left+this.$elem.outerWidth())-this.$container.outerWidth():pointer.left;this.$container.css({"left":iLeft,"top":iTop});return this;};VeNTab.prototype.hide=function(){if(!this.isShow)return;this.$container.css({"visibility":"hidden","left":0,"top":0});this.isShow=false;if(this.opts.usetype!=="composite")this.$elem.blur();};VeNTab.prototype.destroy=function(){if(this.$container){this.$container.remove();}};VeNTab.prototype.stopEvent=function(ev){var event=ev||window.event;if(event.stopPropagation)event.stopPropagation();else event.cancelBubble=true;};function generaterUUID(){return new String(Math.random()).substring(2);}
VeNTab.closeUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnElEQVQ4T6WTwQ2FMAxDzWSwCZ8NMopHgE0Y7StSgdDGPdBeqqLk1TjuhME1DfbjBpjZD8BMcutBzWwHcJL0/QXwDyuAXUFKs9ccJP3CB+CHUNBAsuYGoCCqOQXUkOKHy71lR4/kFMKtXp82SwWVCj9KY1MF8Z+LXDmdBpAZ1pvOC9BzW0FiEq8gScMySB3l5UqYirOM8tdHNfwa/yXyZBGng+hpAAAAAElFTkSuQmCC";function deepBind(object,fn){var args=Array.prototype.slice.call(arguments).slice(2);return function(event){fn.apply(object,[event||window.event].concat(args));}}})(jQuery,window,document);